<div class="tab_content moreresponsetab manage_claim">
    <div class="top_bar">
        <div class="left_part">
            <!-- <div class="search_bar common_content">
                <div class="input-group">
                    <button class="btn search-btn">
                        <mat-icon>search</mat-icon>
                    </button>
                    <input type="search" class="form-control" placeholder="Search..." aria-label="Search" />
                </div>
            </div> -->

            <div class="content_wrap">
                <div class="policy">
                    <!-- <label>Select Insurance:</label> -->
                    <div class="form_field_wrapper">
                      
                            <label>{{ 'select_insurance' | translate }}</label>
                            <select2  [overlay]="overlay" [limitSelection]="0" [minCountForSearch]=0
                            [data]="insuranceList"
                            [value]="insuranceCompanyId"
                            (update)="getCompanyid($event)" 
                            style="padding-left: 200px !important;"
                            >
                        </select2>
                       <span *ngIf="isSubmitted && !insuranceCompanyId">
                        {{ 'please_select_insurance_first' | translate }}.
                       </span>
                        <!-- <mat-form-field class="inner_label" appearance="fill">
                            <mat-label>Select Insurance</mat-label>
                            <mat-select>
                                <mat-option *ngFor="let insurance of insuranceList" (click)="getCompanyid(insurance?.for_portal_user?._id)" [value]="insurance?.for_portal_user?._id">{{insurance.company_name}}</mat-option>
                            </mat-select>
                        </mat-form-field> 
                       <mat-error *ngIf="isSubmitted && !insuranceCompanyId">Please select insurance first.</mat-error> -->
                    </div>
                </div>
            </div>
        </div>
        <div class="right_part">
            <div class="primary_btn">
                <!-- <button type="button" class="btn btn-primary"
                    (click)="openVerticallyCenteredaddfield(addfieldcontent)">
                    <a class="btn_svg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="18" viewBox="0 0 15 18"
                            fill="none">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M3.30524 0.0827418C2.45473 0.279185 1.74256 0.710972 1.1383 1.39669C0.617787 1.98733 0.294089 2.62138 0.0925399 3.44513L0.000194303 3.82243V8.97532C0.000194303 14.6951 -0.0167024 14.3029 0.264637 15.1118C0.767629 16.5578 2.00379 17.6649 3.41158 17.9299C3.9046 18.0228 11.0724 18.0236 11.5627 17.9309C13.0347 17.6525 14.2649 16.5174 14.7627 14.9782C14.9946 14.2613 14.9997 14.1647 14.9998 10.5064L15 7.18025L12.7412 7.17962C10.2094 7.17894 10.2091 7.1789 9.68232 6.88299C8.9551 6.47439 8.48379 5.75649 8.35241 4.85723C8.32863 4.69462 8.31216 3.64858 8.312 2.29135L8.31169 0L5.97469 0.00295656C3.87026 0.00565972 3.60461 0.0136002 3.30524 0.0827418ZM9.99355 2.59997V4.67168L10.0971 4.89605C10.225 5.17325 10.458 5.34747 10.7505 5.38468C10.8612 5.39875 11.7483 5.40462 12.7218 5.39773L14.4918 5.38519L12.2427 2.9567L9.99355 0.528255V2.59997ZM7.87179 7.30206C8.05663 7.40445 8.17393 7.53956 8.25114 7.73913C8.29996 7.86525 8.31169 8.08767 8.31169 8.88675V9.87796L9.26018 9.89126C10.1436 9.9036 10.2194 9.91078 10.3651 9.99546C10.4512 10.0455 10.5603 10.1313 10.6077 10.1861C10.8993 10.5237 10.8745 11.1318 10.5558 11.4545C10.3318 11.6814 10.2333 11.6996 9.2321 11.6996H8.31169L8.31083 12.7027C8.31009 13.5889 8.30152 13.7255 8.23753 13.8748C7.94039 14.5679 7.0713 14.575 6.74358 13.887C6.67622 13.7456 6.66895 13.6312 6.66895 12.715V11.6996H5.74854C5.00493 11.6996 4.80021 11.687 4.68271 11.634C4.37118 11.4935 4.16572 11.1672 4.16572 10.813C4.16572 10.4402 4.31404 10.1707 4.61552 9.99546C4.76121 9.91078 4.83705 9.9036 5.72046 9.89126L6.66895 9.87796V8.88675C6.66895 8.08767 6.68068 7.86525 6.72949 7.73913C6.91466 7.2605 7.43634 7.06094 7.87179 7.30206Z" />
                        </svg></a>Add Field</button> -->
            </div>
        </div>
    </div>

    <div class="bottom_bar">
        <div class="subscribe_detail_inner accodion_item mt-30">
            <mat-accordion>
                <mat-expansion-panel [expanded]="true">
                    <mat-expansion-panel-header>
                        <mat-panel-title>{{ 'primary_insured_fields' | translate }}</mat-panel-title>
                    </mat-expansion-panel-header>
                    <div class="expansion_panel">
                        <div class="expansion_panel_inner">
                            <div class="row">
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                    <mat-checkbox class="example-margin"   [checked]="selectallprimary" (change)="makeSelectAll($event, 'primaryIds')">{{ 'select_all' | translate }}</mat-checkbox>
                                </div>   
                            </div>

                              <!--   <div class=" col-xl-3 role_item" *ngFor="let data of insuranceFields; let i = index" >
                                    <div class="form_field_wrapper" *ngIf="data.fieldName !== 'Full Name' && data.fieldName !== 'Unique ID' && data.fieldName !== 'Validity Date' && data.fieldName !== 'Relationship' && data.fieldName !== 'Mobile Phone'">
                                        <mat-checkbox class="example-margin"  [checked]="selectedFields[i]" (change)="onCheckboxChange(data._id, 'primaryIds', $event)"  [value]="data._id">{{data.fieldName}}</mat-checkbox>
                                    </div>
                                   
                                </div> -->

                                <div class="row">
                                    <ng-container *ngFor="let data of insuranceFields; let i = index">
                                      <div class="col-xl-3 role_item" *ngIf="shouldShowField(data.fieldName)">
                                        <div class="form_field_wrapper">
                                          <mat-checkbox
                                            class="example-margin"
                                            [checked]="selectedFields[i]"
                                            (change)="onCheckboxChange(data._id, 'primaryIds', $event)"
                                            [value]="data._id"
                                          >
                                            {{ data.fieldName }}
                                          </mat-checkbox>
                                        </div>
                                      </div>
                                    </ng-container>
                                  </div>
                                  
                                
                                <!-- <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Middle Name</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Last Name</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Date of Birth</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Age</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Gender</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Insurance ID</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Policy ID</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Employee ID</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Card ID</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Insurance Holder Name
                                        </mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Insurance Validity
                                        </mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Reimbursement</mat-checkbox>
                                    </div>
                                </div> -->

                            </div>
                        </div>
                    </div>
                </mat-expansion-panel>
            </mat-accordion>
        </div>

        <div class="subscribe_detail_inner accodion_item mt-30">
            <mat-accordion>
                <mat-expansion-panel [expanded]="true">
                    <mat-expansion-panel-header>
                        <mat-panel-title>{{ 'secondary_insurer_fields' | translate }}</mat-panel-title>
                    </mat-expansion-panel-header>
                    <div class="expansion_panel">
                        <div class="expansion_panel_inner">
                            <div class="row">
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                    <mat-checkbox class="example-margin" [checked]="selectallsecondary"  (change)="makeSelectAll($event,'secondaryId')">{{ 'select_all' | translate }}</mat-checkbox>
                                </div>   
                            </div>
                                <div class=" col-xl-3 role_item" *ngFor="let data of secondaryInsurerFieldsData; let i = index">
                                  
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin" [checked]="selectedFieldsSecondary[i]" (change)="onCheckboxChange(data._id, 'secondaryId', $event)"  [value]="data._id">{{data.fieldName}}</mat-checkbox>
                                    </div>
                                </div>
                                <!-- <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Middle Name</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Last Name</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Date of Birth</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Age</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Gender</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Insurance ID</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Policy ID</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Employee ID</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Card ID</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Insurance Holder Name
                                        </mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Insurance Validity
                                        </mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Reimbursement</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Relation with the Pirmary
                                            Insured</mat-checkbox>
                                    </div>
                                </div> -->

                            </div>
                        </div>
                    </div>
                </mat-expansion-panel>
            </mat-accordion>
        </div>

        <div class="subscribe_detail_inner accodion_item mt-30">
            <mat-accordion>
                <mat-expansion-panel [expanded]="true">
                    <mat-expansion-panel-header>
                        <mat-panel-title>{{ 'accident_related_fields' | translate }}</mat-panel-title>
                    </mat-expansion-panel-header>
                    <div class="expansion_panel">
                        <div class="expansion_panel_inner">
                            <div class="row">
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                    <mat-checkbox class="example-margin" [checked]="selectallaccident" (change)="makeSelectAll($event,'accidentalId')">{{ 'select_all' | translate }}</mat-checkbox>
                                </div>   
                            </div>
                                <div class=" col-xl-3 role_item" *ngFor="let data of accidentRelatedFieldData ; let i = index" >
                                  

                                    <div class="form_field_wrapper" >
                                        <mat-checkbox class="example-margin" [checked]="selectedFieldsAccidental[i]" (change)="onCheckboxChange(data._id, 'accidentalId', $event)"  [value]="data._id">{{data.fieldName}}</mat-checkbox>
                                    </div>
                                </div>
                                <!-- <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Accident date</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Accident type?</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Accident type</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Is there an official report?
                                        </mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Is there a responsible third
                                            party?</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">First Last </mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Last Name</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Phone Number</mat-checkbox>
                                    </div>
                                </div>
                                <div class=" col-xl-3 role_item">
                                    <div class="form_field_wrapper">
                                        <mat-checkbox class="example-margin">Address</mat-checkbox>
                                    </div>
                                </div> -->
                            </div>
                        </div>
                    </div>
                </mat-expansion-panel>
            </mat-accordion>
        </div>
    </div>
    <div class="primary_btn claim_btn">
        <button type="button" class="btn btn-secondary">{{ 'cancel' | translate }}</button>
        <ng-container *ngIf="giveInnerPermission('add')">
        <button type="button" class="btn btn-primary" (click)="saveInsuranceData()">{{ 'save' | translate }}</button>
        </ng-container>
    </div>
</div>


<!-- --------------------------------------- Add Field modal---------------------------------------- -->
<div class="add_field">
    <ng-template #addfieldcontent let-modal>
        <div class="custome_modal">
            <div class="modal-header">
                <h4 class="modal-title" id="modal-basic-title">{{ 'add_field' | translate }}</h4>
                <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                    <mat-icon>close</mat-icon>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="modal_content category_service">
                        <div class="row modal_content_inner">
                            <div class="item">
                                <div class="form_field_wrapper">
                                    <label>{{ 'select' | translate }}</label>
                                    <mat-form-field class="inner_label" appearance="fill">
                                        <mat-label>{{ 'primary_insured_fields' | translate }}</mat-label>
                                        <mat-select disableRipple>
                                            <mat-option value="1">{{ 'category1' | translate }}</mat-option>
                                            <mat-option value="2">{{ 'category2' | translate }}</mat-option>
                                            <mat-option value="3">{{ 'category3' | translate }}</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="item">
                                <div class="form_field_wrapper">
                                    <label class="invisible">{{ 'select' | translate }}</label>
                                    <mat-form-field appearance="fill">
                                        <input type="text" placeholder="Enter Name" matInput>
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                        <div class="row_generate row_add">
                            <mat-icon class="plus">add</mat-icon>
                        </div>
                    </div>

                    <div class="modal_content category_service">
                        <div class="row modal_content_inner">
                            <div class="item">
                                <div class="form_field_wrapper">
                                    <label>{{ 'select' | translate }}</label>
                                    <mat-form-field class="inner_label" appearance="fill">
                                        <mat-label>{{ 'primary_insured_fields' | translate }}</mat-label>
                                        <mat-select disableRipple>
                                            <mat-option value="1">{{ 'category1' | translate }}</mat-option>
                                            <mat-option value="2">{{ 'category2' | translate }}</mat-option>
                                            <mat-option value="3">{{ 'category3' | translate }}</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="item">
                                <div class="form_field_wrapper">
                                    <label class="invisible">{{ 'select' | translate }}</label>
                                    <mat-form-field appearance="fill">
                                        <input type="text" placeholder="Enter Name" matInput>
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                        <div class="row_generate row_minus">
                            <mat-icon class="plus">remove</mat-icon>
                        </div>
                    </div>

                </form>
                <div class="primary_btn">
                    <button type="button" class="btn btn-secondary">
                        {{ 'cancel' | translate }}
                    </button>
                    <button type="button" class="btn btn-primary">{{ 'save' | translate }}</button>
                </div>
            </div>
        </div>
    </ng-template>
</div>

