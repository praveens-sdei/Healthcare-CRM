<div class="main_block">
  <div class="main_section">
    <div>
      <app-hospital-header></app-hospital-header>
    </div>
    <div>
      <router-outlet></router-outlet>
    </div>

    <div class="create_profile login_time">
      <form [formGroup]="profileFields" (ngSubmit)="createProfileData()">
        <div class="container">
          <div class="main_title">{{"hospital_profile" | translate}}</div>
          <div class="create_profile_inner">
            <div class="user_image_upload">
              <input
                  id="file-input"
                  class="upload_input"
                  type="file"
                  accept="image/*"
                  (change)="onFileSelected($event, 'profilepicture')"
                />
                <div class="user_upload_block">
                  <span class="user_upload_wrapper">
                    <span class="user_upload_icon">
                      <img
                    class="img-fluid"
                    src="{{
                      profile_picture
                        ? profile_picture
                        : 'assets/img/hospital_create_profile.png'
                    }}"
                  />
                    <span class="quick_view" *ngIf="profile_picture">
                      <mat-icon class="closeicon" (click)="removeSelectpic('profile_picture')"
                        >close</mat-icon
                      >
                    </span>
                    </span>
                  </span>
                  <span class="edit_upload_wrapper">
                    <span class="edit_upload_icon"
                      ><img src="../../../assets/img/edit_profile.svg"
                    /></span>
                  </span>
                </div>
            </div>
            <!-- <div class="profile_img"> -->
              <!-- <img src="assets/img/create_profile.png" /> -->
              <!-- <div class="profile_img_wrap" for="file-input">
                <div class="image-container">
                  
                
                  <img
                    class="img-fluid"
                    src="{{
                      profile_picture
                        ? profile_picture
                        : 'assets/img/hospital_create_profile.png'
                    }}"
                  />
                
                  <i class="fa fa-camera" *ngIf="!profile_picture"></i>
                </div>
                <span class="quick_view" *ngIf="profile_picture">
                  <mat-icon class="closeicon" (click)="removeSelectpic('profile_picture')"
                    >close</mat-icon
                  >
                </span>
                <input
                  id="file-input"
                  class="upload_input"
                  type="file"
                  accept="image/*"
                  (change)="onFileSelected($event, 'profilepicture')"
                />
              </div>
            </div> -->
            <div class="form">
              <div class="row">
                <div class="col-sm-12 col-md-4">
                  <div class="form_field_wrapper mb-3">
                    <label>{{"First Name" | translate}}<span class="danger">*</span></label>
                    <mat-form-field appearance="fill">
                      <input
                        type="text"
                        formControlName="first_name"
                        matInput
                      />
                    </mat-form-field>
                    <mat-error
                    *ngIf="
                      profileFields.get('first_name').hasError('required')
                    "
                  >
                    {{"first_name_is_required" | translate}}.</mat-error
                  >
                  </div>
                </div>
                <div class="col-sm-12 col-md-4">
                  <div class="form_field_wrapper mb-3">
                    <label>{{"Middle Name" | translate}}</label>
                    <mat-form-field appearance="fill">
                      <input
                        type="text"
                        formControlName="middle_name"
                        matInput
                      />
                    </mat-form-field>
                  </div>
                </div>
                <div class="col-sm-12 col-md-4">
                  <div class="form_field_wrapper mb-3">
                    <label>{{"Last Name" | translate}}<span class="danger">*</span></label>
                    <mat-form-field appearance="fill">
                      <input type="text" formControlName="last_name" matInput />
                    </mat-form-field>
                    <mat-error
                    *ngIf="
                      profileFields.get('last_name').hasError('required')
                    "
                  >
                    {{"last_name_is_required" | translate}}.</mat-error
                  >
                  </div>
                </div>
                <div class="col-sm-12 col-md-4">
                  <div class="form_field_wrapper mb-3">
                    <label>{{"hospital_name" | translate}}<span class="danger">*</span></label>
                    <mat-form-field appearance="fill">
                      <input
                        type="text"
                        formControlName="hospitalName"
                        matInput
                      />
                    </mat-form-field>
                    <mat-error
                    *ngIf="
                      profileFields.get('hospitalName').hasError('required')
                    "
                  >
                    {{"hospital_name_is_required" | translate}}.</mat-error
                  >
                  </div>
                </div>
                <div class="col-sm-12 col-md-4">
                  <div class="form_field_wrapper mb-3">
                    <label>{{"email" | translate}}<span class="danger">*</span></label>
                    <mat-form-field appearance="fill">
                      <input type="email" formControlName="email" matInput />
                    </mat-form-field>
                    <mat-error
                    *ngIf="profileFields.get('email').hasError('required')"
                    >{{"email_is_required" | translate}}.</mat-error>
                  </div>
                </div>
                <div class="col-sm-12 col-md-4">
                  <div class="form_field_wrapper mb-3">
                    <label
                      >{{"type_of_health_centre" | translate}}<span class="danger">*</span>
                    </label>
                    <!-- <mat-form-field appearance="fill">
                      <mat-select
                        disableRipple
                        formControlName="typeOfHealthCenter"
                      >
                        <mat-option
                          *ngFor="let options of healthCenterTypes"
                          [value]="options._id"
                          >{{ options?.name }}</mat-option
                        >
                      </mat-select>
                    </mat-form-field> -->
                    <select2
                    [placeholder] ="'Type of health center'"
                    [data] = "healthCenterTypes"
                    formControlName="typeOfHealthCenter"
                    [overlay]="true"
                    >
                    </select2>
                    <mat-error 
                    style="top: -17px !important;"
                    *ngIf="
                    isSubmitted &&  profileFields
                        .get('typeOfHealthCenter')
                        .hasError('required')
                    "
                  >
                    {{"type_of_health_centre_is_required" | translate}}.</mat-error
                  >
                  </div>
                </div>
                <div class="col-sm-12 col-md-4">
                  <div class="form_field_wrapper mb-3">
                    <label
                      >{{"category_of_health_center" | translate}}
                      <span class="danger">*</span></label
                    >
                    <mat-form-field appearance="fill">
                      <!-- <mat-label>Sub-admin</mat-label> -->
                      <mat-select
                        disableRipple
                        formControlName="categoryOfHealthCenter"
                      >
                        <mat-option value="Public">{{"public" | translate}}</mat-option>
                        <mat-option value="Private">{{"private" | translate}}</mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-error
                    *ngIf="
                    isSubmitted &&   profileFields
                        .get('categoryOfHealthCenter')
                        .hasError('required')
                    "
                  >
                    {{"category_of_health_center_is_required" | translate}}.</mat-error
                  >
                  </div>
                </div>
                <div class="col-sm-12 col-md-4">
                  <div class="form_field_wrapper mb-3">
                    <label
                      >{{"main_phone_number" | translate}}<span class="danger">*</span></label
                    >
                    <mat-form-field appearance="fill">
                      <input
                      (keypress)="numberFunc($event)"
                      (paste)="numberFunc($event)"
                        matInput
                        formControlName="mainPhone"
                        type="text"
                        #mobile
                        (focus)="onFocus()"
                        ng2TelInput
                        placeholder="Enter Mobile"
                      />
                    </mat-form-field>
                    <mat-error
                    *ngIf="
                    isSubmitted && profileFields.get('mainPhone').hasError('required')
                    "
                    >{{"main_phone_number_is_required" | translate}}.</mat-error
                  >
                  </div>
                </div>
                <!-- <div class="col-sm-12 col-md-4">
                  <div class="form_field_wrapper">
                    <label
                      >Mobile Phone Number <span class="danger">*</span></label
                    >
                    <mat-form-field appearance="fill">
                      <input
                        type="mobile"
                        matInput
                        formControlName="mobilePhone"
                      />
                      <mat-error
                        *ngIf="
                          profileFields.get('mobilePhone').hasError('required')
                        "
                      >
                        Mobile Phone Number is required.</mat-error
                      >
                    </mat-form-field>
                  </div>
                </div> -->

                <ng-container formArrayName="phones">
                  <div
                    class="col-sm-12 col-md-4"
                    *ngFor="let _ of phones.controls; let i = index"
                  >
                    <div class="form_field_wrapper mb-3">
                      <label> {{"phone_number" | translate}} {{ i + 1 }}</label>
                      <div class="fieldicon_wrap">
                        <mat-form-field appearance="fill">
                          <input
                            type="mobile"
                            matInput
                            [formControlName]="i"
                            [name]="'phones' + i"
                          />
                        </mat-form-field>
                        <ng-container *ngIf="i === phones.length - 1; else remove">
                          <mat-icon
                          class="minus"
                          (click)="removeAdditionalPhone(i)"
                          *ngIf="phones.length>1"
                          >clear</mat-icon
                        >
                        <mat-icon
                          class="plus"
                          (click)="addAdditionalPhone()"
                        >
                          add</mat-icon
                        >
                        </ng-container>
                        <ng-template #remove>
                          <mat-icon
                          class="minus"
                          (click)="removeAdditionalPhone(i)"
                          >clear</mat-icon
                        >
                        </ng-template>
                      </div>
                    </div>
                  </div>
                </ng-container>

                <div class="col-sm-12 col-md-4">
                  <div class="form_field_wrapper mb-3">
                    <label>{{"fax_number" | translate}}</label>
                    <mat-form-field appearance="fill">
                      <input type="text" matInput formControlName="faxNumber" />
                      <mat-error
                        *ngIf="
                          profileFields.get('faxNumber').hasError('required')
                        "
                        >{{"fax_number_is_required" | translate}}.</mat-error
                      >
                    </mat-form-field>
                  </div>
                </div>

                <app-address-shared
                  [profileFields]="profileFields"
                  [isSubmit] = "isSubmitted"
                  *ngIf="showAddressComponent"
                >
                </app-address-shared>

                <div class="col-sm-12">
                  <div class="form_field_wrapper mb-3">
                    <label>{{"about" | translate}}</label>
                    <mat-form-field appearance="fill">
                      <textarea
                        type="text"
                        formControlName="about"
                        matInput
                      ></textarea>
                      <mat-error
                        *ngIf="profileFields.get('about').hasError('required')"
                        >{{"about_is_required" | translate}}.</mat-error
                      >
                    </mat-form-field>
                  </div>
                </div>

                <div class="healthcare_network association">
                  <div class="association_part">
                    <div class="association_part_inner row">
                      <div class="item" formGroupName="association">
                        <div class="title">{{"association_group" | translate}}</div>
                        <mat-radio-group
                          aria-label="Select an option"
                          formControlName="enabled"
                          (change)="handleSelectChange($event)"
                        >
                          <mat-radio-button
                            [value]="true"
                            [checked]="profileFields.value.association.enabled"
                            >{{"yes" | translate}}
                          </mat-radio-button>
                          <mat-radio-button
                            [value]="false"
                            [checked]="!profileFields.value.association.enabled "
                            >{{"no" | translate}}
                          </mat-radio-button>
                        </mat-radio-group>
                      </div>
                      <ng-container *ngIf="profileFields.value.association.enabled">
                      <div class="item">
                        <div class="title">{{"show_to_patient_portal" | translate}}</div>
                        <mat-radio-group
                          aria-label="Select an option"
                          formControlName="show_to_patient"
                        >
                          <mat-radio-button
                            [value]="true"
                            [checked]="profileFields.value.show_to_patient"
                            >{{"yes" | translate}}
                          </mat-radio-button>
                          <mat-radio-button
                            [value]="false"
                            [checked]="!profileFields.value.show_to_patient"
                            >{{"no" | translate}}
                          </mat-radio-button>
                        </mat-radio-group>
                      </div>
                    </ng-container>
                    </div>
                  </div>

                  <div
                    class="association_field"
                    *ngIf="profileFields.value.association.enabled"
                  >
                    <div class="row">
                      <ng-container formArrayName="name">
                        <div
                          class="association_item col-md-6 col-lg-4"
                          *ngFor="let _ of name.controls; index as i"
                        >
                          <label>{{"enter_name" | translate}}</label>
                          <div class="form_field_wrapper mb-3">
                            <select2 [overlay]="overlay"  [limitSelection]="0" [minCountForSearch]=0 [data]="associationList"  
                            (update)="updateMySelection($event, i)"  [formControlName]="i">
                            </select2>
                            <!-- <mat-form-field
                              class="example-full-width"
                              appearance="fill"
                            >
                              <input
                                type="text"
                                matInput
                                [formControlName]="i"
                                [name]="'name' + i"
                                [formControl]="myControl"
                                [matAutocomplete]="auto"
                                placeholder="Search Group Name"
                              />
                              <mat-autocomplete #auto="matAutocomplete">
                                <mat-option
                                  *ngFor="let option of filteredOptions | async"
                                  [value]="option.name"
                                  (onSelectionChange)="
                                    updateMySelection(option, i)
                                  "
                                >
                                  <span *ngIf="option == 'No Data'">
                                    No Data Found</span
                                  >
                                  <span *ngIf="option != 'No Data'">
                                    {{ option.name }}
                                  </span>
                                </mat-option>
                              </mat-autocomplete>
                            </mat-form-field> -->
                            <ng-container *ngIf="i === name.length - 1; else remove">
                              <div class="row_generate row_minus">
                                <mat-icon
                                  (click)="removeAdditionalName(i)"
                                  *ngIf="name.length>1"
                                >
                                  clear</mat-icon
                                >
                              </div>
  
                              <div class="row_generate row_add">
                                <mat-icon
                                  class="plus"
                                  (click)="addAdditionalName()"
                                  >add</mat-icon
                                >
                              </div>
                            </ng-container>
                            <ng-template #remove>
                              <div class="row_generate row_minus">
                                <mat-icon
                                  (click)="removeAdditionalName(i)"
                                  *ngIf="name.length>1"
                                >
                                  clear</mat-icon
                                >
                              </div>
                            </ng-template>
                          </div>
                        </div>
                      </ng-container>
                    </div>
                  </div>
                </div>

                <div class="healthcare_network">

                  <div class="p-3">
                    <div class="d-flex justify-content-start align-items-center">
                      <button
                    type="button"
                    class="btn btn-primary ms-0 me-2 mb-2"
                    (click)="openVerticallyCenteredaddmanually(addmanualcontent)"
                  >{{ "add" | translate }}</button>
                      <button
                      type="button"
                      class="btn btn-primary ms-0 me-2 mb-2"
                      (click)="openImportTestPopup(importTests)"
                    >
                      <a class="btn_svg"
                        ><svg
                          width="17"
                          height="15"
                          viewBox="0 0 19 17"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M2.70702 0.0104581C2.35458 0.068045 2.14937 0.132128 1.86268 0.274083C1.40132 0.502557 0.97754 0.942847 0.758933 1.42088C0.482758 2.0248 0.50022 1.57399 0.50022 8.09617C0.50022 12.9014 0.509776 14.035 0.55184 14.2135C0.717983 14.9191 1.21541 15.5686 1.8243 15.875C2.38912 16.1593 2.18433 16.1464 6.14194 16.1464H9.71119L9.88221 16.0467C9.97624 15.9919 10.1037 15.8725 10.1653 15.7812C10.2688 15.6282 10.2815 15.5697 10.329 15.0238C10.4356 13.8003 10.7776 12.9004 11.4602 12.0464C12.1823 11.1432 13.1294 10.555 14.2693 10.3017C14.6271 10.2222 14.8098 10.2123 16.3188 10.1915L17.9755 10.1685L18.1418 10.0472C18.2333 9.98044 18.3513 9.84594 18.4041 9.7483L18.5 9.57071L18.4998 7.11979L18.4997 4.66886L18.3953 4.35004C18.1169 3.49978 17.5074 2.88881 16.677 2.62765C16.49 2.56883 16.1025 2.55875 13.2776 2.53906L10.0893 2.51682L9.93295 2.40938C9.82035 2.33195 9.65551 2.11499 9.34318 1.63305C9.10481 1.26517 8.83965 0.884663 8.75398 0.787502C8.53058 0.53412 8.0822 0.243117 7.72051 0.116785L7.40845 0.00778804L5.10571 0.00129208C3.8392 -0.00229465 2.75979 0.00184999 2.70702 0.0104581ZM14.0838 11.9775C13.9867 12.0233 13.5948 12.3851 13.0476 12.9344C12.0537 13.9318 11.9386 14.0915 11.9652 14.4363C11.9738 14.5479 12.0142 14.7048 12.055 14.785C12.172 15.0153 13.9025 16.8423 14.0853 16.9286C14.3751 17.0652 14.7298 17.0019 14.9629 16.7719C15.1698 16.5679 15.1979 16.4686 15.2186 15.8674L15.2378 15.3095L16.6066 15.2895L17.9754 15.2696L18.1418 15.1483C18.5595 14.8436 18.6203 14.2555 18.2748 13.861C18.0801 13.6388 18.0697 13.6372 16.6002 13.6157L15.2378 13.5958L15.2186 13.0379C15.1979 12.4367 15.1698 12.3374 14.9629 12.1334C14.7293 11.9029 14.3751 11.8401 14.0838 11.9775Z"
                          /></svg></a
                      >{{"import" | translate}}
                    </button>
                    </div>

                    <table class="table" *ngIf="allTestsList.length!==0">
                      <thead>
                        <tr>
                          <th scope="col">{{"type_of_test" | translate}}</th>
                          <th scope="col">{{"name_of_test" | translate}}</th>
                          <th scope="col">{{"action" | translate}}</th>
                        </tr>
                      </thead>
                      <tbody *ngFor="let test of allTestsList ; index as i">
                        <tr>
                          <td>
                            <div>{{ test.typeOfTest }}</div>
                          </td>
                          <td>
                            <div>{{ test.nameOfTest }}</div>
                          </td>
                          <td>
                              <div>
                                <mat-icon (click)="editVerticallyCenteredtest(edittests, test)">edit</mat-icon>
                                <mat-icon (click)="openDelTestPopup(deleteTestPopup,test, i)">delete</mat-icon>
                              </div>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                    <table *ngIf="allTestsList.length===0">
                       {{"no_tests_available" | translate}}
                    </table>
            
                </div>

                  <!-- <div class="association_field">
                    <div class="row">
                      <ng-container formArrayName="medical_act">
                        <div
                          class="col-sm-12 col-md-4"
                          *ngFor="let _ of medical_act.controls; index as i"
                        >
                          <div class="form_field_wrapper">
                            <label>Medical act performed</label>
                            <div class="fieldicon_wrap">
                              <mat-form-field appearance="fill">
                                <input
                                  type="text"
                                  matInput
                                  [formControlName]="i"
                                  [name]="'medical_act' + i"
                                 
                                />
                              </mat-form-field>
                              <ng-container *ngIf="i === medical_act.length - 1; else remove">
                                <mat-icon
                                class="minus"
                                (click)="removeAdditionalMatLife(i)"
                                *ngIf="medical_act.length>1"
                                >clear</mat-icon
                              >
                              <mat-icon
                                class="plus"
                                (click)="addAdditionalMatLife()"
                                >add</mat-icon
                              >
                              </ng-container>
                              <ng-template #remove>
                                <mat-icon
                                class="minus"
                                (click)="removeAdditionalMatLife(i)"
                                >clear</mat-icon
                              >
                              </ng-template>
                            </div>
                          </div>
                        </div>
                      </ng-container>
                    </div>

                    <div class="row">
                      <ng-container formArrayName="lab_test">
                        <div
                          class="col-sm-12 col-md-4"
                          *ngFor="let _ of lab_test.controls; index as i"
                        >
                          <div class="form_field_wrapper">
                            <label>Lab test performed</label>
                            <div class="fieldicon_wrap">
                              <mat-form-field appearance="fill">
                                <input
                                  type="text"
                                  matInput
                                  [formControlName]="i"
                                  [name]="'lab_test' + i"
                                 
                                />
                              </mat-form-field>
                              <ng-container *ngIf="i === lab_test.length - 1; else remove">
                                <mat-icon
                                class="minus"
                                (click)="removeAdditionalLabTest(i)"
                                *ngIf="lab_test.length >1"
                                >clear</mat-icon
                              >
                              <mat-icon
                                class="plus"
                                (click)="addAdditionalLabTest()"
                                >add</mat-icon
                              >
                              </ng-container>
                              <ng-template #remove>
                                <mat-icon
                                class="minus"
                                (click)="removeAdditionalLabTest(i)"
                                >clear</mat-icon
                              >
                              </ng-template>
                            </div>
                          </div>
                        </div>
                      </ng-container>
                    </div>

                    <div class="row">
                      <ng-container formArrayName="imaging">
                        <div
                          class="col-sm-12 col-md-4"
                          *ngFor="let _ of imaging.controls; index as i"
                        >
                          <div class="form_field_wrapper">
                            <label>Imaging performed</label>
                            <div class="fieldicon_wrap">
                              <mat-form-field appearance="fill">
                                <input
                                  type="text"
                                  matInput
                                  [formControlName]="i"
                                  [name]="'imaging' + i"
                                  
                                />
                              </mat-form-field>
                              <ng-container *ngIf="i === imaging.length - 1; else remove">
                                <mat-icon
                                class="minus"
                                (click)="removeAdditionalImaging(i)"
                                *ngIf="imaging.length >1"
                                >clear</mat-icon
                              >
                              <mat-icon
                                class="plus"
                                (click)="addAdditionalImaging()"
                                >add</mat-icon
                              >
                              </ng-container>
                              <ng-template #remove>
                                <mat-icon
                                class="minus"
                                (click)="removeAdditionalImaging(i)"
                                >clear</mat-icon
                              >
                              </ng-template>
                            </div>
                          </div>
                        </div>
                      </ng-container>
                    </div>

                    <div class="row">
                      <ng-container formArrayName="vaccination">
                        <div
                          class="col-sm-12 col-md-4"
                          *ngFor="let _ of vaccination.controls; index as i"
                        >
                          <div class="form_field_wrapper">
                            <label>Vaccination performed</label>
                            <div class="fieldicon_wrap">
                              <mat-form-field appearance="fill">
                                <input
                                  type="text"
                                  matInput
                                  [formControlName]="i"
                                  [name]="'vaccination' + i"
                                  
                                />
                              </mat-form-field>
                              <ng-container *ngIf="i === vaccination.length - 1; else remove">
                                <mat-icon
                                class="minus"
                                (click)="removeAdditionalvaccination(i)"
                                *ngIf="vaccination.length>1"
                                >clear</mat-icon
                              >
                              <mat-icon
                                class="plus"
                                (click)="addAdditionalvaccination()"
                                >add</mat-icon
                              >
                              </ng-container>
                              <ng-template #remove>
                                <mat-icon
                                class="minus"
                                (click)="removeAdditionalvaccination(i)"
                                >clear</mat-icon
                              >
                              </ng-template>
                            </div>
                          </div>
                        </div>
                      </ng-container>
                    </div>

                    <div class="row">
                      <ng-container formArrayName="other_test">
                        <div
                          class="col-sm-12 col-md-4"
                          *ngFor="let _ of other_test.controls; index as i"
                        >
                          <div class="form_field_wrapper">
                            <label>Other Test</label>
                            <div class="fieldicon_wrap">
                              <mat-form-field appearance="fill">
                                <input
                                  type="text"
                                  matInput
                                  [formControlName]="i"
                                  [name]="'other_test' + i"
                                  
                                />
                              </mat-form-field>
                              <ng-container *ngIf="i === other_test.length - 1; else remove">
                                <mat-icon
                                class="minus"
                                (click)="removeAdditionalOtherTest(i)"
                                *ngIf="other_test.length>1"
                              >
                                clear</mat-icon
                              >
                              <mat-icon
                                class="plus"
                                (click)="addAdditionalOtherTest()"
                                >add</mat-icon
                              >
                              </ng-container>
                              <ng-template #remove>
                                <mat-icon
                                class="minus"
                                (click)="removeAdditionalOtherTest(i)"
                              >
                                clear</mat-icon
                              >
                              </ng-template>
                            </div>
                          </div>
                        </div>
                      </ng-container>
                    </div>
                  </div> -->

                </div>

                
                <div class="healthcare_network">
                  <h2>{{"license" | translate}}</h2>
                  <ng-container formGroupName="licence_details">
                    <div class="row">
                      <div class="col-sm-12 col-md-4">
                        <div class="form_field_wrapper mb-3">
                          <label
                            >{{"license_number" | translate}}<span class="danger">*</span></label
                          >
                          <mat-form-field appearance="fill">
                            <input
                              type="text"
                              matInput
                              placeholder='{{"license_number" | translate}}'
                              formControlName="id_number"
                              name="id_number"
                            />
                          </mat-form-field>
                          <mat-error
                          *ngIf="
                          isSubmitted && profileFields
                              .get('licence_details.id_number')
                              .hasError('required')
                          "
                          >{{"license_number_is_required" | translate}}.</mat-error
                        >
                        </div>
                      </div>
                      <div class="col-sm-12 col-md-4">
                        <div class="form_field_wrapper mb-3">
                          <label
                            >{{"expiry_date" | translate}}<span class="danger">*</span></label
                          >
                          <mat-form-field
                            class="example-full-width"
                            appearance="fill"
                          >
                            <input
                              matInput
                              [matDatepickerFilter]="myFilter"
                              [matDatepicker]="picker"
                              formControlName="expiry_date"
                              name="expiry_date"
                              placeholder='{{"expiry_date" | translate}}'
                            />
                            <mat-datepicker-toggle matSuffix [for]="picker">
                            </mat-datepicker-toggle>
                            <mat-datepicker #picker></mat-datepicker>
                          </mat-form-field>
                          <mat-error
                          *ngIf="
                          isSubmitted && profileFields
                              .get('licence_details.expiry_date')
                              .hasError('required')
                          "
                          >{{"expiry_date_is_required" | translate}}.</mat-error
                        >
                        </div>
                      </div>
                      <div class="col-12">
                        <div class="form_field_wrapper mb-3">
                          <!-- <label class="invisible"
                            >{{"upload_cart_picture" | translate}}<span class="danger"
                              >*</span
                            ></label> -->
                          <div class="row form-field-insurance">
                            <div class="upload_item col-sm-6 col-md-6 mb-4">
                              <div class="upload_output" *ngIf="license_picture">
                                <div class="upload_input_content">
                                  <img
                                    src="{{ license_picture }}"
                                  />
                                  <button class="btn btn-transparent closing-icon" (click)="removeSelectpic('license_picture')">
                                    <mat-icon class="close icon">close</mat-icon>
                                  </button>
                                </div>
                              </div>
                            </div>
                            <div class="upload_item col-sm-6 col-md-6">
                              <div class="upload_input">
                                <div class="upload_input_content">
                                  <img src="assets/img/add_box.svg" />
                                  <label
                          class="upload_text"
                          (click)="licenceUpload.click()"
                          >{{"upload_cart_picture" | translate}}</label>
                                </div>
                                <input
                                  type="file"
                                  accept=".pdf,image/*"
                                  hidden
                                  (change)="onFileSelected($event, 'licence')"
                                  #licenceUpload />
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <!-- <div class="col-12 upload_item">
                        <div class="form_field_wrapper">
                          <label class="invisible"
                            >{{"upload_cart_picture" | translate}}<span class="danger"
                              >*</span
                            ></label
                          >
                          <img
                            src="{{ license_picture }}"
                            style="width: 150px"
                          />
                          <span class="quick_view" *ngIf="license_picture">
                            <mat-icon class="closeicon" (click)="removeSelectpic('license_picture')"
                              >close</mat-icon
                            >
                          </span>
                        </div>
                       

                        <input
                          type="file"
                          accept=".pdf,image/*"
                          hidden
                          (change)="onFileSelected($event, 'licence')"
                          #licenceUpload
                        />
                        <span
                          class="upload_text"
                          (click)="licenceUpload.click()"
                          >{{"upload_cart_picture" | translate}}</span
                        >
                        <div class="preview-img"></div>
                      </div> -->
                    </div>
                  </ng-container>
                </div>

                <div class="healthcare_network picture_section">
                  <!-- <h2>License </h2> -->
                  <div class="row">
                    <div class="col-sm-12 col-md-12">
                      <div class="form_field_wrapper add_image mb-3">
                        <label>{{"pictures" | translate}}</label>

                        <input
                          type="file"
                          accept="image/*"
                          multiple
                          hidden
                          (change)="onFileSelected($event, 'pharmacypictures')"
                          #pharmacyPicUpload
                        />
                        <div class="boxes_wrapper">
                          <div class="boxes">
                            <div
                              class="inner_boxes"
                              (click)="pharmacyPicUpload.click()"
                            >
                              <p>
                                <mat-icon>add</mat-icon>
                              </p>
                              <p>{{"add_photos" | translate}}</p>
                            </div>
                          </div>
                          <div class="images-preview mt-4 mb-4">
                            <div class="preview-img" *ngFor="let pic of pharmacyPicUrl; index as i">
                            <span class="quick_view">
                              <mat-icon class="closeicon" (click)="removeSelectpic('hospital_pic',i)"
                                >close</mat-icon
                              >
                             
                            </span>
                              <img
                                [src]="pic"
                                alt="pharmacy_pic"
                            
                               
                              />
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="healthcare_network">
                  <h2>{{"bank_details" | translate}}</h2>
                  <ng-container formGroupName="bank_details">
                    <div class="row">
                      <div class="col-sm-12 col-md-4">
                        <div class="form_field_wrapper mb-3">
                          <label>{{"bank_name" | translate}} </label>
                          <mat-form-field appearance="fill">
                            <input
                              type="text"
                              matInput
                              formControlName="bank_name"
                              name="bank_name"
                            />
                            <mat-error
                              *ngIf="
                                bankDataFields
                                  .get('bank_name')
                                  .hasError('required')
                              "
                              >Bank Name is required.</mat-error
                            >
                          </mat-form-field>
                        </div>
                      </div>
                      <div class="col-sm-12 col-md-4">
                        <div class="form_field_wrapper mb-3">
                          <label
                            >Account Holder Name
                            </label
                          >
                          <mat-form-field appearance="fill">
                            <input
                              type="text"
                              matInput
                              formControlName="account_holder_name"
                              name="account_holder_name"
                            />
                            <mat-error
                              *ngIf="
                                bankDataFields
                                  .get('account_holder_name')
                                  .hasError('required')
                              "
                              >{{"account_holder_name_is_required" | translate}}.</mat-error
                            >
                          </mat-form-field>
                        </div>
                      </div>
                      <div class="col-sm-12 col-md-4">
                        <div class="form_field_wrapper mb-3">
                          <label
                            >{{"account_number" | translate}} </label
                          >
                          <mat-form-field appearance="fill">
                            <input
                            (keypress)="numberFunc($event)"
                            (paste)="numberFunc($event)"
                              matInput
                              formControlName="account_number"
                              name="account_number"
                            />
                            <mat-error
                              *ngIf="
                                bankDataFields
                                  .get('account_number')
                                  .hasError('required')
                              "
                              >Account Number is required.</mat-error
                            >
                          </mat-form-field>
                        </div>
                      </div>
                      <div class="col-sm-12 col-md-4">
                        <div class="form_field_wrapper mb-3">
                          <label>IFSC </label>
                          <mat-form-field appearance="fill">
                            <input
                              type="text"
                              matInput
                              formControlName="ifsc_code"
                              name="ifsc_code"
                            />
                            <mat-error
                              *ngIf="
                                bankDataFields
                                  .get('ifsc_code')
                                  .hasError('required')
                              "
                              >IFSC Code is required.</mat-error
                            >
                          </mat-form-field>
                        </div>
                      </div>
                      <div class="col-sm-12 col-md-4">
                        <div class="form_field_wrapper mb-3">
                          <label>{{"address" | translate}} </label>
                          <mat-form-field appearance="fill">
                            <input
                              type="text"
                              matInput
                              formControlName="bank_address"
                              name="bank_address"
                            />
                            <mat-error
                              *ngIf="
                                bankDataFields
                                  .get('bank_address')
                                  .hasError('required')
                              "
                              >Bank Address is required.</mat-error
                            >
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                  </ng-container>
                </div>

                <div class="healthcare_network">
                  <ng-container formGroupName="ifu_details">
                    <div class="row">
                      <div class="col-sm-12 col-md-4">
                        <div class="form_field_wrapper mb-3">
                          <label
                            >{{"IFU_number" | translate}} <span class="danger">*</span></label
                          >
                          <mat-form-field appearance="fill">
                            <input
                              type="text"
                              matInput
                              formControlName="ifuNumber"
                              name="ifuNumber"
                            />
                          </mat-form-field>
                          <mat-error
                          *ngIf="
                          isSubmitted &&  ifUDataFields
                              .get('ifuNumber')
                              .hasError('required')
                          "
                          >{{"ifu_number_is_required" | translate}}.</mat-error
                        >
                        </div>
                      </div>
                      <div class="col-sm-12 col-md-4">
                        <div class="form_field_wrapper mb-3">
                          <label
                            >{{"RCCM_number" | translate}} <span class="danger">*</span></label
                          >
                          <mat-form-field appearance="fill">
                            <input
                              type="text"
                              matInput
                              formControlName="rccmNumber"
                              name="rccmNumber"
                            />
                          </mat-form-field>
                          <mat-error
                          *ngIf="
                          isSubmitted && ifUDataFields
                              .get('rccmNumber')
                              .hasError('required')
                          "
                          >{{"rccm_number_is_required" | translate}}.</mat-error
                        >
                        </div>
                      </div>
                    </div>
                  </ng-container>
                </div>

                <div class="healthcare_network">
                  <div class="mobile_paydetails custome_modal divider">
                    <h2>{{"mobile_pay_details" | translate}}</h2>
                    <div class="modal-body">
                      <ng-container formArrayName="mobilePay">
                        <ng-container
                        *ngFor="let _ of medicine.controls; let i = index"
                        >
                          <ng-container [formGroupName]="i">
                            <div class="paydetail_content modal_content">
                              <div class="row modal_content_inner">
                                <div class="item col-sm-6 col-lg-6">
                                  <div class="form_field_wrapper mb-3">
                                    <label>{{"name_of_mobile_provider" | translate}}</label>
                                    <mat-form-field appearance="fill">
                                      <input
                                        type="text"
                                        matInput
                                        formControlName="provider"
                                      />
                                    </mat-form-field>
                                  </div>
                                </div>
                                <div class="item col-sm-6 col-lg-6">
                                  <div class="form_field_wrapper mb-3">
                                    <label>{{"mobile_pay_number" | translate}}</label>
                                    <div class="field-wrap-block d-flex">
                                    <mat-select
                                      disableRipple
                                      placeholder="Select Country Code"
                                      formControlName="mobile_country_code"
                                      class="country-code-select">
                                      <mat-option *ngFor="let code of countryCodes" [value]="code">{{ code }}</mat-option>
                                    </mat-select>
                                    <mat-form-field appearance="fill">
                                      <input
                                        type="mobile"
                                        (keypress)="numberFunc($event)"
                                        (paste)="numberFunc($event)"
                                        matInput
                                        formControlName="pay_number"
                                      />
                                    </mat-form-field>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <ng-container *ngIf="i === medicine.length - 1; else remove">
                                <div class="row_generate row_minus">
                                  <mat-icon
                                    class="minus"
                                    *ngIf="medicine.length>1"
                                    (click)="deleteMobile(i)"
                                    >remove</mat-icon
                                  >
                                </div>
                                <div class="row_generate row_add">
                                  <mat-icon
                                    class="plus"
                                    (click)="addNewMobile()"
                                    >add</mat-icon
                                  >
                                </div>
                              </ng-container>
                              <ng-template #remove>
                                <div class="row_generate row_minus">
                                  <mat-icon
                                    class="minus"
                                    (click)="deleteMobile(i)"
                                    >remove</mat-icon
                                  >
                                </div>
                              </ng-template>
                            
                            </div>
                            <br />
                          </ng-container>
                        </ng-container>
                      </ng-container>
                    </div>
                  </div>
                  <!-- <h2>Mobile Pay Details</h2>

                  <ng-container formArrayName="mobilePay">
                    <ng-container
                      *ngFor="let _ of medicine.controls; let i = index"
                    >
                      <ng-container [formGroupName]="i">
                        <div class="field_icon_wrap">
                          <div class="row">
                            <div class="col-sm-12 col-md-4">
                              <div class="form_field_wrapper">
                                <label>Name of Mobile Provider</label>
                                <mat-form-field appearance="fill">
                                  <input
                                    type="text"
                                    formControlName="provider"
                                    matInput
                                  />
                                </mat-form-field>
                              </div>
                            </div>
                            <div class="col-sm-12 col-md-4">
                              <div class="form_field_wrapper">
                                <label>Mobile Pay Number</label>
                                <mat-form-field appearance="fill">
                                  <input
                                  (keypress)="numberFunc($event)"
                                  (paste)="numberFunc($event)"
                                    formControlName="pay_number"
                                    matInput
                                  />
                                </mat-form-field>
                              </div>
                            </div>
                            <ng-container *ngIf="i === medicine.length - 1; else remove">
                              <mat-icon
                              class="minus"
                              (click)="deleteMobile(i)"
                              *ngIf="medicine.length>1"
                              >clear</mat-icon
                            >
                            <mat-icon
                              class="plus"
                              (click)="addNewMobile()"
                            >
                              add</mat-icon
                            >
                            </ng-container>
                            <ng-template #remove>
                              <mat-icon
                              class="minus"
                              (click)="deleteMobile(i)"
                              >clear</mat-icon
                            >
                           </ng-template>
                          </div>
                        </div>
                      </ng-container>
                    </ng-container>
                  </ng-container> -->
                </div>
              </div>
            </div>
          </div>
          <div class="primary_btn btn_wrap mt-5">
            <button
            type="button"
            class="btn btn-secondary"
            [routerLink]="['/hospital/login']"
          >
            {{"cancel" | translate}}
          </button>
            <button type="submit" mat-stroked-button class="btn btn-primary">
              {{"save" | translate}}
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>


  <!-- import popup-->
  <ng-template #importTests let-modal>
    <div class="custome_modal">
      <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title"></h4>
        <button
          type="button"
          class="btn-close"
          aria-label="Close"
          (click)="closePopup()"
        >
          <mat-icon>close</mat-icon>
        </button>
      </div>

      <div class="modal-body import_services">
        <form [formGroup]="testExcelForm" (ngSubmit)="excleSubmit()">
          <label>{{"upload_excel_file" | translate}}</label>
          <div class="row">
            <div class="col-sm-6 upload_item">
              <div class="form_field_wrapper mb-3">
                <div class="upload_input">
                  <div class="upload_input_content">
                    <label>
                      <a class="btn_svg"
                        ><svg
                          width="19"
                          height="17"
                          viewBox="0 0 19 17"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M2.70702 0.0104581C2.35458 0.068045 2.14937 0.132128 1.86268 0.274083C1.40132 0.502557 0.97754 0.942847 0.758933 1.42088C0.482758 2.0248 0.50022 1.57399 0.50022 8.09617C0.50022 12.9014 0.509776 14.035 0.55184 14.2135C0.717983 14.9191 1.21541 15.5686 1.8243 15.875C2.38912 16.1593 2.18433 16.1464 6.14194 16.1464H9.71119L9.88221 16.0467C9.97624 15.9919 10.1037 15.8725 10.1653 15.7812C10.2688 15.6282 10.2815 15.5697 10.329 15.0238C10.4356 13.8003 10.7776 12.9004 11.4602 12.0464C12.1823 11.1432 13.1294 10.555 14.2693 10.3017C14.6271 10.2222 14.8098 10.2123 16.3188 10.1915L17.9755 10.1685L18.1418 10.0472C18.2333 9.98044 18.3513 9.84594 18.4041 9.7483L18.5 9.57071L18.4998 7.11979L18.4997 4.66886L18.3953 4.35004C18.1169 3.49978 17.5074 2.88881 16.677 2.62765C16.49 2.56883 16.1025 2.55875 13.2776 2.53906L10.0893 2.51682L9.93295 2.40938C9.82035 2.33195 9.65551 2.11499 9.34318 1.63305C9.10481 1.26517 8.83965 0.884663 8.75398 0.787502C8.53058 0.53412 8.0822 0.243117 7.72051 0.116785L7.40845 0.00778804L5.10571 0.00129208C3.8392 -0.00229465 2.75979 0.00184999 2.70702 0.0104581ZM14.0838 11.9775C13.9867 12.0233 13.5948 12.3851 13.0476 12.9344C12.0537 13.9318 11.9386 14.0915 11.9652 14.4363C11.9738 14.5479 12.0142 14.7048 12.055 14.785C12.172 15.0153 13.9025 16.8423 14.0853 16.9286C14.3751 17.0652 14.7298 17.0019 14.9629 16.7719C15.1698 16.5679 15.1979 16.4686 15.2186 15.8674L15.2378 15.3095L16.6066 15.2895L17.9754 15.2696L18.1418 15.1483C18.5595 14.8436 18.6203 14.2555 18.2748 13.861C18.0801 13.6388 18.0697 13.6372 16.6002 13.6157L15.2378 13.5958L15.2186 13.0379C15.1979 12.4367 15.1698 12.3374 14.9629 12.1334C14.7293 11.9029 14.3751 11.8401 14.0838 11.9775Z"
                          /></svg></a
                      >{{"import_excel" | translate}}
                    </label>
                    {{"select_selected_files" | translate}}
                  </div>
                  <input
                    (change)="fileChange($event)"
                    formControlName="specialization_csv"
                    class="ng-hide user_upload_input"
                    accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"
                    id="input-file-id"
                    type="file"
                  />
                  <mat-error
                    *ngIf="
                      isSubmitted &&
                      testExcelForm
                        .get('specialization_csv')
                        .hasError('required')
                    "
                    >{{"excel_required" | translate}}.</mat-error
                  >
                </div>
              </div>
            </div>
  
            <div class="download_content col-sm-6">
              <button
                type="button"
                placement="top"
                ngbTooltip="Tooltip on top"
                class="btn btn-secondary"
                (click)="downLoadExcel()"
              >
              {{"download_test_sample_excel_file" | translate}}
              </button>
            </div>
          </div>
          <div class="pt-20">
            <i>{{"note_only_excel_file_allowed" | translate}}</i>
          </div>
          <div class="primary_btn">
            <button
              type="button"
              class="btn btn-secondary"
              (click)="closePopup()"
            >
              {{"cancel" | translate}}
            </button>
            <button type="submit" class="btn btn-primary" (click)="closePopup()">Done</button>
          </div>
        </form>
      </div>

    </div>
  </ng-template>

  <ng-template #deleteTestPopup let-modal>
    <div class="custome_modal action_modals">
      <div class="modal-body">
        <div class="delete_screen text-center">
          <div class="image delete">
            <img
              class="img-fluid"
              src="../../../../assets/img/delete.svg"
              alt=""
            />
          </div>
          <p class="heading delete">{{"are_you_sure" | translate}}</p>
          <p>{{"you_want_to_delete_this_test" | translate}}</p>
          <div class="primary_btn mt-30">
            <button
              type="button"
              class="btn btn-secondary"
              (click)="closePopup()"
            >
              {{"no" | translate}}
            </button>
            <button
              type="button"
              class="btn btn-primary"
              (click)="removeTest()"
            >
              {{"yes" | translate}}
            </button>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <div class="add_role">
    <ng-template #addmanualcontent let-modal>
      <div class="custome_modal">
        <div class="modal-header">
          <h4 class="modal-title" id="modal-basic-title">
            {{"add_manually" | translate}}
          </h4>
          <button
            type="button"
            class="btn-close"
            aria-label="Close"
            (click)="modal.dismiss('Cross click')"
          >
            <mat-icon>close</mat-icon>
          </button>
        </div>
        <div class="modal-body">
          <form [formGroup]="manualForm" (ngSubmit)="addManualtest()">
            <ng-container formArrayName="manualentries">
              <ng-container *ngFor="let row of manualentries.controls; let i = index">
                <ng-container [formGroupName]="i">
                  <div class="modal_content Speciality_service">
                    <div class="row modal_content_inner">
                      <div class="item">
                        <div class="form_field_wrapper">
                          <label>{{"type_of_test" | translate}} </label>
                          <mat-form-field appearance="fill">
                            <input type="text" formControlName="typeOfTest" placeholder="" matInput />
                          </mat-form-field>
  
                        </div>
                        <span class="text-danger"
                          *ngIf="isSubmitted && manualentries.controls[i].get('typeOfTest')?.errors?.['required']">
                          {{"field_is_required" | translate}}
                        </span>
                      </div>
                      <div class="item">
                        <div class="form_field_wrapper">
                          <label>{{"name_of_test" | translate}}</label>
                          <mat-form-field appearance="fill">
                            <input type="text" formControlName="nameOfTest" placeholder="" matInput />
                          </mat-form-field>
  
                        </div>
                        <span class="text-danger"
                          *ngIf="isSubmitted && manualentries.controls[i].get('nameOfTest')?.errors?.['required']">
                          {{"field_is_required" | translate}}
                        </span>
                      </div>
                    </div>
                    <ng-container *ngIf="i === manualentries.length - 1; else remove">
                      <div class="row_generate row_minus" (click)="removeEntry(i)" *ngIf="manualentries.length>1">
                        <mat-icon class="plus">remove</mat-icon>
                      </div>
                      <div class="row_generate row_add" (click)="addnewRntry()">
                        <mat-icon class="plus">add</mat-icon>
                      </div>
                    </ng-container>
                    <ng-template #remove>
                      <div class="row_generate row_minus" (click)="removeEntry(i)">
                        <mat-icon class="plus">remove</mat-icon>
                      </div>
                    </ng-template>
                  </div>
                </ng-container>
              </ng-container>
            </ng-container>
  
            <div class="primary_btn">
              <button type="button" class="btn btn-secondary" (click)="modal.dismiss('Cross click')">
                {{ "cancel" | translate }}
              </button>
              <button type="submit" class="btn btn-primary">
                {{ "add" | translate }}
              </button>
            </div>
          </form>
        </div>
      </div>
    </ng-template>
  </div>  

  <!-- Edit Test -->
<div class="edit_role">
  <ng-template #edittests let-modal>
    <div class="custome_modal">
      <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">
          {{ "edit_role" | translate }}
        </h4>
        <button
          type="button"
          class="btn-close"
          aria-label="Close"
          (click)="modal.dismiss('Cross click')"
        >
          <mat-icon>close</mat-icon>
        </button>
      </div>
      <div class="modal-body">
        <form [formGroup]="editmanualForm" (ngSubmit)="editTest()">
          <div class="modal_content category_service">
            <div class="row modal_content_inner">
              <div class="item">
                <div class="form_field_wrapper mb-3">
                  <label>{{"type_of_test" | translate}}<span class="danger">*</span> </label>
                  <mat-form-field appearance="fill">
                    <input type="text" formControlName="typeOfTest" placeholder="" matInput />
                  </mat-form-field>
                </div>
                <span
                class="text-danger"
                *ngIf="isSubmitted && g['typeOfTest'].errors?.['required']"
                >{{ "enter_type_of_test" | translate }}*</span>
              </div>
              <div class="item">
                <div class="form_field_wrapper mb-3">
                  <label>{{"name_of_test" | translate}}<span class="danger">*</span></label>
                  <mat-form-field appearance="fill">
                    <input type="text" formControlName="nameOfTest" placeholder="" matInput />
                  </mat-form-field>
                </div>
                <span
                class="text-danger"
                *ngIf="isSubmitted && g['nameOfTest'].errors?.['required']"
                >{{ "enter_name_of_test" | translate }}*</span>
              </div>
            </div>
          </div>
          <div class="primary_btn">
            <button
              type="button"
              class="btn btn-secondary"
              (click)="modal.dismiss('Cross click')"
            >
              {{ "cancel" | translate }}
            </button>
            <button type="submit" class="btn btn-primary">
              {{ "update_test" | translate }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </ng-template>
</div>