<div class="step_counter_inner edit_profile_block login_time">
  <div class="create_profile">
    <h1 *ngIf="!pageForAdd">{{ "edit_optical" | translate }}</h1>
    <div class="create_profile_inner">
      <!-- <div class="profile_img">
                  <img src="assets/img/create_profile.png">
              </div> -->
              <div class="user_image_upload">
                <input
                class="ng-hide user_upload_input"
                id="file-input"
                type="file"
                accept="image/*"
                (change)="onFileSelected($event, 'profile')"
              />
                <div class="user_upload_block">
                  <span class="user_upload_wrapper">
                    <span class="user_upload_icon">
                      <img
                      class="img-fluid"
                      src="{{
                        profileImage ? profileImage : 'assets/img/create_profile.png'
                      }}"
                    />
                      <span class="quick_view" *ngIf="profileImage ? true : false">
                        <mat-icon
                          class="closeicon"
                          (click)="removeSelectpic('profileImage')"
                          >close</mat-icon
                        >
                      </span>
                    </span>
                  </span>
      
                  <span class="edit_upload_wrapper">
                    <span class="edit_upload_icon"
                      ><img src="../../../assets/img/edit_profile.svg"
                    /></span>
                  </span>
                </div>
              </div>

      <!-- <div class="image-upload">
        <label for="file-input">
          <img
            class="img-fluid mb-4"
            src="{{
              profileImage ? profileImage : 'assets/img/create_profile.png'
            }}"
          />

          <i class="fa fa-camera" *ngIf="!profileImage"></i>
        </label>
        <span class="quick_view" *ngIf="profileImage ? true : false">
          <mat-icon class="closeicon" (click)="removeSelectpic('profileImage')"
            >close</mat-icon
          >
        </span>
        <input
          id="file-input"
          type="file"
          accept="image/*"
          (change)="onFileSelected($event, 'profile')"
        />
      </div> -->
      <!-- <span class="text-danger" *ngIf="profileImage === '' && isSubmitted"
          >Select Profile Picture.</span
        > -->
      <form [formGroup]="basicInfo">
        <div class="form">
          <div class="row">
            <div class="col-sm-6 col-md-4 mb-3">
              <div class="form_field_wrapper">
                <label
                  >{{ "first_name" | translate
                  }}<span class="danger">*</span></label
                >
                <mat-form-field appearance="fill">
                  <input type="text" matInput formControlName="first_name" />
                </mat-form-field>
                <span
                class="text-danger"
                *ngIf="isSubmitted && f['first_name'].errors?.['required']"
                >{{ "enter_first_name" | translate }}*</span
              >
              </div>
              
            </div>
            <div class="col-sm-6 col-md-4 mb-3">
              <div class="form_field_wrapper">
                <label>{{ "middle_name" | translate }}</label>
                <mat-form-field appearance="fill">
                  <input type="text" matInput formControlName="middle_name" />
                </mat-form-field>
                <span
                class="text-danger"
                *ngIf="isSubmitted && f['middle_name'].errors?.['required']"
                >{{ "enter_middle_name" | translate }}*</span
              >
              </div>
            </div>
            <div class="col-sm-6 col-md-4 mb-3">
              <div class="form_field_wrapper">
                <label
                  >{{ "last_name" | translate
                  }}<span class="danger">*</span></label
                >
                <mat-form-field appearance="fill">
                  <input type="text" matInput formControlName="last_name" />
                </mat-form-field>
                <span
                class="text-danger"
                *ngIf="isSubmitted && f['last_name'].errors?.['required']"
                >{{ "enter_last_name" | translate }}*</span
              >
              </div>
            </div>
            <div class="col-sm-6 col-md-8 mb-3">
              <div class="form_field_wrapper">
                <label
                  >{{ "address" | translate
                  }}<span class="danger">*</span></label
                >
                <mat-form-field appearance="fill">
                  <input
                    type="text"
                    matInput
                    placeholder="{{ 'enter_address' | translate }}"
                    formControlName="address"
                    #address
                  />
                </mat-form-field>
                <span
                class="text-danger"
                *ngIf="isSubmitted && f['address'].errors?.['required']"
                >{{ "enter_address" | translate }}*</span
              >
              </div>
            </div>
            <div class="col-sm-6 col-md-4 mb-3">
              <div class="form_field_wrapper">
                <label>{{ "neighborhood" | translate }}</label>
                <mat-form-field appearance="fill">
                  <input type="text" matInput formControlName="neighborhood" />
                </mat-form-field>
              </div>
              <span
                class="text-danger"
                *ngIf="isSubmitted && f['neighborhood'].errors?.['required']"
                >{{ "enter_neighbourhood" | translate }}*</span
              >
            </div>
            <div class="col-sm-6 col-md-4 mb-3">
              <div class="form_field_wrapper modal-body">
                <label
                  >{{ "country" | translate
                  }}<span class="danger">*</span></label
                >
                <select2
                  [overlay]="overlay"
                  [limitSelection]="0"
                  [minCountForSearch]="0"
                  (update)="getRegionList($event.value)"
                  [data]="countryList"
                  [(ngModel)]="patchCountry"
                  formControlName="nationality"
                >
                </select2>
                <span
                class="text-danger"
                *ngIf="isSubmitted && f['nationality'].errors?.['required']"
                >{{ "select_country" | translate }}*</span
              >
              </div>
            </div>
            <div class="col-sm-6 col-md-4 mb-3">
              <div class="form_field_wrapper">
                <label>{{ "region" | translate }}</label>
                <select2
                  [overlay]="overlay"
                  [limitSelection]="0"
                  [minCountForSearch]="0"
                  (update)="getProvienceList($event.value)"
                  [data]="regionList"
                  formControlName="region"
                >
                </select2>
              </div>
              <span
                class="text-danger"
                *ngIf="isSubmitted && f['region'].errors?.['required']"
                >{{ "select_region" | translate }}*</span
              >
            </div>
            <div class="col-sm-6 col-md-4 mb-3">
              <div class="form_field_wrapper">
                <label>{{ "province" | translate }}</label>
                <select2
                  [overlay]="overlay"
                  [limitSelection]="0"
                  [minCountForSearch]="0"
                  (update)="getDepartmentList($event.value)"
                  [data]="provienceList"
                  formControlName="province"
                >
                </select2>
              </div>
              <span
                class="text-danger"
                *ngIf="isSubmitted && f['province'].errors?.['required']"
                >{{ "select_province" | translate }}*</span
              >
            </div>
            <div class="col-sm-6 col-md-4 mb-3">
              <div class="form_field_wrapper">
                <label>{{ "department" | translate }}</label>
                <select2
                  [overlay]="overlay"
                  [limitSelection]="0"
                  [minCountForSearch]="0"
                  (update)="getCityList($event.value)"
                  [data]="departmentList"
                  formControlName="department"
                >
                </select2>
              </div>
              <span
                class="text-danger"
                *ngIf="isSubmitted && f['department'].errors?.['required']"
                >{{ "select_department" | translate }}*</span
              >
            </div>
            <div class="col-sm-6 col-md-4 mb-3">
              <div class="form_field_wrapper">
                <label>{{ "city" | translate }}</label>
                <select2
                  [overlay]="overlay"
                  [limitSelection]="0"
                  [minCountForSearch]="0"
                  (update)="getCityId($event)"
                  [data]="cityList"
                  formControlName="city"
                >
                </select2>
              </div>
              <span
                class="text-danger"
                *ngIf="isSubmitted && f['city'].errors?.['required']"
                >{{ "select_city" | translate }}*</span
              >
            </div>
            <div class="col-sm-6 col-md-4 mb-3">
              <div class="form_field_wrapper">
                <label>{{ "village" | translate }}</label>
                <select2
                  [overlay]="overlay"
                  [limitSelection]="0"
                  [minCountForSearch]="0"
                  (update)="getVillageId($event)"
                  [data]="villageList"
                  formControlName="village"
                >
                </select2>
              </div>
              <span
                class="text-danger"
                *ngIf="isSubmitted && f['village'].errors?.['required']"
                >{{ "select_village" | translate }}*</span
              >
            </div>
            <div class="col-sm-6 col-md-4 mb-3">
              <div class="form_field_wrapper">
                <label>{{ "pincode" | translate }}</label>
                <mat-form-field appearance="fill">
                  <input type="number" matInput formControlName="pincode" />
                </mat-form-field>
              </div>
              <span
                class="text-danger"
                *ngIf="isSubmitted && f['pincode'].errors?.['required']"
                >{{ "enter_pincode" | translate }}*</span
              >
            </div>
          </div>

          <div class="row">
            <div class="col-sm-6 col-md-4 mb-3">
              <div class="form_field_wrapper">
                <label
                  >{{ "phone_number" | translate
                  }}<span class="danger">*</span></label
                >
                <mat-form-field appearance="fill">
                  <input
                    type="mobile"
                    matInput
                    formControlName="mobile"
                    #mobile
                    (focus)="onFocus()"
                    ng2TelInput
                    placeholder="{{ 'enter_phone_number' | translate }}"
                  />
                </mat-form-field>
                <span
                class="text-danger"
                *ngIf="isSubmitted && f['mobile'].errors?.['required']"
                >{{ "enter_phone_number" | translate }}*</span
              >
              <span
                class="text-danger"
                *ngIf="f['mobile'].errors?.['pattern'] && f['mobile'].invalid"
              >
                {{ "only_numbers_are_allowed" | translate }}*
              </span>
              </div>
            </div>
            <div class="col-sm-6 col-md-4 mb-3">
              <div class="form_field_wrapper">
                <label
                  >{{ "date_of_birth" | translate
                  }}<span class="danger">*</span></label
                >
                <mat-form-field class="example-full-width" appearance="fill">
                  <input
                    matInput
                    [matDatepicker]="picker"
                    formControlName="dob"
                  />
                  <mat-datepicker-toggle
                    matSuffix
                    [for]="picker"
                  ></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
                <span
                class="text-danger"
                *ngIf="isSubmitted && f['dob'].errors?.['required']"
                >{{ "enter_date_of_birth" | translate }}*</span
              >
              </div>
            </div>
            <!-- <div class="col-sm-6 col-md-4 mb-3">
                <div class="form_field_wrapper">
                  <label>Date of Joined </label>
                  <mat-form-field class="example-full-width" appearance="fill">
                    <input
                      matInput
                      [matDatepickerFilter]="myFilter"
                      [matDatepicker]="picker1"
                      formControlName="date_of_join"
                    />
                    <mat-datepicker-toggle
                      matSuffix
                      [for]="picker1"
                    ></mat-datepicker-toggle>
                    <mat-datepicker #picker1></mat-datepicker>
                  </mat-form-field>
                </div>
                <span
                  class="text-danger"
                  *ngIf="isSubmitted && f['date_of_join'].errors?.['required']"
                  >Enter Date of Joined*</span
                >
              </div> -->
            <div class="col-sm-6 col-md-4 mb-3">
              <div class="form_field_wrapper">
                <label
                  >{{ "designation" | translate
                  }}<span class="danger">*</span></label
                >
                <!-- <mat-form-field appearance="fill">
                  <mat-select
                    disableRipple
                    formControlName="designation"
                    placeholder="{{ 'select_designation' | translate }}"
                  >
                    <mat-option
                      *ngFor="let data of deginationList"
                      [value]="data._id"
                      >{{ data?.designation }}</mat-option
                    >
                  </mat-select>
                </mat-form-field> -->
                <select2
                [overlay]="overlay"
                [limitSelection]="0"
                [minCountForSearch]="0"
                [data]="deginationList"
                formControlName="designation"
              >
              </select2>
                <span
                class="text-danger"
                *ngIf="isSubmitted && f['designation'].errors?.['required']"
                >{{ "select_designation" | translate }}*</span
              >
              </div>
            </div>
            <div class="col-sm-6 col-md-4 mb-3">
              <div class="form_field_wrapper">
                <label
                  >{{ "title" | translate }}<span class="danger">*</span></label
                >
                <!-- <mat-form-field appearance="fill">
                  <mat-select
                    disableRipple
                    formControlName="title"
                    placeholder="{{ 'select_title' | translate }}"
                  >
                    <mat-option
                      *ngFor="let title of titleList"
                      [value]="title._id"
                      >{{ title?.title }}</mat-option
                    >
                  </mat-select>
                </mat-form-field> -->
                <select2
                [placeholder] ="'Select Title'"
                [overlay]="overlay"
                [limitSelection]="0"
                [minCountForSearch]="1"
                [data]="titleList"
                formControlName="title"
              >
              </select2>
                <span
                class="text-danger"
                *ngIf="isSubmitted && f['title'].errors?.['required']"
                >{{ "select_title" | translate }}*</span
              >
              </div>
            </div>
            <div class="col-sm-6 col-md-4 mb-3">
              <div class="form_field_wrapper">
                <label
                  >{{ "years_of_experience" | translate
                  }}<span class="danger">*</span></label
                >
                <mat-form-field appearance="fill">
                  <input type="number" matInput formControlName="experience" />
                </mat-form-field>
                <span
                class="text-danger"
                *ngIf="isSubmitted && f['experience'].errors?.['required']"
                >{{ "enter_years_of_experience" | translate }}*</span
              >
              </div>
            </div>
            <!-- <div class="col-sm-6 col-md-4 mb-3">
                <div class="form_field_wrapper">
                  <label>Assign Doctor</label>
                  <select2
                    [overlay]="overlay"
                    [limitSelection]="0"
                    [minCountForSearch]="0"
                    (update)="getassignDoctorId($event)"
                    [data]="doctorList"     
                    value="assignDoctor"             
                    formControlName="assignDoctor"
                    
                  >
                  </select2>
                </div>
                <span
                  class="text-danger"
                  *ngIf="isSubmitted && f['assignDoctor'].errors?.['required']"
                  >{{ 'required' | translate }}*</span
                >
              </div> -->
            <div class="col-sm-6 col-md-4 mb-3">
              <div class="form_field_wrapper speciality-select-block">
                <label>{{ "assign_staff" | translate }}</label>
                <!-- <mat-form-field class="inner_label" appearance="fill">
                  <mat-label>{{ "select_staff" | translate }}</mat-label>
                  <mat-select formControlName="assignStaff" multiple>
                    <mat-option
                      *ngFor="let staff of staffList"
                      [value]="staff.value"
                      >{{ staff.label }}
                    </mat-option>
                  </mat-select>
                </mat-form-field> -->
                <select2
                class="test"
                [overlay]="overlay"
                multiple="multiple"
                [limitSelection]="0"
                [minCountForSearch]="0"                   
                [data]="staffList"
                formControlName="assignStaff"
                [(ngModel)]="selectedStaff"
                (update)="onstaffChange($event)"
              >
              </select2>
              </div>
              <span
                class="text-danger"
                *ngIf="isSubmitted && f['assignStaff'].errors?.['required']"
                >{{ "required" | translate }}*</span
              >
            </div>
            <div class="col-sm-6 col-md-4 mb-3">
              <div class="form_field_wrapper">
                <label
                  >{{ "email" | translate }}<span class="danger">*</span></label
                >
                <mat-form-field appearance="fill">
                  <input type="email" matInput formControlName="email" />
                </mat-form-field>
                <!-- <span class="text-danger" *ngIf="f['email'].errors['pattern']">
                    Please, Enter valid email.
                  </span> -->
                  <span
                class="text-danger"
                *ngIf="isSubmitted && f['email'].errors?.['required']"
                >{{ "enter_email" | translate }}*</span
              >

              <span
                class="text-danger"
                *ngIf="f['email'].errors?.['pattern'] && f['email'].invalid"
              >
                {{ "please_enter_valid_email" | translate }}.
              </span>
              </div>
              
            </div>
            <div class="col-sm-6 col-md-4 mb-3">
              <div class="form_field_wrapper">
                <label>{{"Gender" | translate}}<span class="danger">*</span></label>
                <mat-form-field appearance="fill">
                  <!-- <mat-label>Sub-admin</mat-label> -->
                  <mat-select disableRipple formControlName="gender">
                    <mat-option value="Male">{{
                      "male" | translate
                    }}</mat-option>
                    <mat-option value="Female">{{
                      "female" | translate
                    }}</mat-option>
                  </mat-select>
                </mat-form-field>
                <span
                class="text-danger"
                *ngIf="isSubmitted && f['gender'].errors?.['required']"
                >{{ "select_gender" | translate }}*</span
              >
              </div>
            </div>
            <div class="col-sm-6 col-md-4 mb-3">
              <div class="form_field_wrapper speciality-select-block">
                <label
                  >{{ "language" | translate
                  }}</label
                >
                <select2
                  class="test"
                  [overlay]="overlay"
                  multiple="multiple"
                  [limitSelection]="0"
                  [minCountForSearch]="0"                   
                  [data]="spokenLanguages"
                  [(ngModel)]="selectedLanguages"
                  formControlName="language"
                  (update)="onSelectionChange($event)"
                >
                </select2>

                <!-- <mat-form-field appearance="fill">
                  <mat-select
                    placeholder="{{ 'select_language' | translate }}"
                    formControlName="language"
                    multiple
                    (selectionChange)="onSelectionChange($event)"
                  >
                    <mat-option
                      *ngFor="let language of spokenLanguages"
                      [value]="language.value"
                    >
                      {{ language.label }}
                    </mat-option>
                  </mat-select>
                </mat-form-field> -->
              </div>
              <span
                class="text-danger"
                *ngIf="isSubmitted && f['language'].errors?.['required']"
                >{{ "select_language" | translate }}*</span
              >
            </div>
            <!-- <div class="col-sm-6 col-md-4 mb-3">
                <div class="form_field_wrapper">
                  <label>User Name</label>
                  <mat-form-field appearance="fill">
                    <input type="text" matInput formControlName="userName" />
                  </mat-form-field>
                </div>
                <span
                  class="text-danger"
                  *ngIf="isSubmitted && f['userName'].errors?.['required']"
                  >Enter User Name*</span
                >
              </div> -->
            <div class="col-sm-6 col-md-4 mb-3" *ngIf="pageForAdd">
              <div class="form_field_wrapper">
                <label
                  >{{ "password" | translate
                  }}<span class="danger">*</span></label
                >
                <mat-form-field appearance="fill" class="password-input-block">
                  <input type="password" matInput formControlName="password" [type]="hide1 ? 'password' : 'text'" />
                  <a class="password-view" (click)="hide1 = !hide1">
                    <mat-icon>{{
                      hide1 ? "visibility_off" : "visibility"
                    }}</mat-icon>
                  </a>
                </mat-form-field>
                <span
                class="text-danger"
                *ngIf="isSubmitted && f['password'].errors?.['required']"
              >
                {{ "enter_password" | translate }}
              </span>
              <span
                class="text-danger"
                *ngIf=" f['password'].errors?.['minlength']"
              >
                {{ "must_be_atleast_8_char" | translate }}
              </span>
              <span
                class="text-danger"
                *ngIf="f['password'].errors?.['hasNumber']"
              >
                {{ "must_contain_at_least_1_number" | translate }}
              </span>
              <span
                class="text-danger"
                *ngIf="f['password'].errors?.['hasCapitalCase']"
              >
                {{ "must_contain_atleast_1_capcase" | translate }}
              </span>
              <span
                class="text-danger"
                *ngIf="f['password'].errors?.['hasSmallCase']"
              >
                {{ "must_contain_atleast_1_smallcase" | translate }}
              </span>
              <span
                class="text-danger"
                *ngIf="f['password'].errors?.['hasSpecialCharacters']"
              >
                {{ "must_contain_at_least_1_number" | translate }}
              </span>
              </div>
            </div>
            <div class="col-sm-6 col-md-4 mb-3" *ngIf="pageForAdd">
              <div class="form_field_wrapper">
                <label
                  >{{ "confirm_password" | translate
                  }}<span class="danger">*</span></label
                >
                <mat-form-field appearance="fill" class="password-input-block">
                  <input
                    type="password"
                    matInput
                    formControlName="confirm_password"
                    [type]="hide2 ? 'password' : 'text'" />
                    <a class="password-view" (click)="hide2 = !hide2">
                      <mat-icon>{{
                        hide2 ? "visibility_off" : "visibility"
                      }}</mat-icon>
                    </a>
                </mat-form-field>
                <span
                class="text-danger"
                *ngIf="isSubmitted && f['confirm_password'].errors?.['required']"
                >{{ "confirm_password" | translate }}*</span
              >

              <span
                class="text-danger"
                *ngIf="isSubmitted && f['confirm_password'].errors?.['matching']"
              >
                {{ "confim_password_does_not_match" | translate }}
              </span>
              </div>
            </div>
            <div class="col-sm-6 col-md-4 mb-3">
              <div class="form_field_wrapper checkbox_urgecare">
                <label class="invisible">{{
                  "urgent_care_services" | translate
                }}</label>
                <mat-checkbox
                  class="example-margin"
                  formControlName="urgent_care_service"
                  >{{
                    "opt_for_urgent_care_services" | translate
                  }}</mat-checkbox
                >
              </div>
            </div>
            <!-- <span
                class="text-danger"
                *ngIf="isSubmitted && f['urgent_care_service'].errors?.['required']"
                >{{ 'required' | translate }}*</span
              > -->
          </div>
          <div class="about_doctor divider">
            <h2>{{ "about_optical" | translate }}</h2>
            <div class="row">
              <div class="col-sm-12 col-md-12 mb-3">
                <div class="form_field_wrapper ">
                  <mat-form-field appearance="fill">
                    <input type="text" matInput formControlName="aboutDoctor" />
                  </mat-form-field>
                </div>
                <span
                  class="text-danger"
                  *ngIf="isSubmitted && f['aboutDoctor'].errors?.['required']"
                  >{{ "required" | translate }}*</span
                >
              </div>
            </div>
          </div>
          <div
            class="about_doctor divider"
            formGroupName="appointment_accepted"
          >
            <h2>{{ "appointment_accepted" | translate }}</h2>
            <div class="row">
              <div class="col-sm-12 col-md-12">
                <div class="form_field_wrapper">
                  <div class="checkbox-group mb-4">
                    <mat-checkbox
                      class="example-margin me-3"
                      formControlName="online"
                      >{{ "online_consulation" | translate }}</mat-checkbox
                    >

                    <mat-checkbox
                      class="example-margin me-3"
                      formControlName="homevisit"
                      >{{ "home_visit" | translate }}</mat-checkbox
                    >

                    <mat-checkbox
                      class="example-margin me-3"
                      formControlName="hospitalvisit"
                      >{{ "opticals_visit" | translate }}</mat-checkbox
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="about_doctor divider" formGroupName="medicine_request">
            <h2>{{ "optical_request_accepted" | translate }}</h2>
            <div class="row">
              <div class="col-sm-12 col-md-12">
                <div class="form_field_wrapper">
                  <div class="checkbox-group mb-4">
                    <mat-checkbox
                      class="example-margin me-3"
                      formControlName="prescription_order"
                      >{{ "optical_order_accepted" | translate }}</mat-checkbox
                    >

                    <mat-checkbox
                      class="example-margin me-3"
                      formControlName="homevmedicine_price_requestsit"
                      >{{ "optical_price_request" | translate }}</mat-checkbox
                    >

                    <mat-checkbox
                      class="example-margin me-3"
                      formControlName="request_medicine_available"
                      >{{
                        "request_optical_availability" | translate
                      }}</mat-checkbox
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="license divider" formGroupName="license_details">
            <h2>{{ "license" | translate }}</h2>
            <div class="row">
              <div class="col-sm-12 col-md-4 mb-3 col-lg-4 col-xl-4">
                <div class="form_field_wrapper">
                  <label
                    >{{ "license_number" | translate
                    }}<span class="danger">*</span></label
                  >
                  <mat-form-field appearance="fill">
                    <input
                      type="number"
                      matInput
                      formControlName="license_number"
                    />
                  </mat-form-field>
                  <span
                  class="text-danger"
                  *ngIf="isSubmitted && f['license_details'].get('license_number').errors?.['required']"
                  >{{ "enter_license_number" | translate }}*</span
                >
                </div>
              </div>
              <div class="col-sm-12 col-md-8 col-lg-8 col-xl-5 mb-3">
                <div class="form_field_wrapper">
                  <label
                    >{{ "expiry_date" | translate
                    }}<span class="danger">*</span></label
                  >
                  <div class="license_date">
                    <mat-form-field
                      class="example-full-width"
                      appearance="fill"
                    >
                      <input
                        matInput
                        placeholder="{{ 'expiry_date' | translate }}"
                        [matDatepicker]="picker3"
                        formControlName="license_expiry_date"
                      />
                      <mat-datepicker-toggle
                        matSuffix
                        [for]="picker3"
                      ></mat-datepicker-toggle>
                      <mat-datepicker #picker3></mat-datepicker>
                    </mat-form-field>
                    <!-- <mat-form-field
                        class="example-full-width"
                        appearance="fill"
                      >
                        <input
                          matInput
                          [matDatepickerFilter]="myFilter"
                          placeholder="To"
                          [matDatepicker]="picker4"
                          formControlName="to"
                        />
                        <mat-datepicker-toggle
                          matSuffix
                          [for]="picker4"
                        ></mat-datepicker-toggle>
                        <mat-datepicker #picker4></mat-datepicker>
                      </mat-form-field> -->
                  </div>
                  <span
                    class="text-danger"
                    *ngIf="isSubmitted && f['license_details'].get('license_expiry_date').errors?.['required']"
                    >{{ "enter_license_expiry_date" | translate }}*</span
                  >
                </div>
              </div>
              <div class="col-12">
                <div class="form_field_wrapper">
                  <div class="row form-field-insurance">
                    <div class="upload_item col-sm-6 col-md-6 mb-4">
                      <div class="upload_output" *ngIf="license_picture_">
                        <div class="upload_input_content">
                          <img src="{{ license_picture_ }}" />
                          <button class="btn btn-transparent closing-icon" (click)="removeSelectpic('license_picture_')">
                            <mat-icon class="close icon">close</mat-icon>
                          </button>
                        </div>
                      </div>
                    </div>
                    <div class="upload_item col-sm-6 col-md-6">
                      <div class="upload_input">
                        <div class="upload_input_content">
                          <img src="assets/img/add_box.svg" />
                          <label
                          class="upload_text"
                          (click)="licenceUpload.click()"
                          >{{"upload_cart_picture" | translate}}</label>
                        </div>
                        <input
                          type="file"
                          accept="image/*"
                          hidden
                          (change)="onFileSelected($event, 'license')"
                          #licenceUpload />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- <div class="col-sm-12 col-md-12 col-lg-12 col-xl-3 upload_item mb-3">
                <div class="form_field_wrapper">
                  <span class="quick_view" *ngIf="license_picture_">
                    <mat-icon
                      class="closeicon"
                      (click)="removeSelectpic('license_picture_')"
                      >close</mat-icon
                    >
                  </span>
                  <img
                    id="preview-image"
                    src="{{ license_picture_ }}"
                    style="width: 150px"
                    *ngIf="licenseFile"
                  />
                  <div class="upload_input">
                    <div class="upload_input_content">
                      <label>{{ "upload_cart_picture" | translate }}</label>
                    </div>
                    <input
                      class="ng-hide user_upload_input"
                      id="input-file-id"
                      type="file"
                      accept="image/*"
                      (change)="onFileSelected($event, 'license')"
                    />
                  </div>
                </div>
                <span class="text-danger" *ngIf="!licenseFile && isSubmitted"
                    >Upload {{ 'license' | translate }} Dcoument.</span
                  >
              </div> -->
            </div>
          </div>

          <div class="divider">
            <div class="row">
              <div class="col-sm-6 col-md-4 mb-3">
                <div class="form_field_wrapper">
                  <label
                    >{{ "team" | translate
                    }}</label
                  >
                  <!-- <mat-form-field appearance="fill">
                    <mat-select
                      disableRipple
                      formControlName="team"
                      placeholder="{{ 'select_team' | translate }}"
                    >
                      <mat-option
                        *ngFor="let team of team_List"
                        [value]="team?._id"
                        >{{ team?.team }}</mat-option
                      >
                    </mat-select>
                  </mat-form-field> -->
                  <select2
                  [overlay]="overlay"
                  [limitSelection]="0"
                  [minCountForSearch]="0"
                  [data]="team_List"
                  formControlName="team"
                >
                </select2>
                </div>
                <span
                  class="text-danger"
                  *ngIf="isSubmitted && f['team'].errors?.['required']"
                  >{{ "required" | translate }}*</span
                >
              </div>

              <div class="col-sm-6 col-md-4 mb-3">
                <div class="form_field_wrapper speciality-select-block">
                  <label
                    >{{ "speciality" | translate
                    }}<span class="danger">*</span></label
                  >
                  <select2
                  class="test"
                  [overlay]="overlay"
                  multiple="multiple"
                  [limitSelection]="0"
                  [minCountForSearch]="0"                   
                  [data]="specialityListt"
                  formControlName="speciality"
                  (update)="onSpecialityChange($event)"
                >
              </select2>
              <span
              class="text-danger"
              *ngIf="isSubmitted && f['speciality'].errors?.['required']"
              >{{ "required" | translate }}*</span
            >
                </div>
              </div>

              <!-- <div class="col-sm-6 col-md-4 mb-3">
                  <div class="form_field_wrapper">
                    <label>Expertise</label>
                    <mat-form-field appearance="fill">
                      <mat-select [formControl]="experties" multiple>
                        <mat-select-trigger>
                          {{experties.value?.[0] || ''}}
  
                          <span
                            *ngIf="(experties.value?.length || 0) > 1"
                            class="example-additional-selection"
                          >
                            (+{{ (experties.value?.length || 0) - 1 }}
                            {{
                              experties.value?.length === 2 ? "other" : "others"
                            }})
                          </span>
                        </mat-select-trigger>
                        <mat-option
                          *ngFor="let topping of expertiesList"
                          [value]="topping"
                          >{{ topping }}</mat-option
                        >
                      </mat-select>
                    </mat-form-field>
                  </div>
                </div> -->

              <div class="col-sm-6 col-md-4 mb-3">
                <div class="form_field_wrapper">
                  <label
                    >{{ "experties" | translate
                    }}</label
                  >
                  <select2
                    [overlay]="overlay"
                    [limitSelection]="0"
                    [minCountForSearch]="0"
                    (update)="getExpertiesId($event)"
                    [data]="expertiesListt"
                    formControlName="expertise"
                  >
                  </select2>
                  <!-- <mat-form-field appearance="fill">
                      <mat-select
                        disableRipple
                        formControlName="expertise"
                        placeholder="Select Experties"
                      >
                        <mat-option
                          *ngFor="let expertise of expertiesListt"
                          [value]="expertise?._id"
                          >{{ expertise?.expertise }}</mat-option
                        >
                      </mat-select>
                    </mat-form-field> -->
                </div>
                <span
                  class="text-danger"
                  *ngIf="isSubmitted && f['expertise'].errors?.['required']"
                  >{{ "required" | translate }}*</span
                >
              </div>

              <!-- <div class="col-sm-6 col-md-4 mb-3">
                  <div class="form_field_wrapper">
                    <label>{{ 'department' | translate }}</label>
                    <mat-form-field appearance="fill">
                      <mat-select [formControl]="departments" multiple>
                        <mat-select-trigger>
                          {{departments.value?.[0] || ''}}
  
                          <span
                            *ngIf="(departments.value?.length || 0) > 1"
                            class="example-additional-selection"
                          >
                            (+{{ (departments.value?.length || 0) - 1 }}
                            {{
                              departments.value?.length === 2
                                ? "other"
                                : "others"
                            }})
                          </span>
                        </mat-select-trigger>
                        <mat-option
                          *ngFor="let topping of departmentsList"
                          [value]="topping"
                          >{{ topping }}</mat-option
                        >
                      </mat-select>
                    </mat-form-field>
                  </div>
                </div> -->
              <div class="col-sm-6 col-md-4 mb-3">
                <div class="form_field_wrapper">
                  <label
                    >{{ "department" | translate
                    }}</label
                  >
                  <select2
                    [overlay]="overlay"
                    [limitSelection]="0"
                    [minCountForSearch]="0"
                    (update)="getServices($event.value)"
                    [data]="departmentListt"
                    formControlName="departmentt"
                  >
                  </select2>
                </div>
                <span
                  class="text-danger"
                  *ngIf="isSubmitted && f['departmentt'].errors?.['required']"
                  >{{ "required" | translate }}*</span
                >
              </div>
              <!-- 
                <div class="col-sm-6 col-md-4 mb-3">
                  <div class="form_field_wrapper">
                    <label>{{ 'service' | translate }}</label>
                    <mat-form-field appearance="fill">
                      <mat-select [formControl]="services" multiple>
                        <mat-select-trigger>
                          {{services.value?.[0] || ''}}
  
                          <span
                            *ngIf="(services.value?.length || 0) > 1"
                            class="example-additional-selection"
                          >
                            (+{{ (services.value?.length || 0) - 1 }}
                            {{
                              services.value?.length === 2 ? "other" : "others"
                            }})
                          </span>
                        </mat-select-trigger>
                        <mat-option
                          *ngFor="let topping of serviceList"
                          [value]="topping"
                          >{{ topping }}</mat-option
                        >
                      </mat-select>
                    </mat-form-field>
                  </div>
                </div> -->

              <div class="col-sm-6 col-md-4 mb-3">
                <div class="form_field_wrapper">
                  <label
                    >{{ "service" | translate
                    }}</label
                  >
                  <select2
                    [overlay]="overlay"
                    [limitSelection]="0"
                    [minCountForSearch]="0"
                    (update)="getUnits($event.value)"
                    [data]="servicesListt"
                    formControlName="service"
                  >
                  </select2>
                </div>
                <span
                  class="text-danger"
                  *ngIf="isSubmitted && f['service'].errors?.['required']"
                  >{{ "required" | translate }}*</span
                >
              </div>

              <!-- <div class="col-sm-6 col-md-4 mb-3">
                  <div class="form_field_wrapper">
                    <label>{{ 'unit' | translate }}</label>
                    <mat-form-field appearance="fill">
                      <mat-select [formControl]="units" multiple>
                        <mat-select-trigger>
                          {{units.value?.[0] || ''}}
  
                          <span
                            *ngIf="(units.value?.length || 0) > 1"
                            class="example-additional-selection"
                          >
                            (+{{ (units.value?.length || 0) - 1 }}
                            {{ units.value?.length === 2 ? "other" : "others" }})
                          </span>
                        </mat-select-trigger>
                        <mat-option
                          *ngFor="let topping of unitList"
                          [value]="topping"
                          >{{ topping }}</mat-option
                        >
                      </mat-select>
                    </mat-form-field>
                  </div>
                </div> -->
              <div class="col-sm-6 col-md-4 mb-3">
                <div class="form_field_wrapper">
                  <label
                    >{{ "unit" | translate
                    }}</label
                  >
                  <select2
                    [overlay]="overlay"
                    [limitSelection]="0"
                    [minCountForSearch]="0"
                    (update)="handleSelectUnit($event.value)"
                    [data]="unitListt"
                    formControlName="unit"
                  >
                  </select2>
                </div>
                <span
                  class="text-danger"
                  *ngIf="isSubmitted && f['unit'].errors?.['required']"
                  >{{ "required" | translate }}*</span
                >
              </div>
            </div>

            <!--  New Lab Tests -->
            <div class="row divider">
              <div class="p-3">
                <div class="d-flex justify-content-end align-items-center">
                  <button
                  type="button"
                  class="btn btn-primary ms-0 me-2 mb-2"
                  (click)="openVerticallyCenteredaddmanually(addmanualcontent)"
                >{{ "add" | translate }}</button>
                  <button
                    type="button"
                    class="btn btn-primary ms-0 me-2 mb-2"
                    (click)="openImportTestPopup(importTests)"
                  >
                    <a class="btn_svg"
                      ><svg
                        width="17"
                        height="15"
                        viewBox="0 0 19 17"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          fill-rule="evenodd"
                          clip-rule="evenodd"
                          d="M2.70702 0.0104581C2.35458 0.068045 2.14937 0.132128 1.86268 0.274083C1.40132 0.502557 0.97754 0.942847 0.758933 1.42088C0.482758 2.0248 0.50022 1.57399 0.50022 8.09617C0.50022 12.9014 0.509776 14.035 0.55184 14.2135C0.717983 14.9191 1.21541 15.5686 1.8243 15.875C2.38912 16.1593 2.18433 16.1464 6.14194 16.1464H9.71119L9.88221 16.0467C9.97624 15.9919 10.1037 15.8725 10.1653 15.7812C10.2688 15.6282 10.2815 15.5697 10.329 15.0238C10.4356 13.8003 10.7776 12.9004 11.4602 12.0464C12.1823 11.1432 13.1294 10.555 14.2693 10.3017C14.6271 10.2222 14.8098 10.2123 16.3188 10.1915L17.9755 10.1685L18.1418 10.0472C18.2333 9.98044 18.3513 9.84594 18.4041 9.7483L18.5 9.57071L18.4998 7.11979L18.4997 4.66886L18.3953 4.35004C18.1169 3.49978 17.5074 2.88881 16.677 2.62765C16.49 2.56883 16.1025 2.55875 13.2776 2.53906L10.0893 2.51682L9.93295 2.40938C9.82035 2.33195 9.65551 2.11499 9.34318 1.63305C9.10481 1.26517 8.83965 0.884663 8.75398 0.787502C8.53058 0.53412 8.0822 0.243117 7.72051 0.116785L7.40845 0.00778804L5.10571 0.00129208C3.8392 -0.00229465 2.75979 0.00184999 2.70702 0.0104581ZM14.0838 11.9775C13.9867 12.0233 13.5948 12.3851 13.0476 12.9344C12.0537 13.9318 11.9386 14.0915 11.9652 14.4363C11.9738 14.5479 12.0142 14.7048 12.055 14.785C12.172 15.0153 13.9025 16.8423 14.0853 16.9286C14.3751 17.0652 14.7298 17.0019 14.9629 16.7719C15.1698 16.5679 15.1979 16.4686 15.2186 15.8674L15.2378 15.3095L16.6066 15.2895L17.9754 15.2696L18.1418 15.1483C18.5595 14.8436 18.6203 14.2555 18.2748 13.861C18.0801 13.6388 18.0697 13.6372 16.6002 13.6157L15.2378 13.5958L15.2186 13.0379C15.1979 12.4367 15.1698 12.3374 14.9629 12.1334C14.7293 11.9029 14.3751 11.8401 14.0838 11.9775Z"
                        /></svg></a
                    >{{ "import" | translate }}
                  </button>
                </div>

                <div class="table-wrap-block">
                  <table class="table" *ngIf="allTestsList.length !== 0">
                    <thead>
                      <tr>
                        <th scope="col">{{ "type_of_test" | translate }}</th>
                        <th scope="col">{{ "name_of_test" | translate }}</th>
                        <th scope="col">{{ "action" | translate }}</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let test of allTestsList; index as i">
                        <td>
                          <div>{{ test.typeOfTest }}</div>
                        </td>
                        <td>
                          <div>{{ test.nameOfTest }}</div>
                        </td>
                        <td>
                          <div>
                            <mat-icon
                            (click)="editVerticallyCenteredtest(edittests, test)"
                            >edit</mat-icon>
                            <mat-icon
                              (click)="openDelTestPopup(deleteTestPopup, test, i)"
                              >delete</mat-icon
                            >
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="row" *ngIf="allTestsList.length === 0">
                  <div class="col-4">
                    <th scope="col">{{ "type_of_test" | translate }}</th>
                  </div>
                  <div class="col-4">
                    <th scope="col">{{ "name_of_test" | translate }}</th>
                  </div>
                  <div class="col-4">
                    <th scope="col">{{ "action" | translate }}</th>
                  </div>
                  <div class="mt-30">
                    <h3>{{ "please_add_or_import_the_tests" | translate }}</h3>
                  </div>
                </div>
              </div>
            </div>
            <!--------------------Medical Test Performed------------------>
            <!-- <div class="row">
                <ng-container formArrayName="medicalActPerformed">
                  <ng-container
                    *ngFor="let _ of medicalActPerformed.controls; let i = index"
                  >
                    <ng-container [formGroupName]="i">
                      <div class="col-sm-6 col-md-6 col-xl-4 incre_decre">
                        <div class="form_field_wrapper">
                          <label>Medical act performed</label>
                          <div class="fieldicon_wrap">
                            <mat-form-field appearance="fill">
                              <input type="text" matInput formControlName="act" />
                            </mat-form-field>
                            <ng-container *ngIf="i === medicalActPerformed.length - 1; else remove">
                              <mat-icon
                              class="minus"
                              *ngIf="medicalActPerformed.length>1"
                              (click)="removeMedAct(i)"
                              >remove</mat-icon
                            >
                            <mat-icon
                              class="plus"
                              (click)="addNewMedAct()"
                              >add</mat-icon
                            >
                            </ng-container>
                            <ng-template #remove>
                              <mat-icon
                              class="minus"
                              (click)="removeMedAct(i)"
                              >remove</mat-icon
                            >
                            </ng-template>
                           
                          </div>
                          <span
                            class="text-danger"
                            *ngIf="isSubmitted && f1Validation(i).controls['act'].errors?.['required'] "
                            >{{ 'required' | translate }}*</span
                          >
                        </div>
                      </div>
                    </ng-container>
                  </ng-container>
                </ng-container>
              </div> -->
            <!--------------------Lab Test Performed------------------>
            <!-- <div class="row">
                <ng-container formArrayName="labTestPerformed">
                  <ng-container
                    *ngFor="let _ of labTestPerformed.controls; let i = index"
                  >
                    <ng-container [formGroupName]="i">
                      <div class="col-sm-6 col-md-6 col-xl-4 incre_decre">
                        <div class="form_field_wrapper">
                          <label>Lab test performed</label>
                          <div class="fieldicon_wrap">
                            <mat-form-field appearance="fill">
                              <input
                                type="text"
                                matInput
                                formControlName="test"
                              />
                            </mat-form-field>
                            <ng-container *ngIf="i === labTestPerformed.length - 1; else remove">
                              <mat-icon
                              class="minus"
                              *ngIf="labTestPerformed.length>1"
                              (click)="removeLabTest(i)"
                              >remove</mat-icon
                            >
                            <mat-icon
                            class="plus"
                            (click)="addNewLabTest()"
                            >add</mat-icon
                          >
                            </ng-container>
                            <ng-template #remove>
                              <mat-icon
                              class="minus"
                              (click)="removeLabTest(i)"
                              >remove</mat-icon
                            >
                            </ng-template>
                            
                          </div>
                          <span
                            class="text-danger"
                            *ngIf="isSubmitted && f2Validation(i).controls['test'].errors?.['required'] "
                            >{{ 'required' | translate }}*</span
                          >
                        </div>
                      </div>
                    </ng-container>
                  </ng-container>
                </ng-container>
              </div> -->
            <!--------------------Imaging Performed------------------>
            <!-- <div class="row">
                <ng-container formArrayName="imagingPerformed">
                  <ng-container
                    *ngFor="let _ of imagingPerformed.controls; let i = index"
                  >
                    <ng-container [formGroupName]="i">
                      <div class="col-sm-6 col-md-6 col-xl-4 incre_decre">
                        <div class="form_field_wrapper">
                          <label>Imaging performed</label>
                          <div class="fieldicon_wrap">
                            <mat-form-field appearance="fill">
                              <input type="text" matInput formControlName="img" />
                            </mat-form-field>
                            <ng-container *ngIf="i === imagingPerformed.length - 1; else remove">
                              <mat-icon
                              class="minus"
                              *ngIf="imagingPerformed.length >1"
                              (click)="removeImg(i)"
                              >remove</mat-icon
                            >
                            <mat-icon
                            class="plus"
                            (click)="addNewImg()"
                            >add</mat-icon
                          >
                            </ng-container>
                            <ng-template #remove>
                              <mat-icon
                              class="minus"
                              (click)="removeImg(i)"
                              >remove</mat-icon
                            >
                            </ng-template>
                          </div>
                          <span
                            class="text-danger"
                            *ngIf="isSubmitted && f3Validation(i).controls['img'].errors?.['required'] "
                            >{{ 'required' | translate }}*</span
                          >
                        </div>
                      </div>
                    </ng-container>
                  </ng-container>
                </ng-container>
              </div> -->
            <!--------------------Vaccination Performed------------------>
            <!-- <div class="row">
                <ng-container formArrayName="vaccinationPerformed">
                  <ng-container
                    *ngFor="let _ of vaccinationPerformed.controls; let i = index"
                  >
                    <ng-container [formGroupName]="i">
                      <div class="col-sm-6 col-md-6 col-xl-4 incre_decre">
                        <div class="form_field_wrapper">
                          <label>Vaccination performed</label>
                          <div class="fieldicon_wrap">
                            <mat-form-field appearance="fill">
                              <input type="text" matInput formControlName="vac" />
                            </mat-form-field>
                            <ng-container *ngIf="i === vaccinationPerformed.length - 1; else remove">
                              <mat-icon
                              class="minus"
                              *ngIf="vaccinationPerformed.length>1"
                              (click)="removeVac(i)"
                              >remove</mat-icon
                            >
                            <mat-icon
                            class="plus"
                            (click)="addNewVac()"
                            >add</mat-icon
                          >
                            </ng-container>
                            <ng-template #remove>
                              <mat-icon
                              class="minus"
                              (click)="removeVac(i)"
                              >remove</mat-icon
                            >
                            </ng-template>
                           
                          </div>
                          <span
                            class="text-danger"
                            *ngIf="isSubmitted && f4Validation(i).controls['vac'].errors?.['required'] "
                            >{{ 'required' | translate }}*</span
                          >
                        </div>
                      </div>
                    </ng-container>
                  </ng-container>
                </ng-container>
              </div> -->

            <!--------------------Other Test Performed------------------>
            <!-- <div class="row">
                <ng-container formArrayName="otherTest">
                  <ng-container
                    *ngFor="let _ of otherTest.controls; let i = index"
                  >
                    <ng-container [formGroupName]="i">
                      <div class="col-sm-6 col-md-6 col-xl-4 incre_decre">
                        <div class="form_field_wrapper">
                          <label>Other Test</label>
                          <div class="fieldicon_wrap">
                            <mat-form-field appearance="fill">
                              <input
                                type="text"
                                matInput
                                formControlName="other"
                              />
                            </mat-form-field>
                            <ng-container *ngIf="i === otherTest.length - 1; else remove">
                              <mat-icon
                              class="minus"
                              *ngIf="otherTest.length>1"
                              (click)="removeOtherTeest(i)"
                              >remove</mat-icon
                            >
                            <mat-icon
                            class="plus"
                            (click)="addOtherTest()"
                            >add</mat-icon
                            >
                            </ng-container>
                            <ng-template #remove>
                              <mat-icon
                              class="minus"
                              (click)="removeOtherTeest(i)"
                              >remove</mat-icon
                            >
                            </ng-template>
                          
                          </div>
                          <span
                            class="text-danger"
                            *ngIf="isSubmitted && f5Validation(i).controls['other'].errors?.['required'] "
                            >{{ 'required' | translate }}*</span
                          >
                        </div>
                      </div>
                    </ng-container>
                  </ng-container>
                </ng-container>
              </div> -->
          </div>

          <div class="bank_details divider" formGroupName="bank_details">
            <h2>{{ "bank_details" | translate }}</h2>
            <div class="row">
              <div class="col-sm-6 col-md-4 mb-3">
                <div class="form_field_wrapper">
                  <label>{{ "bank_name" | translate }}</label>
                  <mat-form-field appearance="fill">
                    <input type="text" matInput formControlName="bank_name" />
                  </mat-form-field>
                </div>
                <span
                  class="text-danger"
                  *ngIf="isSubmitted && f['bank_details'].get('bank_name').errors?.['required']"
                  >{{ "enter_bank_name" | translate }}*</span
                >
              </div>
              <div class="col-sm-6 col-md-4 mb-3">
                <div class="form_field_wrapper">
                  <label>{{ "account_holder_name" | translate }}</label>
                  <mat-form-field appearance="fill">
                    <input
                      type="text"
                      matInput
                      formControlName="account_holder_name"
                    />
                  </mat-form-field>
                </div>
                <span
                  class="text-danger"
                  *ngIf="isSubmitted && f['bank_details'].get('account_holder_name').errors?.['required']"
                  >{{ "enter_account_holder_name" | translate }}*</span
                >
              </div>
              <div class="col-sm-6 col-md-4 mb-3">
                <div class="form_field_wrapper">
                  <label>{{ "account_number" | translate }}</label>
                  <mat-form-field appearance="fill">
                    <input
                      type="number"
                      matInput
                      formControlName="account_number"
                    />
                  </mat-form-field>
                </div>
                <span
                  class="text-danger"
                  *ngIf="isSubmitted && f['bank_details'].get('account_number').errors?.['required']"
                  >{{ "enter_account_number" | translate }}*</span
                >
              </div>
              <div class="col-sm-6 col-md-4 mb-3">
                <div class="form_field_wrapper">
                  <label>{{ "ifsc" | translate }}</label>
                  <mat-form-field appearance="fill">
                    <input type="text" matInput formControlName="ifsc_code" />
                  </mat-form-field>
                </div>
                <span
                  class="text-danger"
                  *ngIf="isSubmitted && f['bank_details'].get('ifsc_code').errors?.['required']"
                  >{{ "enter_ifsc" | translate }}*</span
                >
              </div>
              <div class="col-sm-6 col-md-4 mb-3">
                <div class="form_field_wrapper">
                  <label>{{ "address" | translate }}</label>
                  <mat-form-field appearance="fill">
                    <input
                      type="text"
                      matInput
                      formControlName="bank_address"
                    />
                  </mat-form-field>
                </div>
                <span
                  class="text-danger"
                  *ngIf="isSubmitted && f['bank_details'].get('bank_address').errors?.['required']"
                  >{{ "enter_address" | translate }}*</span
                >
              </div>
            </div>
          </div>

          <div class="mobile_paydetails custome_modal divider">
            <h2>{{ "mobile_pay_details" | translate }}</h2>
            <div class="modal-body">
              <ng-container formArrayName="mobilePayDetails">
                <ng-container
                  *ngFor="let _ of mobilePayDetails.controls; let i = index"
                >
                  <ng-container [formGroupName]="i">
                    <div class="paydetail_content modal_content">
                      <div class="row modal_content_inner">
                        <div class="item col-sm-6 col-lg-6 mb-3">
                          <div class="form_field_wrapper">
                            <label>{{
                              "name_of_mobile_provider" | translate
                            }}</label>
                            <mat-form-field appearance="fill">
                              <input
                                type="text"
                                matInput
                                formControlName="provider"
                              />
                            </mat-form-field>
                          </div>
                          <span
                            class="text-danger"
                            *ngIf="isSubmitted && mobilePayValidation(i).controls['provider'].errors?.['required'] "
                            >{{ "enter_provider_name" | translate }}*</span
                          >
                        </div>
                        <div class="item col-sm-6 col-lg-6 mb-3">
                          <div class="form_field_wrapper">
                            <label>{{ "mobile_pay_number" | translate }}</label>
                            <div class="field-wrap-block d-flex">
                              <mat-select
                                disableRipple
                                placeholder="Select Country Code"
                                formControlName="mobile_country_code"
                                class="country-code-select"
                              >
                                <mat-option
                                  *ngFor="let code of countryCodes"
                                  [value]="code"
                                  >{{ code }}</mat-option
                                >
                              </mat-select>
                              <mat-form-field appearance="fill">
                                <input
                                  type="mobile"
                                  matInput
                                  formControlName="pay_number"
                                />
                              </mat-form-field>
                            </div>
                          </div>
                          <span
                            class="text-danger"
                            *ngIf="isSubmitted && mobilePayValidation(i).controls['pay_number'].errors?.['required'] "
                            >{{ "enter_mobile_pay_number" | translate }}*</span
                          >

                          <span
                            class="text-danger"
                            *ngIf="mobilePayValidation(i).controls['pay_number'].errors?.['pattern'] && mobilePayValidation(i).controls['pay_number'].invalid"
                          >
                            {{ "only_numbers_are_allowed" | translate }}*
                          </span>
                        </div>
                      </div>
                      <ng-container
                        *ngIf="i === mobilePayDetails.length - 1; else remove"
                      >
                        <div class="row_generate row_minus">
                          <mat-icon
                            class="minus"
                            *ngIf="mobilePayDetails.length > 1"
                            (click)="removeMobPay(i)"
                            >remove</mat-icon
                          >
                        </div>
                        <div class="row_generate row_add">
                          <mat-icon class="plus" (click)="addMobPay()"
                            >add</mat-icon
                          >
                        </div>
                      </ng-container>
                      <ng-template #remove>
                        <div class="row_generate row_minus">
                          <mat-icon class="minus" (click)="removeMobPay(i)"
                            >remove</mat-icon
                          >
                        </div>
                      </ng-template>
                    </div>
                    <br />
                  </ng-container>
                </ng-container>
              </ng-container>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
  <div class="primary_btn btn_wrap">
    <button
      type="button"
      class="btn btn-secondary"
      [routerLink]="['/hospital/manageoptical']"
    >
      {{ "cancel" | translate }}
    </button>
    <button
      type="button"
      class="btn btn-primary"
      (click)="handleSaveBasicInfo()"
    >
      {{ "save_and_next" | translate }}
    </button>
  </div>
</div>

<!-- import popup-->
<ng-template #importTests let-modal>
  <div class="custome_modal">
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title"></h4>
      <button
        type="button"
        class="btn-close"
        aria-label="Close"
        (click)="closePopup()"
      >
        <mat-icon>close</mat-icon>
      </button>
    </div>

    <div class="modal-body import_services">
      <form [formGroup]="testExcelForm" (ngSubmit)="excleSubmit()">
        <label>{{ "upload_excel_file" | translate }}</label>
        <div class="row">
          <div class="col-sm-6 upload_item">
            <div class="form_field_wrapper">
              <div class="upload_input">
                <div class="upload_input_content">
                  <label>
                    <a class="btn_svg"
                      ><svg
                        width="19"
                        height="17"
                        viewBox="0 0 19 17"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          fill-rule="evenodd"
                          clip-rule="evenodd"
                          d="M2.70702 0.0104581C2.35458 0.068045 2.14937 0.132128 1.86268 0.274083C1.40132 0.502557 0.97754 0.942847 0.758933 1.42088C0.482758 2.0248 0.50022 1.57399 0.50022 8.09617C0.50022 12.9014 0.509776 14.035 0.55184 14.2135C0.717983 14.9191 1.21541 15.5686 1.8243 15.875C2.38912 16.1593 2.18433 16.1464 6.14194 16.1464H9.71119L9.88221 16.0467C9.97624 15.9919 10.1037 15.8725 10.1653 15.7812C10.2688 15.6282 10.2815 15.5697 10.329 15.0238C10.4356 13.8003 10.7776 12.9004 11.4602 12.0464C12.1823 11.1432 13.1294 10.555 14.2693 10.3017C14.6271 10.2222 14.8098 10.2123 16.3188 10.1915L17.9755 10.1685L18.1418 10.0472C18.2333 9.98044 18.3513 9.84594 18.4041 9.7483L18.5 9.57071L18.4998 7.11979L18.4997 4.66886L18.3953 4.35004C18.1169 3.49978 17.5074 2.88881 16.677 2.62765C16.49 2.56883 16.1025 2.55875 13.2776 2.53906L10.0893 2.51682L9.93295 2.40938C9.82035 2.33195 9.65551 2.11499 9.34318 1.63305C9.10481 1.26517 8.83965 0.884663 8.75398 0.787502C8.53058 0.53412 8.0822 0.243117 7.72051 0.116785L7.40845 0.00778804L5.10571 0.00129208C3.8392 -0.00229465 2.75979 0.00184999 2.70702 0.0104581ZM14.0838 11.9775C13.9867 12.0233 13.5948 12.3851 13.0476 12.9344C12.0537 13.9318 11.9386 14.0915 11.9652 14.4363C11.9738 14.5479 12.0142 14.7048 12.055 14.785C12.172 15.0153 13.9025 16.8423 14.0853 16.9286C14.3751 17.0652 14.7298 17.0019 14.9629 16.7719C15.1698 16.5679 15.1979 16.4686 15.2186 15.8674L15.2378 15.3095L16.6066 15.2895L17.9754 15.2696L18.1418 15.1483C18.5595 14.8436 18.6203 14.2555 18.2748 13.861C18.0801 13.6388 18.0697 13.6372 16.6002 13.6157L15.2378 13.5958L15.2186 13.0379C15.1979 12.4367 15.1698 12.3374 14.9629 12.1334C14.7293 11.9029 14.3751 11.8401 14.0838 11.9775Z"
                        /></svg></a
                    >{{ "import_excel" | translate }}
                  </label>
                  {{ "selected_file" | translate }}
                </div>
                <input
                  (change)="fileChange($event)"
                  formControlName="specialization_csv"
                  class="ng-hide user_upload_input"
                  accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"
                  id="input-file-id"
                  type="file"
                />
                <mat-error
                  *ngIf="
                    isSubmitted1 &&
                    testExcelForm.get('specialization_csv').hasError('required')
                  "
                  >{{ "excel_required" | translate }}.</mat-error
                >
              </div>
            </div>
          </div>

          <div class="download_content col-sm-6">
            <button
              type="button"
              placement="top"
              ngbTooltip="Tooltip on top"
              class="btn btn-secondary"
              (click)="downLoadExcel()"
            >
              {{ "download_tests_sample_excel_file" | translate }}
            </button>
          </div>
        </div>
        <div class="pt-20">
          <i>{{ "note_only_excel_file_allowed" | translate }}</i>
        </div>
        <div class="primary_btn">
          <button
            type="button"
            class="btn btn-secondary"
            (click)="closePopup()"
          >
            {{ "cancel" | translate }}
          </button>
          <button type="submit" class="btn btn-primary" (click)="closePopup()">
            {{ "done" | translate }}
          </button>
        </div>
      </form>
    </div>
  </div>
</ng-template>

<ng-template #deleteTestPopup let-modal>
  <div class="custome_modal action_modals">
    <div class="modal-body">
      <div class="delete_screen text-center">
        <div class="image delete">
          <img
            class="img-fluid"
            src="../../../../assets/img/delete.svg"
            alt=""
          />
        </div>
        <p class="heading delete">{{ "are_you_sure" | translate }}</p>
        <p>{{ "you_want_to_delete_this_test" | translate }}</p>
        <div class="primary_btn mt-30">
          <button
            type="button"
            class="btn btn-secondary"
            (click)="closePopup()"
          >
            {{ "no" | translate }}
          </button>
          <button type="button" class="btn btn-primary" (click)="removeTest()">
            {{ "yes" | translate }}
          </button>
        </div>
      </div>
    </div>
  </div>
</ng-template>


<div class="add_role">
  <ng-template #addmanualcontent let-modal>
    <div class="custome_modal">
      <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">
          {{" add_manually" | translate}}
        </h4>
        <button
          type="button"
          class="btn-close"
          aria-label="Close"
          (click)="modal.dismiss('Cross click')"
        >
          <mat-icon>close</mat-icon>
        </button>
      </div>
      <div class="modal-body">
        <form [formGroup]="manualForm" (ngSubmit)="addManualtest()">
          <ng-container formArrayName="manualentries">
            <ng-container *ngFor="let row of manualentries.controls; let i = index">
              <ng-container [formGroupName]="i">
                <div class="modal_content Speciality_service">
                  <div class="row modal_content_inner">
                    <div class="item">
                      <div class="form_field_wrapper mb-3">
                        <label>{{" type_of_test" | translate}}<span class="danger">*</span></label>
                        <mat-form-field appearance="fill">
                          <input type="text" formControlName="typeOfTest" placeholder="" matInput />
                        </mat-form-field>

                      </div>
                      <span class="text-danger"
                        *ngIf="isSubmitted && manualentries.controls[i].get('typeOfTest')?.errors?.['required']">
                        {{"field_is_required" | translate}}
                      </span>
                    </div>
                    <div class="item">
                      <div class="form_field_wrapper mb-3">
                        <label>{{" name_of_test" | translate}}<span class="danger">*</span></label>
                        <mat-form-field appearance="fill">
                          <input type="text" formControlName="nameOfTest" placeholder="" matInput />
                        </mat-form-field>

                      </div>
                      <span class="text-danger"
                        *ngIf="isSubmitted && manualentries.controls[i].get('nameOfTest')?.errors?.['required']">
                        {{"field_is_required" | translate}}
                      </span>
                    </div>
                  </div>
                  <ng-container *ngIf="i === manualentries.length - 1; else remove">
                    <div class="row_generate row_minus" (click)="removeEntry(i)" *ngIf="manualentries.length>1">
                      <mat-icon class="plus">remove</mat-icon>
                    </div>
                    <div class="row_generate row_add" (click)="addnewRntry()">
                      <mat-icon class="plus">add</mat-icon>
                    </div>
                  </ng-container>
                  <ng-template #remove>
                    <div class="row_generate row_minus" (click)="removeEntry(i)">
                      <mat-icon class="plus">remove</mat-icon>
                    </div>
                  </ng-template>
                </div>
              </ng-container>
            </ng-container>
          </ng-container>

          <div class="primary_btn">
            <button type="button" class="btn btn-secondary" (click)="modal.dismiss('Cross click')">
              {{ "cancel" | translate }}
            </button>
            <button type="submit" class="btn btn-primary">
              {{ "add" | translate }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </ng-template>
</div>

<!-- Edit Test -->
<div class="edit_role">
  <ng-template #edittests let-modal>
    <div class="custome_modal">
      <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">
          {{ "edit_role" | translate }}
        </h4>
        <button
          type="button"
          class="btn-close"
          aria-label="Close"
          (click)="modal.dismiss('Cross click')"
        >
          <mat-icon>close</mat-icon>
        </button>
      </div>
      <div class="modal-body">
        <form [formGroup]="editmanualForm" (ngSubmit)="editTest()">
          <div class="modal_content category_service">
            <div class="row modal_content_inner">
              <div class="item">
                <div class="form_field_wrapper mb-3">
                  <label>{{" type_of_test" | translate}}<span class="danger">*</span> </label>
                  <mat-form-field appearance="fill">
                    <input type="text" formControlName="typeOfTest" placeholder="" matInput />
                  </mat-form-field>
                </div>
                <span
                class="text-danger"
                *ngIf="isSubmitted && g['typeOfTest'].errors?.['required']"
                >{{ "enter_type_of_test" | translate }}*</span>
              </div>
              <div class="item">
                <div class="form_field_wrapper mb-3">
                  <label>{{" name_of_test" | translate}}<span class="danger">*</span></label>
                  <mat-form-field appearance="fill">
                    <input type="text" formControlName="nameOfTest" placeholder="" matInput />
                  </mat-form-field>
                </div>
                <span
                class="text-danger"
                *ngIf="isSubmitted && g['nameOfTest'].errors?.['required']"
                >{{ "enter_name_of_test" | translate }}*</span>
              </div>
            </div>
          </div>
          <div class="primary_btn">
            <button
              type="button"
              class="btn btn-secondary"
              (click)="modal.dismiss('Cross click')"
            >
              {{ "cancel" | translate }}
            </button>
            <button type="submit" class="btn btn-primary">
              {{ "update_test" | translate }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </ng-template>
</div>