<div class="presciption_order dashboard_main_content">
  <div class="prescription_tab">
    <mat-tab-group
      animationDuration="0ms"
      [(selectedIndex)]="selectedTabIndex"
      (selectedTabChange)="onTabChanged($event)"
      #orderTab
    >
      <mat-tab>
        <ng-template mat-tab-label>
          <div class="mat_tab_label_inner" [ngClass]="{ lightblue: true }">
            <div class="counter_wrap">
              <span class="counter">{{ getOrderStatusCount("new") }}</span>
              <div class="title">{{ "new_order" | translate }}</div>
            </div>
            <div class="btn_svg">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="27"
                height="35"
                viewBox="0 0 27 35"
                fill="none"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M6.83358 0.199543L6.60733 0.399015V2.05085V3.70268L6.83358 3.90215L7.05982 4.10162H13.4699C20.4322 4.10162 20.1651 4.11619 20.3445 3.72756C20.4594 3.4788 20.4594 0.622892 20.3445 0.374133C20.1651 -0.0144897 20.4322 7.07572e-05 13.4699 7.07572e-05H7.05982L6.83358 0.199543ZM2.35431 2.15906C1.34036 2.42805 0.575172 3.13168 0.17512 4.16274L0.026391 4.54596L0.00553991 18.3203C-0.00976944 28.4597 0.00567827 32.2029 0.0640755 32.5049C0.29614 33.7045 1.25931 34.6721 2.47166 34.9238C2.7324 34.9779 5.93379 35 13.5235 35C22.8995 35 24.2582 34.9871 24.6159 34.8952C25.6552 34.6281 26.4191 33.934 26.8249 32.8881L26.9736 32.5049L26.9945 18.7305C27.0098 8.59112 26.9943 4.8479 26.9359 4.54596C26.8158 3.92492 26.5479 3.43252 26.078 2.96878C25.3684 2.2685 24.7175 2.05085 23.3334 2.05085H22.5055V2.94171C22.5055 3.66125 22.478 3.91316 22.3623 4.25195C22.0969 5.0296 21.6289 5.54011 20.8462 5.9061L20.3927 6.11822L13.6738 6.13695C7.10111 6.15527 6.9449 6.15268 6.49393 6.01753C5.6763 5.77246 4.97436 5.11628 4.69193 4.33309C4.582 4.02834 4.53815 3.70268 4.51099 2.99079L4.47511 2.05085L3.60157 2.05536C3.07053 2.05809 2.58153 2.09877 2.35431 2.15906ZM10.6259 10.3524C11.0202 10.515 11.2668 11.0097 11.1817 11.4678C11.141 11.6874 10.8822 11.9735 9.35567 13.4861C7.4553 15.3693 7.34585 15.4492 6.80448 15.3495C6.58322 15.3088 6.38933 15.1537 5.66092 14.4349C4.93259 13.7161 4.77541 13.5248 4.73412 13.3065C4.58934 12.5406 5.32675 11.8631 6.04906 12.0984C6.18518 12.1427 6.47003 12.3354 6.68215 12.5267L7.06772 12.8744L8.3269 11.6406C9.01942 10.9621 9.64842 10.3734 9.72462 10.3325C9.92052 10.2273 10.3453 10.2367 10.6259 10.3524ZM21.7904 12.4828C22.3904 12.9242 22.3904 13.736 21.7904 14.1774C21.5977 14.3193 21.5378 14.3216 17.6118 14.3401L13.6286 14.3588L13.3565 14.2079C13.07 14.0489 12.8073 13.6291 12.8073 13.3301C12.8073 13.0409 13.0694 12.6136 13.3436 12.4559L13.6039 12.306L17.5994 12.3225C21.5399 12.3387 21.5976 12.3409 21.7904 12.4828ZM10.671 17.7475C10.921 17.8717 11.132 18.1501 11.1842 18.4245C11.2811 18.9341 11.2233 19.0123 9.4221 20.8039C8.48359 21.7375 7.62218 22.5497 7.50795 22.6089C7.18853 22.7743 6.74865 22.7395 6.43353 22.524C6.2859 22.4231 5.86971 22.04 5.50866 21.6729C4.79917 20.9514 4.64496 20.6603 4.73135 20.2058C4.79217 19.8858 5.17705 19.5034 5.49792 19.444C5.94259 19.3617 6.21746 19.4644 6.65562 19.8768L7.06384 20.2611L8.36701 18.9765C9.36648 17.9912 9.7249 17.6795 9.90521 17.6388C10.1686 17.5794 10.3981 17.6119 10.671 17.7475ZM21.7904 19.3187C22.3904 19.7601 22.3904 20.572 21.7904 21.0134C21.5977 21.1552 21.5378 21.1575 17.6118 21.176L13.6286 21.1947L13.3565 21.0438C13.07 20.8848 12.8073 20.465 12.8073 20.166C12.8073 19.8768 13.0694 19.4496 13.3436 19.2918L13.6039 19.142L17.5994 19.1584C21.5399 19.1746 21.5976 19.1768 21.7904 19.3187ZM10.671 24.5834C10.921 24.7076 11.132 24.9861 11.1842 25.2604C11.2811 25.7701 11.2233 25.8482 9.4221 27.6398C8.48359 28.5734 7.62218 29.3857 7.50795 29.4448C7.18853 29.6102 6.74865 29.5754 6.43353 29.36C6.2859 29.259 5.86971 28.876 5.50866 28.5088C4.79917 27.7873 4.64496 27.4962 4.73135 27.0418C4.79217 26.7218 5.17705 26.3393 5.49792 26.2799C5.94259 26.1976 6.21746 26.3003 6.65562 26.7127L7.06384 27.097L8.36701 25.8124C9.36648 24.8271 9.7249 24.5154 9.90521 24.4747C10.1686 24.4153 10.3981 24.4479 10.671 24.5834ZM21.7432 26.1214C22.0367 26.2841 22.2977 26.6848 22.2977 26.9726C22.2977 27.308 22.0322 27.7453 21.7389 27.8929C21.4827 28.0219 21.313 28.0274 17.5473 28.0274C13.6408 28.0274 13.6215 28.0267 13.3536 27.8781C13.07 27.7208 12.8073 27.2995 12.8073 27.002C12.8073 26.7122 13.0693 26.2855 13.3436 26.1286C13.6026 25.9805 13.6237 25.9797 17.5431 25.9782C21.4284 25.9766 21.4857 25.9786 21.7432 26.1214Z"
                  fill="#447FD9"
                />
              </svg>
            </div>
          </div>
        </ng-template>

        <div class="tab_content">
          <div class="table-wrap">
            <div class="table-inner">
              <table
                mat-table
                [dataSource]="dataSource"
                class="mat-elevation-z8"
              >
              <ng-container matColumnDef="dateandtime">
                <th
                  mat-header-cell
                  *matHeaderCellDef
                  (click)="onSortData('createdAt')"
                >
                  {{ "date_and_time" | translate }}
                  <span
                    *ngIf="sortColumn === 'createdAt'"
                    class="material-icons sorticon"
                    >{{ sortIconClass }}</span
                  >
                </th>
                <td mat-cell *matCellDef="let element">
                  {{
                    element.createdAt
                      | date
                        : "dd-MM-yyyy,
                                      h:mm a"
                  }}
                </td>
              </ng-container>

                <ng-container matColumnDef="patientname">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('pharmacy_name')"
                  >
                    {{ "pharmacy_name" | translate }}
                    <span
                      *ngIf="sortColumn === 'pharmacy_name'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <span class="user_image_wrapper">
                      <img
                        *ngIf="element.pharmacy_profile_picture"
                        src="{{ element.pharmacy_profile_picture }}"
                        class="user_image"
                      />
                      <img
                        *ngIf="!element.pharmacy_profile_picture"
                        src="../../../../assets/img/user_profile.svg"
                        class="user_image"
                      />
                    </span>
                    <span class="name_user">{{ element.pharmacy_name }} </span>
                  </td>
                </ng-container>

                <ng-container matColumnDef="orderid">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('order_id')"
                  >
                    {{ "order_id" | translate }}
                    <span
                      *ngIf="sortColumn === 'order_id'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.order_id }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('status')"
                  >
                    {{ "status" | translate }}
                    <span
                      *ngIf="sortColumn === 'status'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <!-- <td mat-cell *matCellDef="let element"><a class="rejected">Rejected</a></td>
                                    <td mat-cell *matCellDef="let element"><a class="approved">Approved</a></td>
                                    <td mat-cell *matCellDef="let element"><a class="todo">To Do</a></td> -->
                  <td mat-cell *matCellDef="let element">
                    <a class="new">{{ element.status }}</a>
                  </td>
                </ng-container>

                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef>
                    {{ "action" | translate }}
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <div class="icon_group">
                      <a
                        class="svgicon"
                        [routerLink]="['/patient/presciptionorder/neworder']"
                        [queryParams]="{
                          orderId: element._id,
                          pharmacyId: element.for_portal_user
                        }"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="9"
                          viewBox="0 0 16 9"
                          fill="none"
                        >
                          <path
                            d="M8 0C2.7512 0 0 3.88286 0 4.5C0 5.11554 2.7512 9 8 9C13.248 9 16 5.11554 16 4.5C16 3.88286 13.248 0 8 0ZM8 7.96098C6.036 7.96098 4.444 6.4117 4.444 4.5C4.444 2.5883 6.036 1.03741 8 1.03741C9.964 1.03741 11.5552 2.5883 11.5552 4.5C11.5552 6.4117 9.964 7.96098 8 7.96098ZM8 4.5C7.6744 4.1408 8.5304 2.76911 8 2.76911C7.0176 2.76911 6.2216 3.54455 6.2216 4.5C6.2216 5.45545 7.0176 6.23089 8 6.23089C8.9816 6.23089 9.7784 5.45545 9.7784 4.5C9.7784 4.06045 8.2768 4.80455 8 4.5Z"
                          />
                        </svg>
                      </a>
                    </div>
                  </td>
                </ng-container>

                <tr
                  mat-header-row
                  *matHeaderRowDef="neworderdisplayedColumns"
                ></tr>
                <tr
                  mat-row
                  *matRowDef="let row; columns: neworderdisplayedColumns"
                ></tr>
              </table>
            </div>
            <mat-paginator
              class="pagination"
              [length]="totalLength"
              (page)="handlePageEvent($event)"
              [pageSize]="pageSize"
              [pageSizeOptions]="[5, 10, 20]"
              showFirstLastButtons
              aria-label="Select page of periodic elements"
            >
            </mat-paginator>
          </div>
        </div>
      </mat-tab>
      <mat-tab>
        <ng-template mat-tab-label>
          <div class="mat_tab_label_inner" [ngClass]="{ lightviolet: true }">
            <div class="counter_wrap">
              <span class="counter">{{ getOrderStatusCount("accepted") }}</span>
              <div class="title">{{ "accepted" | translate }}</div>
            </div>
            <div class="btn_svg">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="34"
                height="34"
                viewBox="0 0 34 34"
                fill="none"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M15.5932 0.0511038C13.1707 0.38513 11.0281 1.45315 9.28695 3.19446C7.69611 4.78536 6.68538 6.68233 6.24011 8.91264C6.05532 9.8383 6.05532 11.9783 6.24011 12.9039C6.68531 15.1339 7.69573 17.0304 9.28695 18.6226C10.8597 20.1964 12.6096 21.1432 14.8568 21.6362C15.8454 21.853 17.9893 21.8702 18.9988 21.6693C21.2307 21.2251 23.1175 20.2184 24.7055 18.6246C26.2813 17.0429 27.2238 15.2987 27.7183 13.0493C27.951 11.9904 27.951 9.82615 27.7183 8.76732C27.2238 6.51786 26.2813 4.77366 24.7055 3.19203C23.1268 1.60744 21.2185 0.585531 19.0407 0.158369C18.278 0.00879018 16.3377 -0.0516034 15.5932 0.0511038ZM17.6618 4.42619C17.7709 4.5077 17.9306 4.66883 18.0167 4.78415C18.1667 4.98508 18.1743 5.10473 18.1965 7.66618L18.2197 10.3385L19.5129 11.3641C20.9586 12.5107 21.1446 12.6977 21.2155 13.0756C21.38 13.9529 20.6484 14.687 19.7734 14.5228C19.3932 14.4515 16.0366 11.7512 15.8891 11.3981C15.8028 11.1915 15.7818 10.5601 15.7818 8.18085C15.7818 6.26846 15.8105 5.14499 15.8628 5.0068C15.9697 4.72451 16.2218 4.4565 16.503 4.32622C16.8056 4.18606 17.4102 4.23825 17.6618 4.42619ZM3.78637 24.3966C2.01241 24.7778 0.477988 26.3273 0.104156 28.1148C-0.348785 30.2811 0.707419 32.4946 2.65242 33.4552C3.82683 34.0353 2.88747 33.9996 16.9965 33.9996C31.0955 33.9996 30.1792 34.0341 31.3429 33.46C32.9268 32.6787 34 30.9339 34 29.1404C34 27.3468 32.9268 25.602 31.3429 24.8207C30.1782 24.2462 31.1021 24.2806 16.9585 24.2858C6.40775 24.2898 4.19702 24.3083 3.78637 24.3966ZM12.7917 28.1195C13.1901 28.4172 13.3144 28.6599 13.3144 29.1404C13.3144 29.6208 13.1901 29.8635 12.7917 30.1612C12.5874 30.314 12.4844 30.3184 8.65878 30.3409C6.03801 30.3563 4.6432 30.3371 4.45773 30.283C3.68608 30.058 3.38832 29.0032 3.91847 28.3729C4.3002 27.9189 4.21 27.9272 8.58279 27.9458C12.49 27.9625 12.587 27.9664 12.7917 28.1195Z"
                  fill="#BE5AE1"
                />
              </svg>
            </div>
          </div>
        </ng-template>
        <div class="tab_content">
          <div class="table-wrap">
            <div class="table-inner">
              <table
                mat-table
                [dataSource]="dataSource"
                class="mat-elevation-z8"
              >
              <ng-container matColumnDef="dateandtime">
                <th
                  mat-header-cell
                  *matHeaderCellDef
                  (click)="onSortData('createdAt')"
                >
                  {{ "date_and_time" | translate }}
                  <span
                    *ngIf="sortColumn === 'createdAt'"
                    class="material-icons sorticon"
                    >{{ sortIconClass }}</span
                  >
                </th>
                <td mat-cell *matCellDef="let element">
                  {{
                    element.createdAt
                      | date
                        : "dd-MM-yyyy,
                                      h:mm a"
                  }}
                </td>
              </ng-container>

                <ng-container matColumnDef="patientname">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('pharmacy_name')"
                  >
                    {{ "pharmacy_name" | translate }}
                    <span
                      *ngIf="sortColumn === 'pharmacy_name'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <span class="user_image_wrapper">
                      <img
                        *ngIf="element.pharmacy_profile_picture"
                        src="{{ element.pharmacy_profile_picture }}"
                        class="user_image"
                      />
                      <img
                        *ngIf="!element.pharmacy_profile_picture"
                        src="../../../../assets/img/user_profile.svg"
                        class="user_image"
                      />
                    </span>
                    <span class="name_user">{{ element.pharmacy_name }} </span>
                  </td>
                </ng-container>

                <ng-container matColumnDef="orderid">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('order_id')"
                  >
                    {{ "order_id" | translate }}
                    <span
                      *ngIf="sortColumn === 'order_id'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.order_id }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="paidbypatient">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('medicine_bill.co_pay')"
                  >
                    {{ "paid_by_patient" | translate }}
                    <span
                      *ngIf="sortColumn === 'medicine_bill.co_pay'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.medicine_bill.co_pay || 0 }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="insurancetobepaid">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('medicine_bill.insurance_paid')"
                  >
                    {{ "insurance_to_be_paid" | translate }}
                    <span
                      *ngIf="sortColumn === 'medicine_bill.insurance_paid'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.medicine_bill.insurance_paid || 0 }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="totalmedicinecost">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('medicine_bill.total_medicine_cost')"
                  >
                    {{ "total_medicine_cost" | translate }}
                    <span
                      *ngIf="sortColumn === 'medicine_bill.total_medicine_cost'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.medicine_bill.total_medicine_cost || 0 }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('status')"
                  >
                    {{ "status" | translate }}
                    <span
                      *ngIf="sortColumn === 'status'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <!-- <td mat-cell *matCellDef="let element"><a class="rejected">Rejected</a></td>
                                    <td mat-cell *matCellDef="let element"><a class="approved">Approved</a></td>
                                    <td mat-cell *matCellDef="let element"><a class="todo">To Do</a></td> -->
                  <td mat-cell *matCellDef="let element">
                    <a class="accepted">{{ element.status }}</a>
                  </td>
                </ng-container>

                <ng-container matColumnDef="orderconfirmation">
                  <th mat-header-cell *matHeaderCellDef>
                    {{ "order_confirmation" | translate }}
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{
                      element.patient_details.order_confirmation ? "yes" : "no"
                    }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef>
                    {{ "action" | translate }}
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <div class="icon_group">
                      <a
                        class="svgicon"
                        [routerLink]="['/patient/presciptionorder/accepted']"
                        [queryParams]="{
                          orderId: element._id,
                          pharmacyId: element.for_portal_user
                        }"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="9"
                          viewBox="0 0 16 9"
                          fill="none"
                        >
                          <path
                            d="M8 0C2.7512 0 0 3.88286 0 4.5C0 5.11554 2.7512 9 8 9C13.248 9 16 5.11554 16 4.5C16 3.88286 13.248 0 8 0ZM8 7.96098C6.036 7.96098 4.444 6.4117 4.444 4.5C4.444 2.5883 6.036 1.03741 8 1.03741C9.964 1.03741 11.5552 2.5883 11.5552 4.5C11.5552 6.4117 9.964 7.96098 8 7.96098ZM8 4.5C7.6744 4.1408 8.5304 2.76911 8 2.76911C7.0176 2.76911 6.2216 3.54455 6.2216 4.5C6.2216 5.45545 7.0176 6.23089 8 6.23089C8.9816 6.23089 9.7784 5.45545 9.7784 4.5C9.7784 4.06045 8.2768 4.80455 8 4.5Z"
                          />
                        </svg>
                      </a>
                    </div>
                  </td>
                </ng-container>

                <tr
                  mat-header-row
                  *matHeaderRowDef="accepteddisplayedColumns"
                ></tr>
                <tr
                  mat-row
                  *matRowDef="let row; columns: accepteddisplayedColumns"
                ></tr>
              </table>
            </div>
            <mat-paginator
              class="pagination"
              [length]="totalLength"
              (page)="handlePageEvent($event)"
              [pageSize]="pageSize"
              [pageSizeOptions]="[5, 10, 20]"
              showFirstLastButtons
              aria-label="Select page of periodic elements"
            >
            </mat-paginator>
          </div>
        </div>
      </mat-tab>
      <mat-tab>
        <ng-template mat-tab-label>
          <div class="mat_tab_label_inner" [ngClass]="{ lightpurple: true }">
            <div class="counter_wrap">
              <span class="counter">{{
                getOrderStatusCount("scheduled")
              }}</span>
              <div class="title">{{ "scheduled" | translate }}</div>
            </div>
            <div class="btn_svg">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="35"
                height="35"
                viewBox="0 0 35 35"
                fill="none"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M6.46928 0.0382633C5.91549 0.21988 5.50184 0.595566 5.34314 1.06117C5.26585 1.28788 5.23737 1.65392 5.23737 2.41994V3.46844H3.40135C1.32434 3.46844 1.07328 3.50875 0.593705 3.91906C0.433983 4.05565 0.2351 4.29502 0.151713 4.45091L0 4.73442V17.4968V30.2592L0.151713 30.5427C0.2351 30.6986 0.433983 30.938 0.593705 31.0746C1.13401 31.5368 0.969427 31.5252 6.96139 31.5252C9.92923 31.5252 12.3575 31.5038 12.3575 31.4776C12.3575 31.4514 12.2215 31.1666 12.0553 30.8446C11.4003 29.5755 10.9724 28.2961 10.6694 26.7008C10.5257 25.9447 10.4716 23.8567 10.5726 22.9675C11.2953 16.6019 16.3419 11.4555 22.6816 10.6189C23.6741 10.488 25.375 10.4882 26.2729 10.6193C28.7088 10.9751 30.8161 11.8669 33.0844 13.5019L33.2385 13.6129L33.237 9.24211C33.2352 4.3432 33.2592 4.58866 32.7311 4.06078C32.2461 3.57595 32.0332 3.51121 30.8252 3.48103L29.7469 3.45407V2.41276C29.7469 1.23109 29.6688 0.887357 29.3195 0.530283C28.9387 0.140842 28.6167 0.0150652 28.0011 0.0150652C27.3946 0.0150652 27.0584 0.14351 26.7252 0.5025C26.3323 0.925952 26.2921 1.08526 26.267 2.32222L26.2437 3.46844H17.4921H8.74052L8.71724 2.32222C8.6978 1.36685 8.67274 1.1361 8.56669 0.93649C8.25074 0.341755 7.76863 0.0382633 7.08585 0.0041846C6.8411 -0.00799615 6.56362 0.00733243 6.46928 0.0382633ZM23.0033 14.1074C18.7653 14.7602 15.3605 17.8458 14.3174 21.9791C13.8453 23.8498 13.9202 25.9555 14.5232 27.7615C15.573 30.9057 18.0202 33.3793 21.1302 34.4394C23.2962 35.1778 25.5789 35.1869 27.7755 34.4659C33.3058 32.6507 36.3174 26.6283 34.4424 21.1333C33.9295 19.6298 33.1661 18.3948 32.0101 17.1983C30.5249 15.6609 28.7201 14.6714 26.5634 14.2122C25.6741 14.0228 23.8929 13.9704 23.0033 14.1074ZM25.3311 17.6856C25.6485 17.8488 25.9125 18.1152 26.0935 18.4549C26.2082 18.6702 26.2232 18.8994 26.2419 20.7246L26.2628 22.7548L27.44 22.7778C28.7274 22.8028 28.8453 22.8334 29.2624 23.2503C29.5781 23.5658 29.6952 23.8398 29.7316 24.3473C29.7888 25.147 29.4889 25.7188 28.8263 26.0733C28.5574 26.2172 28.4777 26.2218 26.2553 26.2218C24.0329 26.2218 23.9532 26.2172 23.6843 26.0733C23.2903 25.8625 22.9922 25.5332 22.8695 25.1733C22.7122 24.7117 22.7122 19.0411 22.8695 18.5795C23.0282 18.1139 23.4418 17.7383 23.9956 17.5566C24.2884 17.4606 25.0336 17.5326 25.3311 17.6856Z"
                  fill="#BE5AE1"
                />
              </svg>
            </div>
          </div>
        </ng-template>
        <div class="tab_content">
          <div class="table-wrap">
            <div class="table-inner">
              <table
                mat-table
                [dataSource]="dataSource"
                class="mat-elevation-z8"
              >
              <ng-container matColumnDef="dateandtime">
                <th
                  mat-header-cell
                  *matHeaderCellDef
                  (click)="onSortData('createdAt')"
                >
                  {{ "date_and_time" | translate }}
                  <span
                    *ngIf="sortColumn === 'createdAt'"
                    class="material-icons sorticon"
                    >{{ sortIconClass }}</span
                  >
                </th>
                <td mat-cell *matCellDef="let element">
                  {{
                    element.createdAt
                      | date
                        : "dd-MM-yyyy,
                                      h:mm a"
                  }}
                </td>
              </ng-container>
                <ng-container matColumnDef="patientname">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('pharmacy_name')"
                  >
                    {{ "pharmacy_name" | translate }}
                    <span
                      *ngIf="sortColumn === 'pharmacy_name'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <span class="user_image_wrapper">
                      <img
                        *ngIf="element.pharmacy_profile_picture"
                        src="{{ element.pharmacy_profile_picture }}"
                        class="user_image"
                      />
                      <img
                        *ngIf="!element.pharmacy_profile_picture"
                        src="../../../../assets/img/user_profile.svg"
                        class="user_image"
                      />
                    </span>
                    <span class="name_user">{{ element.pharmacy_name }} </span>
                  </td>
                </ng-container>

                <ng-container matColumnDef="orderid">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('order_id')"
                  >
                    {{ "order_id" | translate }}
                    <span
                      *ngIf="sortColumn === 'order_id'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.order_id }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="payemttype">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('payment_type')"
                  >
                    {{ "payment_type" | translate }}
                    <span
                      *ngIf="sortColumn === 'payment_type'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.payment_type }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="paidbypatient">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('medicine_bill.co_pay ')"
                  >
                    {{ "paid_by_patient" | translate }}
                    <span
                      *ngIf="sortColumn === 'medicine_bill.co_pay '"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.medicine_bill.co_pay || 0 }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="insurancetobepaid">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('medicine_bill.insurance_paid')"
                  >
                    {{ "insurance_to_be_paid" | translate }}
                    <span
                      *ngIf="sortColumn === 'medicine_bill.insurance_paid'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.medicine_bill.insurance_paid || 0 }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="totalmedicinecost">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('medicine_bill.total_medicine_cost')"
                  >
                    {{ "total_medicine_cost" | translate }}
                    <span
                      *ngIf="sortColumn === 'medicine_bill.total_medicine_cost'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.medicine_bill.total_medicine_cost || 0 }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('status')"
                  >
                    {{ "status" | translate }}
                    <span
                      *ngIf="sortColumn === 'status'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <!-- <td mat-cell *matCellDef="let element"><a class="rejected">Rejected</a></td>
                                    <td mat-cell *matCellDef="let element"><a class="approved">Approved</a></td>
                                    <td mat-cell *matCellDef="let element"><a class="todo">To Do</a></td> -->
                  <td mat-cell *matCellDef="let element">
                    <a class="schedule">{{ element.status }}</a>
                  </td>
                </ng-container>

                <ng-container matColumnDef="orderconfirmation">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('patient_details.order_confirmation')"
                  >
                    {{ "order_confirmation" | translate }}
                    <span
                      *ngIf="
                        sortColumn === 'patient_details.order_confirmation'
                      "
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{
                      element.patient_details.order_confirmation ? "yes" : "no"
                    }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef>
                    {{ "action" | translate }}
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <div class="icon_group">
                      <a
                        class="svgicon"
                        [routerLink]="['/patient/presciptionorder/schedule']"
                        [queryParams]="{
                          orderId: element._id,
                          pharmacyId: element.for_portal_user
                        }"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="9"
                          viewBox="0 0 16 9"
                          fill="none"
                        >
                          <path
                            d="M8 0C2.7512 0 0 3.88286 0 4.5C0 5.11554 2.7512 9 8 9C13.248 9 16 5.11554 16 4.5C16 3.88286 13.248 0 8 0ZM8 7.96098C6.036 7.96098 4.444 6.4117 4.444 4.5C4.444 2.5883 6.036 1.03741 8 1.03741C9.964 1.03741 11.5552 2.5883 11.5552 4.5C11.5552 6.4117 9.964 7.96098 8 7.96098ZM8 4.5C7.6744 4.1408 8.5304 2.76911 8 2.76911C7.0176 2.76911 6.2216 3.54455 6.2216 4.5C6.2216 5.45545 7.0176 6.23089 8 6.23089C8.9816 6.23089 9.7784 5.45545 9.7784 4.5C9.7784 4.06045 8.2768 4.80455 8 4.5Z"
                          />
                        </svg>
                      </a>
                    </div>
                  </td>
                </ng-container>

                <tr
                  mat-header-row
                  *matHeaderRowDef="scheduleddisplayedColumns"
                ></tr>
                <tr
                  mat-row
                  *matRowDef="let row; columns: scheduleddisplayedColumns"
                ></tr>
              </table>
            </div>
            <mat-paginator
              class="pagination"
              [length]="totalLength"
              (page)="handlePageEvent($event)"
              [pageSize]="pageSize"
              [pageSizeOptions]="[5, 10, 20]"
              showFirstLastButtons
              aria-label="Select page of periodic elements"
            >
            </mat-paginator>
          </div>
        </div>
      </mat-tab>
      <mat-tab>
        <ng-template mat-tab-label>
          <div class="mat_tab_label_inner" [ngClass]="{ lightgreen: true }">
            <div class="counter_wrap">
              <span class="counter">{{
                getOrderStatusCount("completed")
              }}</span>
              <div class="title">{{ "completed" | translate }}</div>
            </div>
            <div class="btn_svg">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="27"
                height="35"
                viewBox="0 0 27 35"
                fill="none"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M6.73234 0.199543L6.50945 0.399015V2.05085V3.70268L6.73234 3.90215L6.95523 4.10162H13.2703C20.1295 4.10162 19.8664 4.11619 20.0431 3.72756C20.1563 3.4788 20.1563 0.622892 20.0431 0.374133C19.8664 -0.0144897 20.1295 7.07572e-05 13.2703 7.07572e-05H6.95523L6.73234 0.199543ZM2.31943 2.15906C1.32051 2.42805 0.566651 3.13168 0.172526 4.16274L0.026 4.54596L0.00545783 18.3203C-0.00962471 28.4597 0.00559415 32.2029 0.0631262 32.5049C0.291753 33.7045 1.24066 34.6721 2.43504 34.9238C2.69192 34.9779 5.84588 35 13.3231 35C22.5602 35 23.8988 34.9871 24.2512 34.8952C25.2751 34.6281 26.0277 33.934 26.4275 32.8881L26.574 32.5049L26.5945 18.7305C26.6096 8.59112 26.5944 4.8479 26.5369 4.54596C26.4185 3.92492 26.1546 3.43252 25.6917 2.96878C24.9926 2.2685 24.3513 2.05085 22.9877 2.05085H22.1721V2.94171C22.1721 3.66125 22.145 3.91316 22.031 4.25195C21.7695 5.0296 21.3085 5.54011 20.5374 5.9061L20.0906 6.11822L13.4712 6.13695C6.99591 6.15527 6.84201 6.15268 6.39773 6.01753C5.59221 5.77246 4.90066 5.11628 4.62242 4.33309C4.51411 4.02834 4.47091 3.70268 4.44416 2.99079L4.40881 2.05085L3.54822 2.05536C3.02504 2.05809 2.54328 2.09877 2.31943 2.15906ZM10.4684 10.3524C10.857 10.515 11.0999 11.0097 11.0161 11.4678C10.9759 11.6874 10.721 11.9735 9.21707 13.4861C7.34485 15.3693 7.23702 15.4492 6.70368 15.3495C6.48569 15.3088 6.29467 15.1537 5.57706 14.4349C4.85951 13.7161 4.70466 13.5248 4.66398 13.3065C4.52135 12.5406 5.24783 11.8631 5.95944 12.0984C6.09355 12.1427 6.37418 12.3354 6.58315 12.5267L6.96301 12.8744L8.20354 11.6406C8.8858 10.9621 9.50548 10.3734 9.58055 10.3325C9.77355 10.2273 10.192 10.2367 10.4684 10.3524ZM21.4676 12.4828C22.0587 12.9242 22.0587 13.736 21.4676 14.1774C21.2777 14.3193 21.2187 14.3216 17.3509 14.3401L13.4267 14.3588L13.1587 14.2079C12.8763 14.0489 12.6175 13.6291 12.6175 13.3301C12.6175 13.0409 12.8758 12.6136 13.1459 12.4559L13.4024 12.306L17.3386 12.3225C21.2208 12.3387 21.2776 12.3409 21.4676 12.4828ZM10.5129 17.7475C10.7592 17.8717 10.9671 18.1501 11.0185 18.4245C11.114 18.9341 11.057 19.0123 9.28252 20.8039C8.35791 21.7375 7.50926 22.5497 7.39672 22.6089C7.08204 22.7743 6.64867 22.7395 6.33821 22.524C6.19278 22.4231 5.78275 22.04 5.42705 21.6729C4.72807 20.9514 4.57615 20.6603 4.66125 20.2058C4.72118 19.8858 5.10035 19.5034 5.41647 19.444C5.85455 19.3617 6.12535 19.4644 6.55701 19.8768L6.95919 20.2611L8.24305 18.9765C9.22771 17.9912 9.58082 17.6795 9.75847 17.6388C10.0179 17.5794 10.244 17.6119 10.5129 17.7475ZM21.4676 19.3187C22.0587 19.7601 22.0587 20.572 21.4676 21.0134C21.2777 21.1552 21.2187 21.1575 17.3509 21.176L13.4267 21.1947L13.1587 21.0438C12.8763 20.8848 12.6175 20.465 12.6175 20.166C12.6175 19.8768 12.8758 19.4496 13.1459 19.2918L13.4024 19.142L17.3386 19.1584C21.2208 19.1746 21.2776 19.1768 21.4676 19.3187ZM10.5129 24.5834C10.7592 24.7076 10.9671 24.9861 11.0185 25.2604C11.114 25.7701 11.057 25.8482 9.28252 27.6398C8.35791 28.5734 7.50926 29.3857 7.39672 29.4448C7.08204 29.6102 6.64867 29.5754 6.33821 29.36C6.19278 29.259 5.78275 28.876 5.42705 28.5088C4.72807 27.7873 4.57615 27.4962 4.66125 27.0418C4.72118 26.7218 5.10035 26.3393 5.41647 26.2799C5.85455 26.1976 6.12535 26.3003 6.55701 26.7127L6.95919 27.097L8.24305 25.8124C9.22771 24.8271 9.58082 24.5154 9.75847 24.4747C10.0179 24.4153 10.244 24.4479 10.5129 24.5834ZM21.4211 26.1214C21.7103 26.2841 21.9673 26.6848 21.9673 26.9726C21.9673 27.308 21.7058 27.7453 21.4169 27.8929C21.1645 28.0219 20.9972 28.0274 17.2874 28.0274C13.4387 28.0274 13.4197 28.0267 13.1557 27.8781C12.8763 27.7208 12.6175 27.2995 12.6175 27.002C12.6175 26.7122 12.8756 26.2855 13.1459 26.1286C13.4011 25.9805 13.4219 25.9797 17.2832 25.9782C21.1109 25.9766 21.1674 25.9786 21.4211 26.1214Z"
                  fill="#72D284"
                />
              </svg>
            </div>
          </div>
        </ng-template>

        <div class="tab_content">
          <div class="table-wrap">
            <div class="table-inner">
              <table
                mat-table
                [dataSource]="dataSource"
                class="mat-elevation-z8"
              >
              <ng-container matColumnDef="dateandtime">
                <th
                  mat-header-cell
                  *matHeaderCellDef
                  (click)="onSortData('createdAt')"
                >
                  {{ "date_and_time" | translate }}
                  <span
                    *ngIf="sortColumn === 'createdAt'"
                    class="material-icons sorticon"
                    >{{ sortIconClass }}</span
                  >
                </th>
                <td mat-cell *matCellDef="let element">
                  {{
                    element.createdAt
                      | date
                        : "dd-MM-yyyy,
                                      h:mm a"
                  }}
                </td>
              </ng-container>
                <ng-container matColumnDef="patientname">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('pharmacy_name')"
                  >
                    {{ "pharmacy_name" | translate }}
                    <span
                      *ngIf="sortColumn === 'pharmacy_name'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <span class="user_image_wrapper">
                      <img
                        *ngIf="element.pharmacy_profile_picture"
                        src="{{ element.pharmacy_profile_picture }}"
                        class="user_image"
                      />
                      <img
                        *ngIf="!element.pharmacy_profile_picture"
                        src="../../../../assets/img/user_profile.svg"
                        class="user_image"
                      />
                    </span>
                    <span class="name_user">{{ element.pharmacy_name }} </span>
                  </td>
                </ng-container>

                <ng-container matColumnDef="orderid">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('order_id')"
                  >
                    {{ "order_id" | translate }}
                    <span
                      *ngIf="sortColumn === 'order_id'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.order_id }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="payemttype">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('payment_type')"
                  >
                    {{ "payment_type" | translate }}
                    <span
                      *ngIf="sortColumn === 'payment_type'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.payment_type }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="paidbypatient">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('medicine_bill.co_pay')"
                  >
                    {{ "paid_by_patient" | translate }}
                    <span
                      *ngIf="sortColumn === 'medicine_bill.co_pay'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.medicine_bill.co_pay || 0 }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="insurancetobepaid">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('medicine_bill.insurance_paid')"
                  >
                    {{ "insurance_to_be_paid" | translate }}
                    <span
                      *ngIf="sortColumn === 'medicine_bill.insurance_paid'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.medicine_bill.insurance_paid || 0 }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="totalmedicinecost">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('medicine_bill.total_medicine_cost')"
                  >
                    {{ "total_medicine_cost" | translate }}
                    <span
                      *ngIf="sortColumn === 'medicine_bill.total_medicine_cost'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.medicine_bill.total_medicine_cost || 0 }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('status')"
                  >
                    {{ "status" | translate }}
                    <span
                      *ngIf="sortColumn === 'status'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <!-- <td mat-cell *matCellDef="let element"><a class="rejected">Rejected</a></td>
                                    <td mat-cell *matCellDef="let element"><a class="approved">Approved</a></td>
                                    <td mat-cell *matCellDef="let element"><a class="todo">To Do</a></td> -->
                  <td mat-cell *matCellDef="let element">
                    <a class="solved">{{ element.status }}</a>
                  </td>
                </ng-container>

                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef>
                    {{ "action" | translate }}
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <div class="icon_group">
                      <a
                        class="svgicon"
                        [routerLink]="['/patient/presciptionorder/completed']"
                        [queryParams]="{
                          orderId: element._id,
                          pharmacyId: element.for_portal_user
                        }"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="9"
                          viewBox="0 0 16 9"
                          fill="none"
                        >
                          <path
                            d="M8 0C2.7512 0 0 3.88286 0 4.5C0 5.11554 2.7512 9 8 9C13.248 9 16 5.11554 16 4.5C16 3.88286 13.248 0 8 0ZM8 7.96098C6.036 7.96098 4.444 6.4117 4.444 4.5C4.444 2.5883 6.036 1.03741 8 1.03741C9.964 1.03741 11.5552 2.5883 11.5552 4.5C11.5552 6.4117 9.964 7.96098 8 7.96098ZM8 4.5C7.6744 4.1408 8.5304 2.76911 8 2.76911C7.0176 2.76911 6.2216 3.54455 6.2216 4.5C6.2216 5.45545 7.0176 6.23089 8 6.23089C8.9816 6.23089 9.7784 5.45545 9.7784 4.5C9.7784 4.06045 8.2768 4.80455 8 4.5Z"
                          />
                        </svg>
                      </a>
                    </div>
                    <ng-container *ngIf="element.order_complete == 'false'">
                      <button
                        type="button"
                        class="btn btn-primary"
                        *ngIf="
                          element.payment_type == 'pre' &&
                          element.subscriber_id != null
                        "
                        [routerLink]="['/patient/medicineclaims/submitclaim']"
                        [queryParams]="{
                          orderId: element._id,
                          pharmacy_id: element.for_portal_user
                        }"
                      >
                        {{ "submit_claim" | translate }}
                      </button>
                    </ng-container>
                  </td>
                </ng-container>

                <tr
                  mat-header-row
                  *matHeaderRowDef="completeddisplayedColumns"
                ></tr>
                <tr
                  mat-row
                  *matRowDef="let row; columns: completeddisplayedColumns"
                ></tr>
              </table>
            </div>
            <mat-paginator
              class="pagination"
              [length]="totalLength"
              (page)="handlePageEvent($event)"
              [pageSize]="pageSize"
              [pageSizeOptions]="[5, 10, 20]"
              showFirstLastButtons
              aria-label="Select page of periodic elements"
            >
            </mat-paginator>
          </div>
        </div>
      </mat-tab>
      <mat-tab>
        <ng-template mat-tab-label>
          <div class="mat_tab_label_inner" [ngClass]="{ lightred: true }">
            <div class="counter_wrap">
              <span class="counter">{{
                getOrderStatusCount("cancelled")
              }}</span>
              <div class="title">{{ "cancelled" | translate }}</div>
            </div>
            <div class="btn_svg">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="26"
                height="38"
                viewBox="0 0 26 38"
                fill="none"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M2.36454 2.37574V4.75149H9.45815H16.5518V2.37574V0H9.45815H2.36454V2.37574ZM4.72907 8.23767V9.49659L3.24252 10.2535C1.91624 10.9289 1.70313 11.0635 1.2654 11.5033C0.808598 11.9623 0.329409 12.7456 0.184064 13.2708L0.137808 13.4378H9.45815H18.7785L18.7286 13.2708C18.5152 12.5554 17.9234 11.6721 17.3479 11.2102C17.1335 11.0381 16.3347 10.5834 15.5727 10.1998L14.1872 9.50223V8.24049V6.97874H9.45815H4.72907V8.23767ZM0 22.384V29.1028H4.87915C8.71967 29.1028 9.76376 29.0831 9.78379 29.01C9.79775 28.959 9.8964 28.6103 10.0029 28.235C10.855 25.2348 13.2607 22.8193 16.3027 21.9095C16.8894 21.734 18.1199 21.5313 18.6023 21.5306L18.9163 21.5302V18.5976V15.6651H9.45815H0V22.384ZM15 20.1196V21.2332H9.45815H3.91626V20.1196V19.0059H9.45815H15V20.1196ZM10.5665 24.5741V25.6877H7.24139H3.91626V24.5741V23.4605H7.24139H10.5665V24.5741ZM17.6854 23.8672C15.2915 24.3037 13.2369 25.9793 12.3454 28.2221C11.9564 29.2008 11.8667 29.6995 11.8667 30.8847C11.8667 32.0699 11.9564 32.5685 12.3454 33.5472C13.0084 35.2152 14.4756 36.7249 16.1148 37.4257C18.2357 38.3325 20.6626 38.1575 22.6196 36.9567C23.4371 36.455 24.4604 35.4269 24.9597 34.6055C26.3468 32.3235 26.3468 29.4458 24.9597 27.1638C24.4604 26.3424 23.4371 25.3143 22.6196 24.8126C21.1648 23.9199 19.3274 23.5679 17.6854 23.8672ZM18.1576 28.5261L18.9163 29.2858L19.6926 28.5085L20.4689 27.7312L21.2619 28.5279L22.0549 29.3247L21.2813 30.1047L20.5076 30.8847L21.2813 31.6646L22.0549 32.4446L21.2619 33.2414L20.4689 34.0382L19.6926 33.2608L18.9163 32.4835L18.14 33.2608L17.3637 34.0382L16.5707 33.2414L15.7777 32.4446L16.5513 31.6646L17.325 30.8847L16.5518 30.1051L15.7786 29.3256L16.5518 28.546C16.977 28.1173 17.3417 27.7665 17.362 27.7665C17.3823 27.7665 17.7404 28.1083 18.1576 28.5261ZM0 33.4831V35.6361H5.43718C8.42765 35.6361 10.8633 35.6111 10.8497 35.5805C10.8362 35.5498 10.7026 35.2742 10.5528 34.968C10.0859 34.0134 9.79886 32.9803 9.64007 31.6828L9.59684 31.3301H4.79846H0V33.4831Z"
                  fill="#FF7777"
                />
              </svg>
            </div>
          </div>
        </ng-template>

        <div class="tab_content">
          <div class="table-wrap">
            <div class="table-inner">
              <table
                mat-table
                [dataSource]="dataSource"
                class="mat-elevation-z8"
              >
              <ng-container matColumnDef="dateandtime">
                <th
                  mat-header-cell
                  *matHeaderCellDef
                  (click)="onSortData('createdAt')"
                >
                  {{ "date_and_time" | translate }}
                  <span
                    *ngIf="sortColumn === 'createdAt'"
                    class="material-icons sorticon"
                    >{{ sortIconClass }}</span
                  >
                </th>
                <td mat-cell *matCellDef="let element">
                  {{
                    element.createdAt
                      | date
                        : "dd-MM-yyyy,
                                      h:mm a"
                  }}
                </td>
              </ng-container>

                <ng-container matColumnDef="patientname">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('pharmacy_name')"
                  >
                    {{ "pharmacy_name" | translate }}
                    <span
                      *ngIf="sortColumn === 'pharmacy_name'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <span class="user_image_wrapper">
                      <img
                        *ngIf="element.pharmacy_profile_picture"
                        src="{{ element.pharmacy_profile_picture }}"
                        class="user_image"
                      />
                      <img
                        *ngIf="!element.pharmacy_profile_picture"
                        src="../../../../assets/img/user_profile.svg"
                        class="user_image"
                      />
                    </span>
                    <span class="name_user">{{ element.pharmacy_name }} </span>
                  </td>
                </ng-container>

                <ng-container matColumnDef="orderid">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('order_id')"
                  >
                    {{ "order_id" | translate }}
                    <span
                      *ngIf="sortColumn === 'order_id'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.order_id }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="cancelby">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('cancelled_by')"
                  >
                    {{ "cancel_by" | translate }}
                    <span
                      *ngIf="sortColumn === 'cancelled_by'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.cancelled_by }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('status')"
                  >
                    {{ "status" | translate }}
                    <span
                      *ngIf="sortColumn === 'status'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <!-- <td mat-cell *matCellDef="let element"><a class="rejected">Rejected</a></td>
                                    <td mat-cell *matCellDef="let element"><a class="approved">Approved</a></td>
                                    <td mat-cell *matCellDef="let element"><a class="todo">To Do</a></td> -->
                  <td mat-cell *matCellDef="let element">
                    <a class="rejected">{{ element.status }}</a>
                  </td>
                </ng-container>

                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef>
                    {{ "action" | translate }}
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <div class="icon_group">
                      <a
                        class="svgicon"
                        [routerLink]="[
                          '/patient/presciptionorder/cancelledorder'
                        ]"
                        [queryParams]="{
                          orderId: element._id,
                          pharmacyId: element.for_portal_user
                        }"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="9"
                          viewBox="0 0 16 9"
                          fill="none"
                        >
                          <path
                            d="M8 0C2.7512 0 0 3.88286 0 4.5C0 5.11554 2.7512 9 8 9C13.248 9 16 5.11554 16 4.5C16 3.88286 13.248 0 8 0ZM8 7.96098C6.036 7.96098 4.444 6.4117 4.444 4.5C4.444 2.5883 6.036 1.03741 8 1.03741C9.964 1.03741 11.5552 2.5883 11.5552 4.5C11.5552 6.4117 9.964 7.96098 8 7.96098ZM8 4.5C7.6744 4.1408 8.5304 2.76911 8 2.76911C7.0176 2.76911 6.2216 3.54455 6.2216 4.5C6.2216 5.45545 7.0176 6.23089 8 6.23089C8.9816 6.23089 9.7784 5.45545 9.7784 4.5C9.7784 4.06045 8.2768 4.80455 8 4.5Z"
                          />
                        </svg>
                      </a>
                    </div>
                  </td>
                </ng-container>

                <tr
                  mat-header-row
                  *matHeaderRowDef="cancelleddisplayedColumns"
                ></tr>
                <tr
                  mat-row
                  *matRowDef="let row; columns: cancelleddisplayedColumns"
                ></tr>
              </table>
            </div>
            <mat-paginator
              class="pagination"
              [length]="totalLength"
              (page)="handlePageEvent($event)"
              [pageSize]="pageSize"
              [pageSizeOptions]="[5, 10, 20]"
              showFirstLastButtons
              aria-label="Select page of periodic elements"
            >
            </mat-paginator>
          </div>
        </div>
      </mat-tab>
      <mat-tab>
        <ng-template mat-tab-label>
          <div class="mat_tab_label_inner" [ngClass]="{ lightorange: true }">
            <div class="counter_wrap">
              <span class="counter">{{ getOrderStatusCount("rejected") }}</span>
              <div class="title">{{ "rejected" | translate }}</div>
            </div>
            <div class="btn_svg">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="30"
                height="42"
                viewBox="0 0 30 42"
                fill="none"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M21.4366 21.7025C22.1734 20.7498 23.2579 20.128 24.4523 19.9734C25.6467 19.8187 26.8537 20.1438 27.8088 20.8774C28.7623 21.6137 29.3846 22.6982 29.5393 23.8929C29.694 25.0876 29.3684 26.2948 28.6339 27.2497C25.488 31.3279 22.3421 35.3692 19.1929 39.4542C18.4618 40.4022 17.3842 41.0212 16.197 41.1753C15.0097 41.3294 13.8098 41.0059 12.8609 40.2758C11.9152 39.5431 11.2979 38.4658 11.1439 37.2794C10.9899 36.0929 11.3118 34.8937 12.0393 33.9439C15.1885 29.8522 18.284 25.7941 21.4299 21.7025H21.4366ZM1.48818 28.5409H13.468L14.729 26.9009C16.2282 24.9422 17.7239 22.9937 19.7329 20.3844C20.2317 19.7385 20.8457 19.1904 21.5439 18.7679V14.2771C21.5775 11.5505 20.1756 8.53208 18.6999 6.5634L18.2304 5.93288H19.0319C19.4767 5.93288 19.9032 5.75621 20.2177 5.44173C20.5322 5.12725 20.7088 4.70072 20.7088 4.25598V1.67691C20.7045 1.23352 20.5264 0.809524 20.2129 0.495986C19.8993 0.182448 19.4753 0.00437217 19.0319 3.49184e-06H2.70226C2.25538 -0.000903315 1.82625 0.174841 1.50838 0.488943C1.19051 0.803046 1.00966 1.23005 1.00524 1.67691V4.23921C1.00524 4.68395 1.18191 5.11048 1.49639 5.42496C1.81087 5.73944 2.2374 5.91611 2.68214 5.91611H3.29924C3.12819 6.15088 2.96386 6.37894 2.78611 6.607C1.08573 8.90771 -0.17195 11.8523 0.0192169 14.8506V33.2966C0.00967464 33.9785 0.263095 34.6378 0.72687 35.1378C1.18299 35.5805 1.84704 35.8086 2.75927 35.7817H9.00741C9.0452 35.5011 9.10122 35.2233 9.1751 34.95C9.23101 34.7386 9.29818 34.5304 9.37633 34.3262H3.1349C2.69764 34.3572 2.2659 34.2137 1.93424 33.9271C1.69535 33.6702 1.549 33.3409 1.51837 32.9914C1.51837 32.9176 1.48818 28.5442 1.48818 28.5442V28.5409ZM9.82239 16.8763H11.7374C11.91 16.8763 12.0755 16.9449 12.1975 17.0669C12.3195 17.1889 12.388 17.3544 12.388 17.527V19.7137H14.5747C14.7467 19.7137 14.9117 19.7818 15.0336 19.903C15.1555 20.0243 15.2245 20.189 15.2254 20.361V22.2726C15.2254 22.4452 15.1568 22.6107 15.0348 22.7327C14.9128 22.8547 14.7473 22.9233 14.5747 22.9233H12.3813V25.1099C12.3805 25.2808 12.3125 25.4444 12.192 25.5655C12.0715 25.6866 11.9082 25.7555 11.7374 25.7572H9.82239C9.65041 25.7572 9.48542 25.6891 9.3635 25.5678C9.24158 25.4465 9.17264 25.2819 9.17175 25.1099V22.9233H6.98507C6.81309 22.9224 6.64846 22.8534 6.52716 22.7315C6.40587 22.6096 6.33778 22.4446 6.33778 22.2726V20.361C6.33867 20.1896 6.40714 20.0254 6.52834 19.9042C6.64954 19.783 6.81367 19.7145 6.98507 19.7137H9.17175V17.527C9.17175 17.3544 9.2403 17.1889 9.36232 17.0669C9.48433 16.9449 9.64983 16.8763 9.82239 16.8763ZM19.9576 14.086H1.60557C1.60557 13.3917 1.56197 14.1162 1.63575 13.4689C1.98287 11.1872 2.86428 9.01991 4.20812 7.14361C4.47978 6.7814 4.75814 6.40242 5.04657 5.9966H16.4864C16.7413 6.35211 17.0163 6.71767 17.288 7.08324C18.5255 8.7266 19.7027 11.4432 19.9207 13.4924C19.9442 13.6936 19.9576 14.0927 19.9576 14.0927V14.086ZM22.4025 33.6118L16.9526 29.4196L13.0085 34.5442C12.4544 35.2677 12.2093 36.1813 12.3268 37.085C12.4444 37.9887 12.9149 38.8092 13.6357 39.367C14.3591 39.9156 15.2696 40.1571 16.1698 40.0391C17.07 39.9211 17.8875 39.4531 18.445 38.7364L22.4025 33.6185V33.6118Z"
                  fill="#FF7354"
                />
              </svg>
            </div>
          </div>
        </ng-template>

        <div class="tab_content">
          <div class="table-wrap">
            <div class="table-inner">
              <table
                mat-table
                [dataSource]="dataSource"
                class="mat-elevation-z8"
              >
              <ng-container matColumnDef="dateandtime">
                <th
                  mat-header-cell
                  *matHeaderCellDef
                  (click)="onSortData('createdAt')"
                >
                  {{ "date_and_time" | translate }}
                  <span
                    *ngIf="sortColumn === 'createdAt'"
                    class="material-icons sorticon"
                    >{{ sortIconClass }}</span
                  >
                </th>
                <td mat-cell *matCellDef="let element">
                  {{
                    element.createdAt
                      | date
                        : "dd-MM-yyyy,
                                      h:mm a"
                  }}
                </td>
              </ng-container>
              
                <ng-container matColumnDef="patientname">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('pharmacy_name')"
                  >
                    {{ "pharmacy_name" | translate }}
                    <span
                      *ngIf="sortColumn === 'pharmacy_name'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <span class="user_image_wrapper">
                      <img
                        *ngIf="element.pharmacy_profile_picture"
                        src="{{ element.pharmacy_profile_picture }}"
                        class="user_image"
                      />
                      <img
                        *ngIf="!element.pharmacy_profile_picture"
                        src="../../../../assets/img/user_profile.svg"
                        class="user_image"
                      />
                    </span>
                    <span class="name_user">{{ element.pharmacy_name }} </span>
                  </td>
                </ng-container>

                <ng-container matColumnDef="orderid">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('order_id')"
                  >
                    {{ "order_id" | translate }}
                    <span
                      *ngIf="sortColumn === 'order_id'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.order_id }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('status')"
                  >
                    {{ "status" | translate }}
                    <span
                      *ngIf="sortColumn === 'status'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <!-- <td mat-cell *matCellDef="let element"><a class="rejected">Rejected</a></td>
                                    <td mat-cell *matCellDef="let element"><a class="approved">Approved</a></td>
                                    <td mat-cell *matCellDef="let element"><a class="todo">To Do</a></td> -->
                  <td mat-cell *matCellDef="let element">
                    <a class="rejected">{{ element.status }}</a>
                  </td>
                </ng-container>

                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef>
                    {{ "action" | translate }}
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <div class="icon_group">
                      <a
                        class="svgicon"
                        [routerLink]="[
                          '/patient/presciptionorder/rejectedorder'
                        ]"
                        [queryParams]="{
                          orderId: element._id,
                          pharmacyId: element.for_portal_user
                        }"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="9"
                          viewBox="0 0 16 9"
                          fill="none"
                        >
                          <path
                            d="M8 0C2.7512 0 0 3.88286 0 4.5C0 5.11554 2.7512 9 8 9C13.248 9 16 5.11554 16 4.5C16 3.88286 13.248 0 8 0ZM8 7.96098C6.036 7.96098 4.444 6.4117 4.444 4.5C4.444 2.5883 6.036 1.03741 8 1.03741C9.964 1.03741 11.5552 2.5883 11.5552 4.5C11.5552 6.4117 9.964 7.96098 8 7.96098ZM8 4.5C7.6744 4.1408 8.5304 2.76911 8 2.76911C7.0176 2.76911 6.2216 3.54455 6.2216 4.5C6.2216 5.45545 7.0176 6.23089 8 6.23089C8.9816 6.23089 9.7784 5.45545 9.7784 4.5C9.7784 4.06045 8.2768 4.80455 8 4.5Z"
                          />
                        </svg>
                      </a>
                    </div>
                  </td>
                </ng-container>

                <tr
                  mat-header-row
                  *matHeaderRowDef="rejecteddisplayedColumns"
                ></tr>
                <tr
                  mat-row
                  *matRowDef="let row; columns: rejecteddisplayedColumns"
                ></tr>
              </table>
            </div>
            <mat-paginator
              class="pagination"
              [length]="totalLength"
              (page)="handlePageEvent($event)"
              [pageSize]="pageSize"
              [pageSizeOptions]="[5, 10, 20]"
              showFirstLastButtons
              aria-label="Select page of periodic elements"
            >
            </mat-paginator>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>
