<div class="health_plan dashboard_main_content">
  <div class="top_bar d-block">
    <div class="row">
      <div class="col-xl-8 col-xxl-9 col-lg-12">
        <div class="left_part">
          <div class="row">
            <div class="col-xxl-5 col-md-4 col-12 search_bar common_content">
              <div class="input-group" >
                <button class="btn search-btn">
                  <mat-icon>search</mat-icon>
                </button>
                <input type="search" class="form-control" placeholder="{{'search'|translate}}" aria-label="Search"
                  (keyup)="handleSearchFilter($event)" (search)="handleSearchFilter($event)" />
                <button class="btn filter-btn">
                  <mat-icon>filter_alt</mat-icon>
                </button>
              </div>
            </div>
            <div class="col-xxl-7 col-md-8 col-12 mt-3 mt-md-0 content_wrap">
              <div class="policy d-flex align-items-sm-center align-items-start flex-column flex-sm-row">
                <label class="me-0 me-sm-2  mb-3 mb-sm-0">{{'health_plan_type'|translate}}:</label>
                <div class="form_field_wrapper">
                  <mat-form-field appearance="fill">
                    <mat-select [(value)]="defaultHealthPlan" (selectionChange)="getHealthPlan($event)">
                      <mat-option value="">{{'all_health_plan'|translate}}</mat-option>
                      <mat-option value="true">{{'default_health_plan'|translate}}</mat-option>
                      <mat-option value="false">{{'actual_health_plan'|translate}}</mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-4 col-xxl-3 col-lg-12 mt-3 mt-xl-0">
        <div class="primary_btn justify-content-end">

          <ng-container  *ngIf="giveInnerPermission('add')">

            <button type="button" class="btn btn-primary" (click)="openVerticallyCenteredAddplan(addhealthplancontent)">
              <a class="btn_svg">
                <svg xmlns="http://www.w3.org/2000/svg" width="15" height="18" viewBox="0 0 15 18" fill="none">
                  <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M3.30524 0.0827418C2.45473 0.279185 1.74256 0.710972 1.1383 1.39669C0.617787 1.98733 0.294089 2.62138 0.0925399 3.44513L0.000194303 3.82243V8.97532C0.000194303 14.6951 -0.0167024 14.3029 0.264637 15.1118C0.767629 16.5578 2.00379 17.6649 3.41158 17.9299C3.9046 18.0228 11.0724 18.0236 11.5627 17.9309C13.0347 17.6525 14.2649 16.5174 14.7627 14.9782C14.9946 14.2613 14.9997 14.1647 14.9998 10.5064L15 7.18025L12.7412 7.17962C10.2094 7.17894 10.2091 7.1789 9.68232 6.88299C8.9551 6.47439 8.48379 5.75649 8.35241 4.85723C8.32863 4.69462 8.31216 3.64858 8.312 2.29135L8.31169 0L5.97469 0.00295656C3.87026 0.00565972 3.60461 0.0136002 3.30524 0.0827418ZM9.99355 2.59997V4.67168L10.0971 4.89605C10.225 5.17325 10.458 5.34747 10.7505 5.38468C10.8612 5.39875 11.7483 5.40462 12.7218 5.39773L14.4918 5.38519L12.2427 2.9567L9.99355 0.528255V2.59997ZM7.87179 7.30206C8.05663 7.40445 8.17393 7.53956 8.25114 7.73913C8.29996 7.86525 8.31169 8.08767 8.31169 8.88675V9.87796L9.26018 9.89126C10.1436 9.9036 10.2194 9.91078 10.3651 9.99546C10.4512 10.0455 10.5603 10.1313 10.6077 10.1861C10.8993 10.5237 10.8745 11.1318 10.5558 11.4545C10.3318 11.6814 10.2333 11.6996 9.2321 11.6996H8.31169L8.31083 12.7027C8.31009 13.5889 8.30152 13.7255 8.23753 13.8748C7.94039 14.5679 7.0713 14.575 6.74358 13.887C6.67622 13.7456 6.66895 13.6312 6.66895 12.715V11.6996H5.74854C5.00493 11.6996 4.80021 11.687 4.68271 11.634C4.37118 11.4935 4.16572 11.1672 4.16572 10.813C4.16572 10.4402 4.31404 10.1707 4.61552 9.99546C4.76121 9.91078 4.83705 9.9036 5.72046 9.89126L6.66895 9.87796V8.88675C6.66895 8.08767 6.68068 7.86525 6.72949 7.73913C6.91466 7.2605 7.43634 7.06094 7.87179 7.30206Z" />
                </svg></a>{{ "add_plan" | translate }}
            </button>
          </ng-container>
          
          <ng-container  *ngIf="giveInnerPermission('export')">
            <button type="button" class="btn btn-primary" (click)="handlePlansExport()">
              <mat-icon>share</mat-icon>{{'export'|translate}}
            </button>
          </ng-container>
         
        </div>
      </div>
    </div>
  </div>
  <div class="btns d-flex flex-column flex-sm-row align-items-start">
    <ng-container  *ngIf="giveInnerPermission('deletedAll')">
    <button type="button" class="btn btn-primary d-inline-flex align-items-center me-0 me-sm-3 mb-2 mb-sm-0"
      (click)="openVerticallyCenteredsecond(deletePopupAll, '')" [disabled]="dataSource?.length === 0">
      <mat-icon>delete</mat-icon>{{'delete_all_health_plans'|translate}}
    </button>
  </ng-container>

    <ng-container  *ngIf="giveInnerPermission('selectedDelete')">

    <button type="button" class="btn btn-primary d-inline-flex align-items-center" (click)="openVerticallyCenteredsecond(deletePopupSelected, '')"
      [disabled]="selectedLabs?.length === 0">
      <mat-icon>delete</mat-icon>{{'delete_selected_health_plans'|translate}}
    </button>
  </ng-container>
  </div>
  <div class="bottom_bar mt-4">
    <div class="table-wrap">
      <div class="table-inner" #TABLE>
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
          <!-- Policy ID Column -->
          <!-- <ng-container matColumnDef="policyid">
            <th mat-header-cell *matHeaderCellDef>
              {{ "policy_ID" | translate }}
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.policyid }}
            </td>
          </ng-container> -->

          <!-- Type of Insurance -->
          <!-- <ng-container matColumnDef="typeofinsurance">
            <th mat-header-cell *matHeaderCellDef>
              {{ "type_of_insurance" | translate }}
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.typeofinsurance }}
            </td>
          </ng-container> -->

          <!-- Insurance Holder -->
          <!-- <ng-container matColumnDef="insuranceholder">
            <th mat-header-cell *matHeaderCellDef>
              {{ "insurance_holder" | translate }}
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.insuranceholder }} 
              Company Name
            </td>
          </ng-container> -->

          <!-- Health Plan Name -->
          <ng-container matColumnDef="createddate">
            <th mat-header-cell *matHeaderCellDef  (click)="onSortData('createdAt')">{{'created_date'|translate}}
            <span *ngIf="sortColumn === 'createdAt'" class="material-icons sorticon">{{ sortIconClass }}</span>

            </th>
            <td mat-cell *matCellDef="let element">
              {{ element?.createdAt | date:"dd/MM/YYYY" }}
            </td>
          </ng-container>

          <!-- Health Plan Name -->
          <ng-container matColumnDef="healthplanname">
            <th mat-header-cell *matHeaderCellDef  (click)="onSortData('plan_name')">
              {{ "health_plan_name" | translate }}
            <span *ngIf="sortColumn === 'plan_name'" class="material-icons sorticon">{{ sortIconClass }}</span>

            </th>
            <td mat-cell *matCellDef="let element">
              {{ element?.plan_name }}
            </td>
          </ng-container>

          <!-- Health Plan Name -->
          <ng-container matColumnDef="reimbersmentrate">
            <th mat-header-cell *matHeaderCellDef  (click)="onSortData('reimbursment_rate')">{{'reimbursment_rate'|translate}}
            <span *ngIf="sortColumn === 'reimbursment_rate'" class="material-icons sorticon">{{ sortIconClass }}</span>

            </th>

            <td mat-cell *matCellDef="let element">
              {{
              element?.reimbursment_rate
              ? element?.reimbursment_rate + " %"
              : "-"
              }}
            </td>
          </ng-container>

          <!-- Category -->
          <ng-container matColumnDef="category">
            <th mat-header-cell *matHeaderCellDef>
              {{ "category" | translate }}
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.planService[0]?.has_category }}
            </td>
          </ng-container>

          <!-- Service -->
          <ng-container matColumnDef="service">
            <th mat-header-cell *matHeaderCellDef>
              {{ "service" | translate }}
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.planService[0]?.service }}
            </td>
          </ng-container>

          <!-- Reimburs-ment Rate -->
          <ng-container matColumnDef="reimbursmentrate">
            <th mat-header-cell *matHeaderCellDef>
              {{ "reimbursment_rate" | translate }}        
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.planService[0]?.reimbursment_rate + " %" }}
            </td>
          </ng-container>

          <!-- Service Limit -->
          <ng-container matColumnDef="servicelimit">
            <th mat-header-cell *matHeaderCellDef>
              {{ "service_limit" | translate }}
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.planService[0]?.in_limit?.category_limit }}
            </td>
          </ng-container>

          <!-- Service Condition -->
          <ng-container matColumnDef="repaymentcondition">
            <th mat-header-cell *matHeaderCellDef>
              {{ "repayment_condition" | translate }}
            </th>
            <td mat-cell *matCellDef="let element">
              {{
              element.planService[0]?.has_conditions?.repayment_condition
              .max_no
              }}
              Maximum For
              {{
              element.planService[0]?.has_conditions?.repayment_condition
              .unit_no
              }}
              {{
              element.planService[0]?.has_conditions?.repayment_condition.unit
              }}
            </td>
          </ng-container>

          <!-- Category Limit-->
          <ng-container matColumnDef="categorylimit">
            <th mat-header-cell *matHeaderCellDef>
              {{ "category_limit" | translate }}
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.planService[0]?.in_limit?.category_limit }}
            </td>
          </ng-container>

          <!--Category Condition-->
          <ng-container matColumnDef="categorycondition">
            <th mat-header-cell *matHeaderCellDef>
              {{ "category_condition" | translate }}
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.planService[0]?.has_conditions?.category_condition }}
            </td>
          </ng-container>

          <!-- Pre Authorization-->
          <ng-container matColumnDef="preauthorization">
            <th mat-header-cell *matHeaderCellDef>
              {{ "pre_authorization" | translate }}
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.planService[0]?.pre_authorization }}
            </td>
          </ng-container>

          <!-- Waiting Period -->
          <ng-container matColumnDef="waitingperiod">
            <th mat-header-cell *matHeaderCellDef>
              {{ "waiting_period" | translate }}
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.planService[0]?.waiting_period?.duration.min_no }}
              {{ element.planService[0]?.waiting_period?.duration.unit }}
            </td>
          </ng-container>

          <!-- Waiting Period Redeemed -->
          <ng-container matColumnDef="waitingperiodredeemed">
            <th mat-header-cell *matHeaderCellDef>
              {{ "waiting_period_redeemed" | translate }}
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.planService[0]?.waiting_period?.redeemed }}
            </td>
          </ng-container>

          <!-- Health Plan Type -->
          <ng-container matColumnDef="healthplantype">
            <th mat-header-cell *matHeaderCellDef  (click)="onSortData('default')">
              {{ "health_plan_type" | translate }}
            <span *ngIf="sortColumn === 'default'" class="material-icons sorticon">{{ sortIconClass }}</span>

            </th>
            <td mat-cell *matCellDef="let element">
              {{
              element?.default === true
              ? "Default Health Plan"
              : "Actual Health Plan"
              }}
            </td>
          </ng-container>

          <!--Action column -->
          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef>
              {{ "action" | translate }}
              <ng-container  *ngIf="giveInnerPermission('selectedDelete')">
              <mat-checkbox (change)="makeSelectAll($event)" style="margin-left: 10px"
                [checked]="isAllSelected()"></mat-checkbox>
              </ng-container>
            </th>
            <td mat-cell *matCellDef="let element">
              <div class="icon_group">

                <ng-container  *ngIf="giveInnerPermission('view')">
                  <mat-icon [routerLink]="[
                  '/insurance/insurance-healthplan/service',
                  element?._id
                ]">visibility
              </mat-icon>

                </ng-container>
               
                <ng-container *ngIf="giveInnerPermission('edit')">
                
                <a class="svgicon" (click)="
                    openVerticallyCenteredEditplan(
                      edithealthplancontent,
                      element?._id
                    )
                    
                  ">
                  <svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M10.5142 0.0229199C10.3428 0.0573628 10.1536 0.141476 10.0166 0.244171C9.94218 0.300012 9.72307 0.505285 9.52976 0.700352L9.17827 1.05501L10.063 1.94044L10.9477 2.82587L11.3237 2.45061C11.7438 2.03136 11.8395 1.90759 11.9242 1.6743C12.0906 1.21545 11.979 0.720952 11.6302 0.371924C11.3334 0.0748893 10.9118 -0.0569464 10.5142 0.0229199ZM6.64187 3.59457C5.03559 5.20381 4.6412 5.61079 4.62404 5.67686C4.61229 5.72203 4.52518 6.14963 4.43044 6.62709C4.31571 7.20542 4.26371 7.51693 4.27468 7.56031C4.29571 7.64339 4.36459 7.71235 4.44763 7.7334C4.5351 7.75559 6.32498 7.39974 6.41623 7.34202C6.45238 7.31917 7.36806 6.41253 8.4511 5.32729L10.4203 3.35415L9.54134 2.47426C9.05794 1.99034 8.65701 1.59439 8.65039 1.59439C8.64378 1.59439 7.73994 2.49446 6.64187 3.59457ZM1.27858 2.01904C0.801035 2.08971 0.368127 2.40948 0.154276 2.84954C-0.00886787 3.18522 -0.00024066 2.95256 0.000204767 7.00711C0.000673638 11.0892 -0.00959462 10.8343 0.168764 11.1905C0.339315 11.5312 0.644737 11.7944 1.03519 11.9371L1.20715 12H4.99328H8.7794L8.96695 11.9363C9.45195 11.7716 9.813 11.3872 9.9558 10.8835C9.99568 10.7429 9.99847 10.5901 9.99847 8.54919V6.36534L9.92778 6.25089C9.82569 6.08565 9.65157 5.9963 9.46356 6.01273C9.29873 6.02711 9.17157 6.10357 9.07852 6.2443L9.01384 6.34207L9.00212 8.50235C8.9914 10.4772 8.98697 10.6689 8.95056 10.7354C8.8943 10.8382 8.76044 10.9493 8.65672 10.9794C8.59422 10.9975 7.50926 11.0029 4.94437 10.998L1.32036 10.9911L1.22857 10.927C1.1781 10.8917 1.11044 10.8238 1.07821 10.7762L1.0196 10.6896L1.01353 7.03304C1.0076 3.46853 1.00858 3.37432 1.0524 3.28904C1.07713 3.24094 1.12735 3.17309 1.16396 3.13829C1.31372 2.99606 1.21017 3.00214 3.48356 3.00214C5.06037 3.00214 5.58551 2.99517 5.6587 2.97328C5.79228 2.93335 5.9376 2.78251 5.9765 2.64347C6.03895 2.42022 5.94597 2.18618 5.7487 2.07014L5.63797 2.00498L3.52806 2.00168C2.3676 1.99987 1.35533 2.00766 1.27858 2.01904Z" />
                  </svg>
                </a>

              </ng-container>

              <ng-container  *ngIf="giveInnerPermission('selectedDelete')">

                <mat-checkbox style="margin-left: 10px" [checked]="selectedLabs.includes(element?._id)"
                  (change)="handleCheckBoxChange($event, element?._id)"></mat-checkbox>
                </ng-container>
                  
                  <!-- <a
                  *ngIf="selectedLabs?.length==0"
                    class="svgicon"
                    (click)="
                    deletemanual(deletePopupSelected, element?._id)
                  "
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="19"
                      height="19"
                      viewBox="0 0 19 19"
                      fill="none"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M15.6025 4.45371C15.8943 4.45371 16.1372 4.69596 16.1372 5.0042V5.2892C16.1372 5.58995 15.8943 5.8397 15.6025 5.8397H3.1726C2.8801 5.8397 2.63721 5.58995 2.63721 5.2892V5.0042C2.63721 4.69596 2.8801 4.45371 3.1726 4.45371H5.35938C5.80359 4.45371 6.19018 4.13796 6.29011 3.69247L6.40463 3.18097C6.58261 2.48423 7.16833 2.02148 7.83866 2.02148H10.9358C11.5988 2.02148 12.1911 2.48423 12.3625 3.14422L12.485 3.69172C12.5842 4.13796 12.9708 4.45371 13.4158 4.45371H15.6025ZM14.4916 14.872C14.7199 12.7443 15.1196 7.68933 15.1196 7.63833C15.1342 7.48383 15.0839 7.33758 14.9839 7.21983C14.8767 7.10958 14.741 7.04433 14.5915 7.04433H4.1886C4.03834 7.04433 3.89537 7.10958 3.79617 7.21983C3.69551 7.33758 3.64591 7.48383 3.65321 7.63833C3.65455 7.6477 3.66889 7.82576 3.69287 8.12345C3.79939 9.44588 4.09608 13.1291 4.2878 14.872C4.42347 16.156 5.26594 16.963 6.48625 16.9922C7.42793 17.014 8.39805 17.0215 9.39005 17.0215C10.3244 17.0215 11.2734 17.014 12.2442 16.9922C13.5069 16.9705 14.3486 16.1777 14.4916 14.872Z"
                      />
                    </svg>
                  </a> -->
              </div>

            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
        <div *ngIf="dataSource?.length < 1" class="text-center">
          <h2>{{'no_record_found'|translate}}</h2>
        </div>
      </div>

      <mat-paginator class="pagination" [length]="totalLength" (page)="handlePageEvent($event)" [pageSize]="pageSize"
        [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons aria-label="Select page of periodic elements">
      </mat-paginator>
    </div>
  </div>
</div>

<!-- ---------------------------------------Edit Health Plan modal---------------------------------------- -->
<div class="edit_healthplan">
  <ng-template #edithealthplancontent let-modal>
    <div class="custome_modal">
      <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">
          {{ "edit_health_plan" | translate }}
        </h4>
        <button type="button" class="btn-close" aria-label="Close" (click)="close()">
          <mat-icon>close</mat-icon>
        </button>
      </div>
      <div class="modal-body">
        <form [formGroup]="editForm">
          <div class="row">
            <div class="col-sm-12 col-md-12">
              <div class="form_field_wrapper">
                <label>{{ "health_plan_name" | translate }}</label>
                <mat-form-field appearance="fill">
                  <input type="text" matInput formControlName="name" />
                </mat-form-field>
              </div>
            </div>
          </div>

          <div class="modal_body_title_wrap">
            <div class="modal_body_title">
              {{ "services" | translate }} ({{ subEditServiceForms.length }})
            </div>
            <div class="primary_btn">
              <!-- <button type="button" class="btn btn-primary">
                <a class="btn_svg">
                  <svg xmlns="http://www.w3.org/2000/svg" width="15" height="18" viewBox="0 0 15 18" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M3.30524 0.0827418C2.45473 0.279185 1.74256 0.710972 1.1383 1.39669C0.617787 1.98733 0.294089 2.62138 0.0925399 3.44513L0.000194303 3.82243V8.97532C0.000194303 14.6951 -0.0167024 14.3029 0.264637 15.1118C0.767629 16.5578 2.00379 17.6649 3.41158 17.9299C3.9046 18.0228 11.0724 18.0236 11.5627 17.9309C13.0347 17.6525 14.2649 16.5174 14.7627 14.9782C14.9946 14.2613 14.9997 14.1647 14.9998 10.5064L15 7.18025L12.7412 7.17962C10.2094 7.17894 10.2091 7.1789 9.68232 6.88299C8.9551 6.47439 8.48379 5.75649 8.35241 4.85723C8.32863 4.69462 8.31216 3.64858 8.312 2.29135L8.31169 0L5.97469 0.00295656C3.87026 0.00565972 3.60461 0.0136002 3.30524 0.0827418ZM9.99355 2.59997V4.67168L10.0971 4.89605C10.225 5.17325 10.458 5.34747 10.7505 5.38468C10.8612 5.39875 11.7483 5.40462 12.7218 5.39773L14.4918 5.38519L12.2427 2.9567L9.99355 0.528255V2.59997ZM7.87179 7.30206C8.05663 7.40445 8.17393 7.53956 8.25114 7.73913C8.29996 7.86525 8.31169 8.08767 8.31169 8.88675V9.87796L9.26018 9.89126C10.1436 9.9036 10.2194 9.91078 10.3651 9.99546C10.4512 10.0455 10.5603 10.1313 10.6077 10.1861C10.8993 10.5237 10.8745 11.1318 10.5558 11.4545C10.3318 11.6814 10.2333 11.6996 9.2321 11.6996H8.31169L8.31083 12.7027C8.31009 13.5889 8.30152 13.7255 8.23753 13.8748C7.94039 14.5679 7.0713 14.575 6.74358 13.887C6.67622 13.7456 6.66895 13.6312 6.66895 12.715V11.6996H5.74854C5.00493 11.6996 4.80021 11.687 4.68271 11.634C4.37118 11.4935 4.16572 11.1672 4.16572 10.813C4.16572 10.4402 4.31404 10.1707 4.61552 9.99546C4.76121 9.91078 4.83705 9.9036 5.72046 9.89126L6.66895 9.87796V8.88675C6.66895 8.08767 6.68068 7.86525 6.72949 7.73913C6.91466 7.2605 7.43634 7.06094 7.87179 7.30206Z" />
                  </svg></a>{{ "import" | translate }}
              </button> -->
            </div>
          </div>
          <div formArrayName="newService" class="scroll_div">
            <ng-container *ngFor="let row of subEditServiceForms.controls; let i = index">
              <ng-container [formGroupName]="i">
                <div class="modal_content service">
                  <div class="row modal_content_inner">
                    <div class="item">
                      <div class="form_field_wrapper">
                        <label>{{ "category_of_service" | translate }}</label>
                        <mat-form-field appearance="fill">
                          <!-- <mat-label>Sub-admin</mat-label> -->
                          <input type="text" formControlName="category_of_service" matInput />
                        </mat-form-field>
                      </div>
                      <span class="text-danger"
                        *ngIf="isSubmitted && subEditServiceForms.controls[i].get('category_of_service')?.errors?.['required']">
                        {{ "please_select_category_of_service" | translate }}
                      </span>
                    </div>

                    <div class="item">
                      <div class="form_field_wrapper">
                        <label>{{
                          "primary_and_secondary_category_limit" | translate
                          }}</label>
                        <mat-form-field appearance="fill">
                          <input type="number" formControlName="primary_and_secondary_category_limit" matInput />
                        </mat-form-field>
                      </div>
                      <span class="text-danger"
                        *ngIf="isSubmitted && subServiceForms.controls[i]?.get('primary_and_secondary_category_limit')?.errors?.['required']">
                        {{
                        "please_select_primary_and_secondary_category_limit" | translate
                        }}
                      </span>
                    </div>
                    
                    <div class="item">
                      <div class="form_field_wrapper">
                        <label>{{ "category_limit" | translate }}</label>
                        <mat-form-field appearance="fill">
                          <input type="number" matInput formControlName="category_limit" />
                        </mat-form-field>
                        <span class="text-danger"
                          *ngIf="isSubmitted && subEditServiceForms.controls[i].get('category_limit')?.errors?.['required']">
                          {{'please_enter_category_limit'|translate}}
                        </span>
                      </div>
                    </div>
                    <div class="item">
                      <div class="form_field_wrapper">
                        <label>{{ "category_condition" | translate }}</label>
                        <mat-form-field appearance="fill">
                          <!-- <mat-label>Sub-admin</mat-label> -->
                          <mat-select disableRipple placeholder="Select" formControlName="category_condition">
                            <mat-option value="no">{{'no'|translate}}</mat-option>
                            <mat-option value="yes">{{'yes'|translate}}</mat-option>
                          </mat-select>
                        </mat-form-field>
                        <!-- <span
                            class="text-danger"
                            *ngIf="isSubmitted && subServiceForms.controls[i].get('category_condition')?.errors?.['required']"
                          >
                            Please Select Category Condition
                          </span> -->
                      </div>
                    </div>
                    <div class="item">
                      <div class="form_field_wrapper">
                        <label>{{ "service_code" | translate }}</label>
                        <mat-form-field appearance="fill">
                          <!-- <mat-label>Sub-admin</mat-label> -->
                          <input type="text" formControlName="service_code" matInput />
                        </mat-form-field>
                      </div>
                      <span class="text-danger"
                        *ngIf="isSubmitted && subEditServiceForms.controls[i].get('service_code')?.errors?.['required']">
                        {{ "please_select_service_code" | translate }}
                      </span>
                    </div>
                    <div class="item">
                      <div class="form_field_wrapper">
                        <label>{{ "service_name" | translate }}</label>
                        <mat-form-field appearance="fill">
                          <!-- <mat-label>Sub-admin</mat-label> -->
                          <input type="text" formControlName="type_of_service" matInput />
                        </mat-form-field>
                      </div>
                      <span class="text-danger"
                        *ngIf="isSubmitted && subEditServiceForms.controls[i].get('type_of_service')?.errors?.['required']">
                        {{ "please_select_type_of_service" | translate }}
                      </span>
                    </div>

                    <div class="item">
                      <div class="form_field_wrapper">
                        <label>{{
                          "primary_and_secondary_service_limit" | translate
                          }}</label>
                        <mat-form-field appearance="fill">
                          <input type="number" formControlName="primary_and_secondary_service_limit" matInput />
                        </mat-form-field>
                      </div>
                      <span class="text-danger"
                        *ngIf="isSubmitted && subServiceForms.controls[i]?.get('primary_and_secondary_service_limit')?.errors?.['required']">
                        {{
                        "please_select_primary_and_secondary_service_limit" | translate
                        }}
                      </span>
                    </div>

                    <div class="item">
                      <div class="form_field_wrapper">
                        <label>{{ "service_limit" | translate }}</label>
                        <mat-form-field appearance="fill">
                          <input type="number" matInput formControlName="service_limit" />
                        </mat-form-field>
                        <span class="text-danger"
                          *ngIf="isSubmitted && subEditServiceForms.controls[i].get('service_limit')?.errors?.['required']">
                          {{'please_enter_service_limit'|translate}}
                        </span>
                      </div>
                    </div>

                    <div class="item repayment">
                      <div class="repayment_wrap">
                        <label>{{ "repayment_condition" | translate }}</label>
                        <div class="row repayment_inner">
                          <div class="col-sm-3 item_inner">
                            <div class="form_field_wrapper">
                              <mat-form-field appearance="fill">
                                <mat-label>{{'maximum'|translate}}</mat-label>
                                <input type="number" matInput formControlName="repayment_condition_max" />
                              </mat-form-field>
                            </div>
                          </div>
                          <div class="col-sm-3 item_inner">
                            <div class="form_field_wrapper">
                              <mat-form-field>
                                <mat-label>{{'for'|translate}}</mat-label>
                                <input type="number" matInput formControlName="repayment_condition_for" />
                              </mat-form-field>
                            </div>
                          </div>
                          <div class="col-sm-3 item_inner">
                            <div class="form_field_wrapper">
                              <mat-form-field appearance="fill">
                                <mat-select disableRipple placeholder="{{'select_unit'|translate}}"
                                  formControlName="repayment_condition_unit">
                                  <mat-option value="Year">{{'year'|translate}}</mat-option>
                                  <mat-option value="Month">{{'month'|translate}}</mat-option>
                                  <mat-option value="Day">{{'days'|translate}}</mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>
                          </div>
                          <span class="text-danger"
                            *ngIf="isSubmitted && subEditServiceForms.controls[i].get('repayment_condition')?.errors?.['required']">
                            {{'please_select_repayment_condition'|translate}}
                          </span>
                        </div>
                      </div>
                    </div>
                    <div class="item">
                      <div class="form_field_wrapper">
                        <label>{{ "total_max_duration_in_days" | translate }}</label>
                        <mat-form-field appearance="fill">
                          <!-- <mat-label>Sub-admin</mat-label> -->
                          <input type="number" matInput formControlName="total_max_duration_in_days" />
                        </mat-form-field>
                        <span class="text-danger"
                          *ngIf="isSubmitted && subEditServiceForms.controls[i].get('total_max_duration_in_days')?.errors?.['required']">
                          {{ "total_max_duration_in_days" | translate }}
                        </span>
                      </div>
                    </div>
                    <div class="item">
                      <div class="form_field_wrapper">
                        <label>{{ "max_extend_duration_in_days" | translate }}</label>
                        <mat-form-field appearance="fill">
                          <!-- <mat-label>Sub-admin</mat-label> -->
                          <input type="number" matInput formControlName="max_extend_duration_in_days" />
                        </mat-form-field>
                        <span class="text-danger"
                          *ngIf="isSubmitted && subEditServiceForms.controls[i].get('max_extend_duration_in_days')?.errors?.['required']">
                          {{ "max_extend_duration_in_days" | translate }}
                        </span>
                      </div>
                    </div>
                    <div class="item">
                      <div class="form_field_wrapper">
                        <label>{{ "pre_authorization" | translate }}</label>
                        <mat-form-field appearance="fill">
                          <!-- <mat-label>Sub-admin</mat-label> -->
                          <mat-select disableRipple placeholder="Select" formControlName="pre_authorization">
                            <mat-option value="no">{{'no'|translate}}</mat-option>
                            <mat-option value="yes">{{'yes'|translate}}</mat-option>
                          </mat-select>
                        </mat-form-field>
                        <span class="text-danger"
                          *ngIf="isSubmitted && subEditServiceForms.controls[i].get('pre_authorization')?.errors?.['required']">
                          {{ "please_select_pre_authorization" | translate }}
                        </span>
                      </div>
                    </div>
                    <div class="item repayment">
                      <div class="repayment_wrap">
                        <label>{{ "waiting_period" | translate }}</label>
                        <div class="row repayment_inner">
                          <div class="col-sm-6 item_inner">
                            <div class="form_field_wrapper">
                              <mat-form-field appearance="fill">
                                <mat-label>{{'minimum'|translate}}</mat-label>
                                <input type="number" matInput formControlName="waiting_period_max" />
                              </mat-form-field>
                            </div>
                          </div>
                          <div class="col-sm-6 item_inner">
                            <div class="form_field_wrapper">
                              <mat-form-field>
                                <mat-select disableRipple placeholder="Select Unit"
                                  formControlName="waiting_period_unit">
                                  <mat-option value="Year">{{'year'|translate}}</mat-option>
                                  <mat-option value="Month">{{'month'|translate}}</mat-option>
                                  <mat-option value="Day">{{'days'|translate}}</mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>
                          </div>
                          <span class="text-danger"
                            *ngIf="isSubmitted && subEditServiceForms.controls[i].get('waiting_period_unit')?.errors?.['required']">
                            {{'please_select_waiting_period'|translate}}
                          </span>
                        </div>
                      </div>
                    </div>
                    <div class="item">
                      <div class="form_field_wrapper">
                        <label>{{
                          "waiting_period_redeemed" | translate
                          }}</label>
                        <mat-form-field appearance="fill">
                          <!-- <mat-label>Sub-admin</mat-label> -->
                          <mat-select disableRipple placeholder="Select" formControlName="waiting_period_redeemed">
                            <mat-option value="no">{{'no'|translate}}</mat-option>
                            <mat-option value="yes">{{'yes'|translate}}</mat-option>
                            <mat-option value="Not Applicable">{{'not_applicable'|translate}}</mat-option>
                          </mat-select>
                        </mat-form-field>
                        <!-- <span
                            class="text-danger"
                            *ngIf="isSubmitted && subServiceForms.controls[i].get('redeemed')?.errors?.['required']"
                          >
                            Please Select Waiting Period Redeemed
                          </span> -->
                      </div>
                    </div>

                    <div class="item">
                      <div class="form_field_wrapper">
                        <label>{{ "reimbursment_rate" | translate }}</label>
                        <mat-form-field appearance="fill">
                          <input type="text" formControlName="reimbursment_rate" matInput />
                        </mat-form-field>
                        <span class="text-danger"
                          *ngIf="isSubmitted && subEditServiceForms.controls[i].get('reimbursment_rate')?.errors?.['required']">
                          {{ "please_enter_reimbursment_rate" | translate }}
                        </span>
                        <span class="text-danger"
                        *ngIf="isSubmitted && subEditServiceForms.controls[i].get('reimbursment_rate')?.errors?.['max']">
                        {{'only_numbers_allowed_0_100'|translate}}
                      </span>
                      </div>
                    </div>

                    <div class="item">
                      <div class="form_field_wrapper">
                        <label>{{ "comments" | translate }}</label>
                        <mat-form-field appearance="fill">
                          <input type="text" matInput formControlName="comment" />
                        </mat-form-field>
                        <!-- <span
                            class="text-danger"
                            *ngIf="isSubmitted && subServiceForms.controls[i].get('service_limit')?.errors?.['required']"
                          >
                            Please Enter Service Limit
                          </span> -->
                      </div>
                    </div>
                  </div>
                  <!-- <div class="row_generate row_add" *ngIf="">
                            <mat-icon class="plus">add</mat-icon>
                        </div> -->
                  <ng-container *ngIf="i === subEditServiceForms.length - 1; else remove">
                    <div class="row_generate row_minus" (click)="
                        deletePopup(deleteModal, row.value, 'planService', i)
                      " *ngIf="subEditServiceForms.length>1">
                      <mat-icon class="plus">remove</mat-icon>
                    </div>
                    <div class="row_generate row_add" (click)="addNewEditService()">
                      <mat-icon class="plus">add</mat-icon>
                    </div>
                  </ng-container>
                  <ng-template #remove>
                    <div class="row_generate row_minus" (click)="
                        deletePopup(deleteModal, row.value, 'planService', i)
                      ">
                      <mat-icon class="plus">remove</mat-icon>
                    </div>
                  </ng-template>
                </div>
              </ng-container>
            </ng-container>
          </div>

          <div class="modal_body_title_wrap">
            <div class="modal_body_title">
              {{'exclusion'|translate}} ({{ subEditExclucionForms.length }})
            </div>
            <div class="primary_btn">
              <!-- <button type="button" class="btn btn-primary">
                <a class="btn_svg">
                  <svg xmlns="http://www.w3.org/2000/svg" width="15" height="18" viewBox="0 0 15 18" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M3.30524 0.0827418C2.45473 0.279185 1.74256 0.710972 1.1383 1.39669C0.617787 1.98733 0.294089 2.62138 0.0925399 3.44513L0.000194303 3.82243V8.97532C0.000194303 14.6951 -0.0167024 14.3029 0.264637 15.1118C0.767629 16.5578 2.00379 17.6649 3.41158 17.9299C3.9046 18.0228 11.0724 18.0236 11.5627 17.9309C13.0347 17.6525 14.2649 16.5174 14.7627 14.9782C14.9946 14.2613 14.9997 14.1647 14.9998 10.5064L15 7.18025L12.7412 7.17962C10.2094 7.17894 10.2091 7.1789 9.68232 6.88299C8.9551 6.47439 8.48379 5.75649 8.35241 4.85723C8.32863 4.69462 8.31216 3.64858 8.312 2.29135L8.31169 0L5.97469 0.00295656C3.87026 0.00565972 3.60461 0.0136002 3.30524 0.0827418ZM9.99355 2.59997V4.67168L10.0971 4.89605C10.225 5.17325 10.458 5.34747 10.7505 5.38468C10.8612 5.39875 11.7483 5.40462 12.7218 5.39773L14.4918 5.38519L12.2427 2.9567L9.99355 0.528255V2.59997ZM7.87179 7.30206C8.05663 7.40445 8.17393 7.53956 8.25114 7.73913C8.29996 7.86525 8.31169 8.08767 8.31169 8.88675V9.87796L9.26018 9.89126C10.1436 9.9036 10.2194 9.91078 10.3651 9.99546C10.4512 10.0455 10.5603 10.1313 10.6077 10.1861C10.8993 10.5237 10.8745 11.1318 10.5558 11.4545C10.3318 11.6814 10.2333 11.6996 9.2321 11.6996H8.31169L8.31083 12.7027C8.31009 13.5889 8.30152 13.7255 8.23753 13.8748C7.94039 14.5679 7.0713 14.575 6.74358 13.887C6.67622 13.7456 6.66895 13.6312 6.66895 12.715V11.6996H5.74854C5.00493 11.6996 4.80021 11.687 4.68271 11.634C4.37118 11.4935 4.16572 11.1672 4.16572 10.813C4.16572 10.4402 4.31404 10.1707 4.61552 9.99546C4.76121 9.91078 4.83705 9.9036 5.72046 9.89126L6.66895 9.87796V8.88675C6.66895 8.08767 6.68068 7.86525 6.72949 7.73913C6.91466 7.2605 7.43634 7.06094 7.87179 7.30206Z" />
                  </svg></a>Import
              </button> -->
            </div>
          </div>

          <div formArrayName="newExclusion" class="scroll_div">
            <ng-container *ngFor="
                let exclusion of subEditExclucionForms.controls;
                let j = index
              ">
              <ng-container [formGroupName]="j">
                <div class="modal_content exclusion">
                  <div class="row modal_content_inner">
                    <div class="item col-sm-6 col-lg-3">
                      <div class="form_field_wrapper">
                        <label>{{'category_of_exclusion'| translate}}</label>
                        <mat-form-field appearance="fill">
                          <input type="text" matInput formControlName="exclusion" placeholder="enter exclusion" />
                        </mat-form-field>
                        <span class="text-danger"
                          *ngIf="isSubmitted && subEditExclucionForms.controls[j].get('exclusion')?.errors?.['required']">
                          {{'please_enter_category_of_exclusion'|translate}}
                        </span>
                      </div>
                    </div>
                    <div class="item col-sm-6 col-lg-3">
                      <div class="form_field_wrapper">
                        <label>{{'exclusion_name'|translate}}</label>
                        <mat-form-field appearance="fill">
                          <input type="text" matInput formControlName="in_exclusion" placeholder="enter exclusion" />
                        </mat-form-field>
                        <span class="text-danger"
                          *ngIf="isSubmitted && subEditExclucionForms.controls[j].get('in_exclusion')?.errors?.['required']">
                          {{'please_select_exclusion_INN'|translate}}
                        </span>
                      </div>
                    </div>
                    <div class="item col-sm-6 col-lg-3">
                      <div class="form_field_wrapper">
                        <label>{{'brand_name'}}</label>
                        <mat-form-field appearance="fill">
                          <input type="text" formControlName="brand_name" matInput />
                        </mat-form-field>
                        <span class="text-danger"
                          *ngIf="isSubmitted && subEditExclucionForms.controls[j].get('brand_name')?.errors?.['required']">
                          {{'please_enter_brand_name'|translate}}
                        </span>
                      </div>
                    </div>
                    <div class="item col-sm-6 col-lg-3">
                      <div class="form_field_wrapper">
                        <label>{{'comment'|translate}}</label>
                        <mat-form-field appearance="fill">
                          <input type="text" formControlName="comment" matInput />
                        </mat-form-field>
                        <span class="text-danger"
                          *ngIf="isSubmitted && subEditExclucionForms.controls[j].get('comment')?.errors?.['required']">
                          {{'please_enter_comment'|translate}}
                        </span>
                      </div>
                    </div>
                  </div>
                  <ng-container *ngIf="j === subEditExclucionForms.length - 1; else remove">
                    <div class="row_generate row_minus" (click)="
                        deletePopup(
                          deleteModal,
                          exclusion.value,
                          'planExclusion',
                          j
                        )
                      " *ngIf="subEditExclucionForms.length>1">
                      <mat-icon class="plus">remove</mat-icon>
                    </div>
                    <div class="row_generate row_add" (click)="addNewEditExclusion()">
                      <mat-icon class="plus">add</mat-icon>
                    </div>
                  </ng-container>
                  <ng-template #remove>
                    <div class="row_generate row_minus" (click)="
                        deletePopup(
                          deleteModal,
                          exclusion.value,
                          'planExclusion',
                          j
                        )
                      ">
                      <mat-icon class="plus">remove</mat-icon>
                    </div>
                  </ng-template>
                </div>
              </ng-container>
            </ng-container>
          </div>

          <div class="row">
            <div class="col-sm-12 col-md-12">
              <div class="form_field_wrapper">
                <label>{{ "description" | translate }}</label>
                <mat-form-field appearance="fill">
                  <input type="text" matInput formControlName="description" />
                </mat-form-field>
              </div>
            </div>
            <div class="col-sm-6 col-md-4">
              <div class="form_field_wrapper">
                <label>{{ "total_primary_care_limit" | translate }}</label>
                <mat-form-field appearance="fill">
                  <input type="number" matInput formControlName="primary_care_limit" />
                </mat-form-field>
              </div>
              <span class="text-danger"
                *ngIf="isSubmitted && editFormFormControl['primary_care_limit'].errors?.['required']">
                {{'please_enter_total_primary_care_limit'|translate}}
              </span>

            </div>
            <div class="col-sm-6 col-md-4">
              <div class="form_field_wrapper">
                <label>{{ "total_secondary_care_limit" | translate }}</label>
                <mat-form-field appearance="fill">
                  <input type="number" matInput formControlName="secondary_care_limit" />
                </mat-form-field>
              </div>
              <span class="text-danger"
                *ngIf="isSubmitted && editFormFormControl['secondary_care_limit'].errors?.['required']">
                {{'please_enter_total_secondary_care_limit'|translate}}
              </span>
            </div>
            <div class="col-sm-6 col-md-4">
              <div class="form_field_wrapper">
                <label>{{
                  "total_primary_and_secondary_care_limit" | translate
                  }}</label>
                <mat-form-field appearance="fill">
                  <input type="number" matInput formControlName="grand_total" />
                </mat-form-field>
              </div>
              <span class="text-danger" *ngIf="isSubmitted && editFormFormControl['grand_total'].errors?.['required']">
                {{'please_enter_grand_total'|translate}}
              </span>
            </div>

            <div class="col-sm-6 col-md-4">
              <div class="form_field_wrapper">
                <label>{{'reimbursment_rate'|translate}}</label>
                <mat-form-field appearance="fill">
                  <input type="text" formControlName="reimbursment_rate" matInput />
                </mat-form-field>
                <span class="text-danger"
                  *ngIf="isSubmitted && editFormFormControl['reimbursment_rate'].errors?.['required']">
                  {{'please_enter_reimbursment_rate'|translate}}
                </span>
                <span class="text-danger"
                        *ngIf="isSubmitted && editFormFormControl['reimbursment_rate'].errors?.['max']">
                        {{'only_numbers_allowed_0_100'|translate}}
                      </span>

                <!-- <span class="text-danger" *ngIf="serviceForm.get('reimbursment_rate').errors?.['min']">
                  Reimbersment rate must be greater than zero. 
             </span> -->

                <!-- <span class="text-danger" *ngIf="editForm.get('reimbursment_rate').errors?.['pattern']">
                  Only numbers are allowed from 0 - 100.
                </span> -->
              </div>
            </div>

            <div class="col-sm-6 col-md-4">
              <div class="form_field_wrapper">
                <label>{{'contract_exclusion'|translate}}</label>
                <mat-form-field appearance="fill">
                  <textarea formControlName="contract_exclusion" matInput>
                  </textarea>
                </mat-form-field>
                <!-- <span class="text-danger"
                  *ngIf="isSubmitted && serviceFormControl['contract_exclusion'].errors?.['required']">
                  Please Enter Total Primary Secondary Care Limit
                </span> -->
              </div>
            </div>
          </div>
        </form>
        <div class="primary_btn">
          <button type="button" class="btn btn-secondary" (click)="closePopup()">
            {{ "cancel" | translate }}
          </button>
          <button type="button" class="btn btn-primary" (click)="handleUpdatePlan()">
            {{ "update_health_plan" | translate }}
          </button>
        </div>
      </div>
    </div>
  </ng-template>
</div>

<!-- ---------------------------------------Add Health Plan modal---------------------------------------- -->
<div class="add_healthplan">
  <ng-template #addhealthplancontent let-modal>
    <div class="custome_modal">
      <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">
          {{ "add_health_plan" | translate }}
        </h4>
        <button type="button" class="btn-close" aria-label="Close" (click)="closePopup()">
          <mat-icon>close</mat-icon>
        </button>
      </div>
      <div class="modal-body">
        <div class="add_healthplan_tab">
          <mat-tab-group animationDuration="0ms">
            <mat-tab label="Add Default Health Plan Template">
              <form [formGroup]="serviceForm" #formDirective="ngForm">
                <div class="row">
                  <div class="col-sm-12 col-lg-12">
                    <div class="form_field_wrapper">
                      <label>{{ "health_plan_name" | translate }}</label>
                      <mat-form-field appearance="fill">
                        <!-- <mat-label>Sub-admin</mat-label> -->
                        <mat-select disableRipple placeholder="Select health plan" (selectionChange)="
                            handleDefaultPlanSelect($event, true)
                          ">
                          <mat-option value="new">{{'new_health_plan'|translate}}</mat-option>
                          <mat-option *ngFor="let default of insPlanList" [value]="default?._id">{{ default?.plan_name
                            }}</mat-option>

                          <!-- <mat-option value="actual">actual</mat-option> -->
                        </mat-select>
                      </mat-form-field>
                      <span class="text-danger"
                        *ngIf="isSubmitted && serviceFormControl['plan_type'].errors?.['required']">
                        {{ "please_select_health_plan" | translate }}
                      </span>
                    </div>
                  </div>
                </div>

                <div class="modal_body_title_wrap">
                  <div class="modal_body_title">
                    {{ "services" | translate }} ({{ subServiceForms.length }})
                  </div>
                  <div class="primary_btn">
                    <button type="button" class="btn btn-primary"
                      (click)="openVerticallyCenteredimport(importServices)">
                      <a class="btn_svg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="18" viewBox="0 0 15 18" fill="none">
                          <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M3.30524 0.0827418C2.45473 0.279185 1.74256 0.710972 1.1383 1.39669C0.617787 1.98733 0.294089 2.62138 0.0925399 3.44513L0.000194303 3.82243V8.97532C0.000194303 14.6951 -0.0167024 14.3029 0.264637 15.1118C0.767629 16.5578 2.00379 17.6649 3.41158 17.9299C3.9046 18.0228 11.0724 18.0236 11.5627 17.9309C13.0347 17.6525 14.2649 16.5174 14.7627 14.9782C14.9946 14.2613 14.9997 14.1647 14.9998 10.5064L15 7.18025L12.7412 7.17962C10.2094 7.17894 10.2091 7.1789 9.68232 6.88299C8.9551 6.47439 8.48379 5.75649 8.35241 4.85723C8.32863 4.69462 8.31216 3.64858 8.312 2.29135L8.31169 0L5.97469 0.00295656C3.87026 0.00565972 3.60461 0.0136002 3.30524 0.0827418ZM9.99355 2.59997V4.67168L10.0971 4.89605C10.225 5.17325 10.458 5.34747 10.7505 5.38468C10.8612 5.39875 11.7483 5.40462 12.7218 5.39773L14.4918 5.38519L12.2427 2.9567L9.99355 0.528255V2.59997ZM7.87179 7.30206C8.05663 7.40445 8.17393 7.53956 8.25114 7.73913C8.29996 7.86525 8.31169 8.08767 8.31169 8.88675V9.87796L9.26018 9.89126C10.1436 9.9036 10.2194 9.91078 10.3651 9.99546C10.4512 10.0455 10.5603 10.1313 10.6077 10.1861C10.8993 10.5237 10.8745 11.1318 10.5558 11.4545C10.3318 11.6814 10.2333 11.6996 9.2321 11.6996H8.31169L8.31083 12.7027C8.31009 13.5889 8.30152 13.7255 8.23753 13.8748C7.94039 14.5679 7.0713 14.575 6.74358 13.887C6.67622 13.7456 6.66895 13.6312 6.66895 12.715V11.6996H5.74854C5.00493 11.6996 4.80021 11.687 4.68271 11.634C4.37118 11.4935 4.16572 11.1672 4.16572 10.813C4.16572 10.4402 4.31404 10.1707 4.61552 9.99546C4.76121 9.91078 4.83705 9.9036 5.72046 9.89126L6.66895 9.87796V8.88675C6.66895 8.08767 6.68068 7.86525 6.72949 7.73913C6.91466 7.2605 7.43634 7.06094 7.87179 7.30206Z" />
                        </svg></a>{{'import'|translate}}
                    </button>
                  </div>
                </div>
                <!-- <form [formGroup]="serviceForm"> -->

                <div formArrayName="newService" class="scroll_div">
                  <ng-container *ngFor="let row of subServiceForms.controls; let i = index">
                    <ng-container [formGroupName]="i">
                      <div class="modal_content service">
                        <div class="row modal_content_inner">
                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{
                                "category_of_service" | translate
                                }}</label>
                              <mat-form-field appearance="fill">
                                <!-- <mat-label>Sub-admin</mat-label> -->
                                <input type="text" formControlName="category_of_service" matInput />
                              </mat-form-field>
                            </div>
                            <span class="text-danger"
                              *ngIf="isSubmitted && subServiceForms.controls[i].get('category_of_service')?.errors?.['required']">
                              {{
                              "please_select_category_of_service" | translate
                              }}
                            </span>
                          </div>

                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{
                                "primary_and_secondary_category_limit" | translate
                                }}</label>
                              <mat-form-field appearance="fill">
                                <input type="number" formControlName="primary_and_secondary_category_limit" matInput />
                              </mat-form-field>
                            </div>
                            <span class="text-danger"
                              *ngIf="isSubmitted && subServiceForms.controls[i]?.get('primary_and_secondary_category_limit')?.errors?.['required']">
                              {{
                              "please_select_primary_and_secondary_category_limit" | translate
                              }}
                            </span>
                          </div>

                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{ "category_limit" | translate }}</label>
                              <mat-form-field appearance="fill">
                                <input type="number" matInput formControlName="category_limit" />
                              </mat-form-field>
                              <!-- {{validateService(i).controls['category_limit'].errors | json}} -->
                              <span class="text-danger"
                                *ngIf="isSubmitted && subServiceForms.controls[i].get('category_limit')?.errors?.['required']">
                                {{
                                "please_select_category_limit" | translate
                                }}
                              </span>
                            </div>
                          </div>
                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{
                                "category_condition" | translate
                                }}</label>
                              <mat-form-field appearance="fill">
                                <!-- <mat-label>Sub-admin</mat-label> -->
                                <mat-select disableRipple placeholder="Select" formControlName="category_condition">
                                  <mat-option value="no">{{'no'|translate}}</mat-option>
                                  <mat-option value="yes">{{'yes'|translate}}</mat-option>
                                </mat-select>
                              </mat-form-field>
                              <span class="text-danger"
                                *ngIf="isSubmitted && subServiceForms.controls[i].get('category_condition')?.errors?.['required']">
                                {{'please_select_category_condition'|translate}}
                              </span>
                            </div>
                          </div>
                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{ "service_code" | translate }}</label>
                              <mat-form-field appearance="fill">
                                <!-- <mat-label>Sub-admin</mat-label> -->
                                <input type="text" formControlName="service_code" matInput />
                              </mat-form-field>
                            </div>
                            <span class="text-danger"
                              *ngIf="isSubmitted && subServiceForms.controls[i].get('service_code')?.errors?.['required']">
                              {{ "please_select_service_code" | translate }}
                            </span>
                          </div>
                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{ "service_name" | translate }}</label>
                              <mat-form-field appearance="fill">
                                <!-- <mat-label>Sub-admin</mat-label> -->
                                <input type="text" formControlName="type_of_service" matInput />
                              </mat-form-field>
                            </div>
                            <span class="text-danger"
                              *ngIf="isSubmitted && subServiceForms.controls[i].get('type_of_service')?.errors?.['required']">
                              {{ "please_select_type_of_service" | translate }}
                            </span>
                          </div>

                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{
                                "primary_and_secondary_service_limit" | translate
                                }}</label>
                              <mat-form-field appearance="fill">
                                <input type="number" formControlName="primary_and_secondary_service_limit" matInput />
                              </mat-form-field>
                            </div>
                            <span class="text-danger"
                              *ngIf="isSubmitted && subServiceForms.controls[i]?.get('primary_and_secondary_service_limit')?.errors?.['required']">
                              {{
                              "please_select_primary_and_secondary_service_limit" | translate
                              }}
                            </span>
                          </div>

                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{ "service_limit" | translate }}</label>
                              <mat-form-field appearance="fill">
                                <input type="number" matInput formControlName="service_limit" />
                              </mat-form-field>
                              <span class="text-danger"
                                *ngIf="isSubmitted && subServiceForms.controls[i].get('service_limit')?.errors?.['required']">
                                {{'please_enter_service_limit'|translate}}
                              </span>
                            </div>
                          </div>

                          <div class="item repayment">
                            <div class="repayment_wrap">
                              <label>{{
                                "repayment_condition" | translate
                                }}</label>
                              <div class="row repayment_inner">
                                <div class="col-sm-3 item_inner">
                                  <div class="form_field_wrapper">
                                    <mat-form-field class="inner_label" appearance="fill">
                                      <mat-label>{{'maximum'|translate}}</mat-label>
                                      <input type="number" matInput formControlName="repayment_condition_max" />
                                    </mat-form-field>
                                  </div>
                                  <span class="text-danger"
                                    *ngIf="isSubmitted && subServiceForms.controls[i].get('repayment_condition_max')?.errors?.['required']">
                                    {{'please_select_repayment_max'|translate}}
                                  </span>
                                </div>
                                <div class="col-sm-3 item_inner">
                                  <div class="form_field_wrapper">
                                    <mat-form-field class="inner_label" appearance="fill">
                                      <mat-label>{{'for'|translate}}</mat-label>
                                      <input type="number" matInput formControlName="repayment_condition_for" />
                                    </mat-form-field>
                                  </div>
                                  <span class="text-danger"
                                    *ngIf="isSubmitted && subServiceForms.controls[i].get('repayment_condition_for')?.errors?.['required']">
                                    {{'please_select_repayment_condition'|translate}}
                                  </span>
                                </div>
                                <div class="col-sm-3 item_inner">
                                  <div class="form_field_wrapper">
                                    <mat-form-field class="inner_label" appearance="fill">
                                      <mat-select disableRipple placeholder="Select Unit"
                                        formControlName="repayment_condition_unit">
                                        <mat-option value="Year">{{'year'|translate}}</mat-option>
                                        <mat-option value="Month">{{'month'|translate}}</mat-option>
                                        <mat-option value="Day">{{'days'|translate}}</mat-option>
                                      </mat-select>
                                    </mat-form-field>
                                  </div>
                                </div>
                                <span class="text-danger"
                                  *ngIf="isSubmitted && subServiceForms.controls[i].get('repayment_condition')?.errors?.['required']">
                                  {{'please_select_repayment_cond_duration'|translate}}
                                </span>
                              </div>
                            </div>
                          </div>
                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{ "total_max_duration_in_days" | translate }}</label>
                              <mat-form-field appearance="fill">
                                <!-- <mat-label>Sub-admin</mat-label> -->
                                <input type="number" formControlName="total_max_duration_in_days" matInput />
                              </mat-form-field>
                            </div>
                            <span class="text-danger"
                              *ngIf="isSubmitted && subServiceForms.controls[i].get('total_max_duration_in_days')?.errors?.['required']">
                              {{ "please_select_total_max_duration_in_days" | translate }}
                            </span>
                          </div>
                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{ "max_extend_duration_in_days" | translate }}</label>
                              <mat-form-field appearance="fill">
                                <!-- <mat-label>Sub-admin</mat-label> -->
                                <input type="number" formControlName="max_extend_duration_in_days" matInput />
                              </mat-form-field>
                            </div>
                            <span class="text-danger"
                              *ngIf="isSubmitted && subServiceForms.controls[i].get('max_extend_duration_in_days')?.errors?.['required']">
                              {{ "please_select_max_extend_duration_in_days" | translate }}
                            </span>
                          </div>
                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{
                                "pre_authorization" | translate
                                }}</label>
                              <mat-form-field appearance="fill">
                                <!-- <mat-label>Sub-admin</mat-label> -->
                                <mat-select disableRipple placeholder="Select" formControlName="pre_authorization">
                                  <mat-option value="no">{{'no'|translate}}</mat-option>
                                  <mat-option value="yes">{{'yes'|translate}}</mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>
                            <span class="text-danger"
                              *ngIf="isSubmitted && subServiceForms.controls[i].get('pre_authorization')?.errors?.['required']">
                              {{
                              "please_select_pre_authorization" | translate
                              }}
                            </span>
                          </div>
                          <!-- <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{ "waiting_period" | translate }}</label>
                              <mat-form-field appearance="fill">
                                
                                <input type="text" matInput formControlName="waiting_period_max" />
                              </mat-form-field>
                              -
                              <mat-form-field>
                                <mat-select disableRipple placeholder="Select Unit"
                                  formControlName="waiting_period_unit">
                                  <mat-option value="Year">year</mat-option>
                                  <mat-option value="Month">month</mat-option>
                                  <mat-option value="Day">days</mat-option>

                                </mat-select>
                              </mat-form-field>
                            </div>
                          </div> -->

                          <div class="item repayment">
                            <div class="repayment_wrap">
                              <label>{{ "waiting_period" | translate }}</label>
                              <div class="row repayment_inner">
                                <div class="col-sm-6 item_inner">
                                  <div class="form_field_wrapper">
                                    <mat-form-field class="inner_label" appearance="fill">
                                      <mat-label>{{'minimum'|translate}}</mat-label>
                                      <input type="number" matInput formControlName="waiting_period_max" />
                                    </mat-form-field>
                                  </div>
                                  <span class="text-danger"
                                    *ngIf="isSubmitted && subServiceForms.controls[i].get('waiting_period_max')?.errors?.['required']">
                                    {{'please_select_waiting_period'|translate}}
                                  </span>
                                </div>
                                <div class="col-sm-6 item_inner">
                                  <div class="form_field_wrapper">
                                    <mat-form-field class="inner_label" appearance="fill">
                                      <mat-select disableRipple placeholder="Select Unit"
                                        formControlName="waiting_period_unit">
                                        <mat-option value="Year">{{'year'|translate}}</mat-option>
                                        <mat-option value="Month">{{'month'|translate}}</mat-option>
                                        <mat-option value="Day">{{'days'|translate}}</mat-option>
                                      </mat-select>
                                    </mat-form-field>
                                  </div>
                                  <span class="text-danger"
                                    *ngIf="isSubmitted && subServiceForms.controls[i].get('waiting_period_unit')?.errors?.['required']">
                                    {{'please_select_waiting_duration'|translate}}
                                  </span>
                                </div>
                                <span class="text-danger"
                                  *ngIf="isSubmitted && subServiceForms.controls[i].get('duration')?.errors?.['required']">
                                  {{'please_select_waiting_period'}}
                                </span>
                              </div>
                            </div>
                          </div>

                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{
                                "waiting_period_redeemed" | translate
                                }}</label>
                              <mat-form-field appearance="fill">
                                <!-- <mat-label>Sub-admin</mat-label> -->
                                <mat-select disableRipple placeholder="Select"
                                  formControlName="waiting_period_redeemed">
                                  <mat-option value="no">{{'no'|translate}}</mat-option>
                                  <mat-option value="yes">{{'yes'|translate}}</mat-option>
                                  <mat-option value="Not Applicable">{{'not_applicable'|translate}}</mat-option>
                                </mat-select>
                              </mat-form-field>

                              <span class="text-danger"
                                *ngIf="isSubmitted && subServiceForms.controls[i].get('waiting_period_redeemed')?.errors?.['required']">
                                {{'please_select_waiting_period_redeemed'|translate}}
                              </span>
                            </div>
                          </div>

                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{
                                "reimbursment_rate" | translate
                                }}</label>
                              <mat-form-field appearance="fill">
                                <input type="number" formControlName="reimbursment_rate" matInput />
                              </mat-form-field>
                            </div>
                            <span class="text-danger"
                              *ngIf="isSubmitted && subServiceForms.controls[i].get('reimbursment_rate')?.errors?.['required']">
                              {{ "please_enter_reimbursment_rate" | translate }}
                            </span>
                            <span class="text-danger"
                            *ngIf="isSubmitted && subServiceForms.controls[i].get('reimbursment_rate')?.errors?.['max']">
                            {{'only_numbers_allowed_0_100'|translate}}
                          </span>
                          </div>

                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{ "description" | translate }}</label>
                              <mat-form-field appearance="fill">
                                <input type="text" matInput formControlName="comment" />
                              </mat-form-field>
                              <!-- <span class="text-danger"
                                *ngIf="isSubmitted && subServiceForms.controls[i].get('service_limit')?.errors?.['required']">
                                Please Enter Service Limit
                              </span> -->
                            </div>
                          </div>
                        </div>
                        <ng-container *ngIf="i === subServiceForms.length - 1; else remove">
                          <div class="row_generate row_minus" (click)="removeService(i)"
                            *ngIf="subServiceForms.length>1">
                            <mat-icon class="plus">remove</mat-icon>
                          </div>
                          <div class="row_generate row_add" (click)="addNewService()">
                            <mat-icon class="plus">add</mat-icon>
                          </div>
                        </ng-container>
                        <ng-template #remove>
                          <div class="row_generate row_minus" (click)="removeService(i)">
                            <mat-icon class="plus">remove</mat-icon>
                          </div>
                        </ng-template>
                      </div>
                    </ng-container>
                  </ng-container>
                </div>

                <div class="modal_body_title_wrap">
                  <div class="modal_body_title">
                    {{'exclusion'|translate}} ({{ subExclucionForms.length }})
                  </div>
                  <div class="primary_btn">
                    <button type="button" class="btn btn-primary"
                      (click)="openVerticallyCenteredimport(importExclusion)">
                      <a class="btn_svg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="18" viewBox="0 0 15 18" fill="none">
                          <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M3.30524 0.0827418C2.45473 0.279185 1.74256 0.710972 1.1383 1.39669C0.617787 1.98733 0.294089 2.62138 0.0925399 3.44513L0.000194303 3.82243V8.97532C0.000194303 14.6951 -0.0167024 14.3029 0.264637 15.1118C0.767629 16.5578 2.00379 17.6649 3.41158 17.9299C3.9046 18.0228 11.0724 18.0236 11.5627 17.9309C13.0347 17.6525 14.2649 16.5174 14.7627 14.9782C14.9946 14.2613 14.9997 14.1647 14.9998 10.5064L15 7.18025L12.7412 7.17962C10.2094 7.17894 10.2091 7.1789 9.68232 6.88299C8.9551 6.47439 8.48379 5.75649 8.35241 4.85723C8.32863 4.69462 8.31216 3.64858 8.312 2.29135L8.31169 0L5.97469 0.00295656C3.87026 0.00565972 3.60461 0.0136002 3.30524 0.0827418ZM9.99355 2.59997V4.67168L10.0971 4.89605C10.225 5.17325 10.458 5.34747 10.7505 5.38468C10.8612 5.39875 11.7483 5.40462 12.7218 5.39773L14.4918 5.38519L12.2427 2.9567L9.99355 0.528255V2.59997ZM7.87179 7.30206C8.05663 7.40445 8.17393 7.53956 8.25114 7.73913C8.29996 7.86525 8.31169 8.08767 8.31169 8.88675V9.87796L9.26018 9.89126C10.1436 9.9036 10.2194 9.91078 10.3651 9.99546C10.4512 10.0455 10.5603 10.1313 10.6077 10.1861C10.8993 10.5237 10.8745 11.1318 10.5558 11.4545C10.3318 11.6814 10.2333 11.6996 9.2321 11.6996H8.31169L8.31083 12.7027C8.31009 13.5889 8.30152 13.7255 8.23753 13.8748C7.94039 14.5679 7.0713 14.575 6.74358 13.887C6.67622 13.7456 6.66895 13.6312 6.66895 12.715V11.6996H5.74854C5.00493 11.6996 4.80021 11.687 4.68271 11.634C4.37118 11.4935 4.16572 11.1672 4.16572 10.813C4.16572 10.4402 4.31404 10.1707 4.61552 9.99546C4.76121 9.91078 4.83705 9.9036 5.72046 9.89126L6.66895 9.87796V8.88675C6.66895 8.08767 6.68068 7.86525 6.72949 7.73913C6.91466 7.2605 7.43634 7.06094 7.87179 7.30206Z" />
                        </svg></a>{{'import'|translate}}
                    </button>
                  </div>
                </div>

                <div formArrayName="newExclusion" class="scroll_div">
                  <ng-container *ngFor="
                      let exclu of subExclucionForms.controls;
                      let j = index
                    ">
                    <ng-container [formGroupName]="j">
                      <div class="modal_content exclusion">
                        <div class="row modal_content_inner">
                          <div class="item col-sm-6 col-lg-3">
                            <div class="form_field_wrapper">
                              <label>{{'category_of_exclusion'|translate}}</label>
                              <mat-form-field appearance="fill">
                                <input type="text" matInput formControlName="exclusion" placeholder="enter exclusion" />
                              </mat-form-field>
                              <span class="text-danger"
                                *ngIf="isSubmitted && subExclucionForms.controls[j].get('exclusion')?.errors?.['required']">
                                {{'please_enter_category_of_exclusion'|translate}}
                              </span>
                            </div>
                          </div>
                          <div class="item col-sm-6 col-lg-3">
                            <div class="form_field_wrapper">
                              <label>{{'exclusion_name'|translate}}</label>
                              <mat-form-field appearance="fill">
                                <input type="text" matInput formControlName="in_exclusion"
                                  placeholder="enter exclusion" />
                              </mat-form-field>
                              <span class="text-danger"
                                *ngIf="isSubmitted && subExclucionForms.controls[j].get('in_exclusion')?.errors?.['required']">
                                {{'please_select_exclusion_INN'|translate}}
                              </span>
                            </div>
                          </div>
                          <div class="item col-sm-6 col-lg-3">
                            <div class="form_field_wrapper">
                              <label>{{'brand_name'|translate}}</label>
                              <mat-form-field appearance="fill">
                                <input type="text" formControlName="brand_name" matInput />
                              </mat-form-field>
                              <span class="text-danger"
                                *ngIf="isSubmitted && subExclucionForms.controls[j].get('brand_name')?.errors?.['required']">
                                {{'please_enter_brand_name'|translate}}
                              </span>
                            </div>
                          </div>
                          <div class="item col-sm-6 col-lg-3">
                            <div class="form_field_wrapper">
                              <label>{{'comment'|translate}}</label>
                              <mat-form-field appearance="fill">
                                <input type="text" formControlName="comment" matInput />
                              </mat-form-field>
                              <span class="text-danger"
                                *ngIf="isSubmitted && subExclucionForms.controls[j].get('comment')?.errors?.['required']">
                                {{'please_enter_comment'|translate}}
                              </span>
                            </div>
                          </div>
                        </div>
                        <ng-container *ngIf="j === subExclucionForms.length - 1; else remove">
                          <div class="row_generate row_minus" (click)="removeExclusion(j)"
                            *ngIf="subExclucionForms.length>1">
                            <mat-icon class="plus">remove</mat-icon>
                          </div>
                          <div class="row_generate row_add" (click)="addNewExclusion()">
                            <mat-icon class="plus">add</mat-icon>
                          </div>
                        </ng-container>
                        <ng-template #remove>
                          <div class="row_generate row_minus" (click)="removeExclusion(j)">
                            <mat-icon class="plus">remove</mat-icon>
                          </div>
                        </ng-template>
                      </div>
                    </ng-container>
                  </ng-container>
                </div>

                <div class="row">
                  <div class="col-sm-12 col-md-12">
                    <div class="form_field_wrapper">
                      <label>{{'description'| translate}}</label>
                      <mat-form-field appearance="fill">
                        <input type="text" formControlName="description" matInput />
                      </mat-form-field>
                      <!-- <span class="text-danger"
                        *ngIf="isSubmitted && serviceFormControl['description'].errors?.['required']">
                        Please Enter Description
                      </span> -->
                    </div>
                  </div>
                  <div class="col-sm-6 col-md-4">
                    <div class="form_field_wrapper">
                      <label>{{'total_primary_care_limit'| translate}}</label>
                      <mat-form-field appearance="fill">
                        <input type="number" formControlName="primary_care_limit" matInput />
                      </mat-form-field>
                      <span class="text-danger"
                        *ngIf="isSubmitted && serviceFormControl['primary_care_limit'].errors?.['required']">
                        {{'please_enter_total_primary_care_limit'|translate}}
                      </span>
                    </div>
                  </div>
                  <div class="col-sm-6 col-md-4">
                    <div class="form_field_wrapper">
                      <label>{{'total_secondary_care_limit'|translate}}</label>
                      <mat-form-field appearance="fill">
                        <input type="number" formControlName="secondary_care_limit" matInput />
                      </mat-form-field>
                      <span class="text-danger"
                        *ngIf="isSubmitted && serviceFormControl['secondary_care_limit'].errors?.['required']">
                        {{'please_enter_total_secondary_care_limit'|translate}}
                      </span>
                    </div>
                  </div>
                  <div class="col-sm-6 col-md-4">
                    <div class="form_field_wrapper">
                      <label>{{'total_primary_and_secondary_care_limit'| translate}}</label>
                      <mat-form-field appearance="fill">
                        <input type="number" formControlName="grand_total" matInput />
                      </mat-form-field>
                      <span class="text-danger"
                        *ngIf="isSubmitted && serviceFormControl['grand_total'].errors?.['required']">
                        {{'please_enter_total_primary_secondary_care_limit'|translate}}
                      </span>
                    </div>
                  </div>

                  <div class="col-sm-6 col-md-4">
                    <div class="form_field_wrapper">
                      <label>{{'reimbursment_rate'|translate}}</label>
                      <mat-form-field appearance="fill">
                        <input type="number" formControlName="reimbursment_rate" matInput  />
                      </mat-form-field>
                      <span class="text-danger"
                        *ngIf="isSubmitted && serviceFormControl['reimbursment_rate'].errors?.['required']">
                        {{'please_enter_reimbursment_rate'|translate}}
                      </span>
                      <span class="text-danger"
                        *ngIf="isSubmitted && serviceFormControl['reimbursment_rate'].errors?.['max']">
                        {{'only_numbers_allowed_0_100'|translate}}
                      </span>

                      <!-- <span class="text-danger" *ngIf="serviceForm.get('reimbursment_rate').errors?.['min']">
                        Reimbersment rate must be greater than zero. 
                   </span> -->

                      <!-- <span class="text-danger" *ngIf="serviceForm.get('reimbursment_rate').errors?.['pattern']">
                        Only numbers are allowed from 0 - 100.
                      </span> -->
                    </div>
                  </div>

                  <div class="col-sm-6 col-md-4">
                    <div class="form_field_wrapper">
                      <label>{{'contract_exclusion'|translate}}</label>
                      <mat-form-field appearance="fill">
                        <textarea formControlName="contract_exclusion" matInput>
                        </textarea>
                      </mat-form-field>
                      <!-- <span class="text-danger"
                        *ngIf="isSubmitted && serviceFormControl['contract_exclusion'].errors?.['required']">
                        Please Enter Total Primary Secondary Care Limit
                      </span> -->
                    </div>
                  </div>
                </div>
              </form>
              <div class="primary_btn">
                <button type="button" class="btn btn-secondary" (click)="closePopup()">
                  {{'cancel'|translate}}
                </button>
                <button type="button" class="btn btn-primary" (click)="
                    openVerticallyCenteredNewplan(newhealthplancontent, true)
                  ">
                  {{'add_default_health_plan'|translate}}
                </button>
              </div>
            </mat-tab>

            <!----------Add Actual Plan----------->

            <mat-tab label="Add Actual Health Plan">
              <form [formGroup]="serviceFormactual">
                <div class="row">
                  <div class="col-sm-12 col-lg-12">
                    <div class="form_field_wrapper">
                      <mat-form-field appearance="fill">
                        <mat-select disableRipple placeholder="Select" (selectionChange)="
                            handleDefaultPlanSelect($event, false)
                          ">
                          <mat-option *ngFor="let default of insPlanListActual" [value]="default?._id">{{
                            default?.plan_name }}</mat-option>

                          <!-- <mat-option value="actual">actual</mat-option> -->
                        </mat-select>
                      </mat-form-field>
                      <span class="text-danger"
                        *ngIf="isSubmitted && serviceFormControlactual['plan_type'].errors?.['required']">
                        {{'please_select_health_plan'|translate}}
                      </span>
                    </div>
                  </div>
                </div>

                <div class="modal_body_title_wrap">
                  <div class="modal_body_title"> {{ "services" | translate }} ({{ subServiceFormsactual.length }})</div>
                  <div class="primary_btn">
                    <!-- <button type="button" class="btn btn-primary">
                      <a class="btn_svg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="18" viewBox="0 0 15 18" fill="none">
                          <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M3.30524 0.0827418C2.45473 0.279185 1.74256 0.710972 1.1383 1.39669C0.617787 1.98733 0.294089 2.62138 0.0925399 3.44513L0.000194303 3.82243V8.97532C0.000194303 14.6951 -0.0167024 14.3029 0.264637 15.1118C0.767629 16.5578 2.00379 17.6649 3.41158 17.9299C3.9046 18.0228 11.0724 18.0236 11.5627 17.9309C13.0347 17.6525 14.2649 16.5174 14.7627 14.9782C14.9946 14.2613 14.9997 14.1647 14.9998 10.5064L15 7.18025L12.7412 7.17962C10.2094 7.17894 10.2091 7.1789 9.68232 6.88299C8.9551 6.47439 8.48379 5.75649 8.35241 4.85723C8.32863 4.69462 8.31216 3.64858 8.312 2.29135L8.31169 0L5.97469 0.00295656C3.87026 0.00565972 3.60461 0.0136002 3.30524 0.0827418ZM9.99355 2.59997V4.67168L10.0971 4.89605C10.225 5.17325 10.458 5.34747 10.7505 5.38468C10.8612 5.39875 11.7483 5.40462 12.7218 5.39773L14.4918 5.38519L12.2427 2.9567L9.99355 0.528255V2.59997ZM7.87179 7.30206C8.05663 7.40445 8.17393 7.53956 8.25114 7.73913C8.29996 7.86525 8.31169 8.08767 8.31169 8.88675V9.87796L9.26018 9.89126C10.1436 9.9036 10.2194 9.91078 10.3651 9.99546C10.4512 10.0455 10.5603 10.1313 10.6077 10.1861C10.8993 10.5237 10.8745 11.1318 10.5558 11.4545C10.3318 11.6814 10.2333 11.6996 9.2321 11.6996H8.31169L8.31083 12.7027C8.31009 13.5889 8.30152 13.7255 8.23753 13.8748C7.94039 14.5679 7.0713 14.575 6.74358 13.887C6.67622 13.7456 6.66895 13.6312 6.66895 12.715V11.6996H5.74854C5.00493 11.6996 4.80021 11.687 4.68271 11.634C4.37118 11.4935 4.16572 11.1672 4.16572 10.813C4.16572 10.4402 4.31404 10.1707 4.61552 9.99546C4.76121 9.91078 4.83705 9.9036 5.72046 9.89126L6.66895 9.87796V8.88675C6.66895 8.08767 6.68068 7.86525 6.72949 7.73913C6.91466 7.2605 7.43634 7.06094 7.87179 7.30206Z" />
                        </svg></a>Import
                    </button> -->
                  </div>
                </div>
                <!-- <form [formGroup]="serviceForm"> -->
                <div formArrayName="newService" class="scroll_div">
                  <ng-container *ngFor="
                      let row of subServiceFormsactual.controls;
                      let i = index
                    ">
                    <ng-container [formGroupName]="i">
                      <div class="modal_content service">
                        <div class="row modal_content_inner">
                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{
                                "category_of_service" | translate
                                }}</label>
                              <mat-form-field appearance="fill">
                                <!-- <mat-label>Sub-admin</mat-label> -->
                                <input type="text" formControlName="category_of_service" matInput />
                              </mat-form-field>
                            </div>
                            <span class="text-danger"
                              *ngIf="isSubmitted && subServiceFormsactual.controls[i].get('category_of_service')?.errors?.['required']">
                              {{
                              "please_select_category_of_service" | translate
                              }}
                            </span>
                          </div>

                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{
                                "primary_and_secondary_category_limit" | translate
                                }}</label>
                              <mat-form-field appearance="fill">
                                <input type="number" formControlName="primary_and_secondary_category_limit" matInput />
                              </mat-form-field>
                            </div>
                            <span class="text-danger"
                              *ngIf="isSubmitted && subServiceForms.controls[i]?.get('primary_and_secondary_category_limit')?.errors?.['required']">
                              {{
                              "please_select_primary_and_secondary_category_limit" | translate
                              }}
                            </span>
                          </div>

                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{ "category_limit" | translate }}</label>
                              <mat-form-field appearance="fill">
                                <input type="number" matInput formControlName="category_limit" />
                              </mat-form-field>

                            </div>
                            <span class="text-danger"
                              *ngIf="isSubmitted && subServiceFormsactual.controls[i].get('category_limit')?.errors?.['required']">
                              {{'please_enter_category_limit'|translate}}
                            </span>
                          </div>
                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{
                                "category_condition" | translate
                                }}</label>
                              <mat-form-field appearance="fill">
                                <!-- <mat-label>Sub-admin</mat-label> -->
                                <mat-select disableRipple placeholder="Select" formControlName="category_condition">
                                  <mat-option value="no">{{'no'|translate}}</mat-option>
                                  <mat-option value="yes">{{'yes'|translate}}</mat-option>
                                </mat-select>
                              </mat-form-field>

                            </div>
                            <span class="text-danger"
                              *ngIf="isSubmitted && subServiceFormsactual.controls[i].get('category_condition')?.errors?.['required']">
                              {{'please_select_category_condition'|translate}}
                            </span>
                          </div>
                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{ "service_code" | translate }}</label>
                              <mat-form-field appearance="fill">
                                <!-- <mat-label>Sub-admin</mat-label> -->
                                <input type="text" formControlName="service_code" matInput />
                              </mat-form-field>
                            </div>
                            <span class="text-danger"
                              *ngIf="isSubmitted && subServiceFormsactual.controls[i].get('service_code')?.errors?.['required']">
                              {{ "please_select_service_code" | translate }}
                            </span>
                          </div>
                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{ "service_name" | translate }}</label>
                              <mat-form-field appearance="fill">
                                <!-- <mat-label>Sub-admin</mat-label> -->
                                <input type="text" formControlName="type_of_service" matInput />
                              </mat-form-field>
                            </div>
                            <span class="text-danger"
                              *ngIf="isSubmitted && subServiceFormsactual.controls[i].get('type_of_service')?.errors?.['required']">
                              {{ "please_select_type_of_service" | translate }}
                            </span>
                          </div>

                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{
                                "primary_and_secondary_service_limit" | translate
                                }}</label>
                              <mat-form-field appearance="fill">
                                <input type="number" formControlName="primary_and_secondary_service_limit" matInput />
                              </mat-form-field>
                            </div>
                            <span class="text-danger"
                              *ngIf="isSubmitted && subServiceForms.controls[i]?.get('primary_and_secondary_service_limit')?.errors?.['required']">
                              {{
                              "please_select_primary_and_secondary_service_limit" | translate
                              }}
                            </span>
                          </div>

                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{ "service_limit" | translate }}</label>
                              <mat-form-field appearance="fill">
                                <input type="number" matInput formControlName="service_limit" />
                              </mat-form-field>

                            </div>
                            <span class="text-danger"
                              *ngIf="isSubmitted && subServiceFormsactual.controls[i].get('service_limit')?.errors?.['required']">
                              {{'please_enter_service_limit'|translate}}
                            </span>
                          </div>

                          <div class="item repayment">
                            <div class="repayment_wrap">
                              <label>{{
                                "repayment_condition" | translate
                                }}</label>
                              <div class="row repayment_inner">
                                <div class="col-sm-3 item_inner">
                                  <div class="form_field_wrapper">
                                    <mat-form-field class="inner_label" appearance="fill">
                                      <mat-label>{{'maximum'|translate}}</mat-label>
                                      <input type="number" matInput formControlName="repayment_condition_max" />
                                    </mat-form-field>
                                  </div>
                                  <span class="text-danger"
                                    *ngIf="isSubmitted && subServiceFormsactual.controls[i].get('repayment_condition_max')?.errors?.['required']">
                                    {{'please_select_repayment_condition'|translate}}
                                  </span>
                                </div>
                                <div class="col-sm-3 item_inner">
                                  <div class="form_field_wrapper">
                                    <mat-form-field class="inner_label" appearance="fill">
                                      <mat-label>For</mat-label>
                                      <input type="number" matInput formControlName="repayment_condition_for" />
                                    </mat-form-field>
                                  </div>
                                  <span class="text-danger"
                                    *ngIf="isSubmitted && subServiceFormsactual.controls[i].get('repayment_condition_for')?.errors?.['required']">
                                    {{'please_select_repayment_condition'|translate}}
                                  </span>
                                </div>
                                <div class="col-sm-3 item_inner">
                                  <div class="form_field_wrapper">
                                    <mat-form-field class="inner_label" appearance="fill">
                                      <mat-select disableRipple placeholder="Select Unit"
                                        formControlName="repayment_condition_unit">
                                        <mat-option value="Year">{{'year'|translate}}</mat-option>
                                        <mat-option value="Month">{{'month'|translate}}</mat-option>
                                        <mat-option value="Day">{{'days'|translate}}</mat-option>
                                      </mat-select>
                                    </mat-form-field>
                                  </div>
                                </div>
                                <span class="text-danger"
                                  *ngIf="isSubmitted && subServiceFormsactual.controls[i].get('repayment_condition')?.errors?.['required']">
                                  {{'please_select_repayment_condition'|translate}}
                                </span>
                              </div>
                            </div>
                          </div>
                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{ "total_max_duration_in_days" | translate }}</label>
                              <mat-form-field appearance="fill">
                                <!-- <mat-label>Sub-admin</mat-label> -->
                                <input type="number" matInput formControlName="total_max_duration_in_days" />
                              </mat-form-field>
                              <span class="text-danger"
                                *ngIf="isSubmitted && subServiceFormsactual.controls[i].get('total_max_duration_in_days')?.errors?.['required']">
                                {{ "total_max_duration_in_days" | translate }}
                              </span>
                            </div>
                          </div>
                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{ "max_extend_duration_in_days" | translate }}</label>
                              <mat-form-field appearance="fill">
                                <!-- <mat-label>Sub-admin</mat-label> -->
                                <input type="number" matInput formControlName="max_extend_duration_in_days" />
                              </mat-form-field>
                              <span class="text-danger"
                                *ngIf="isSubmitted && subServiceFormsactual.controls[i].get('max_extend_duration_in_days')?.errors?.['required']">
                                {{ "max_extend_duration_in_days" | translate }}
                              </span>
                            </div>
                          </div>
                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{
                                "pre_authorization" | translate
                                }}</label>
                              <mat-form-field appearance="fill">
                                <!-- <mat-label>Sub-admin</mat-label> -->
                                <mat-select disableRipple placeholder="Select" formControlName="pre_authorization">
                                  <mat-option value="no">{{'no'|translate}}</mat-option>
                                  <mat-option value="yes">{{'yes'|translate}}</mat-option>
                                </mat-select>
                              </mat-form-field>
                              <span class="text-danger"
                                *ngIf="isSubmitted && subServiceFormsactual.controls[i].get('pre_authorization')?.errors?.['required']">
                                {{
                                "please_select_pre_authorization" | translate
                                }}
                              </span>
                            </div>
                          </div>
                          <div class="item repayment">
                            <div class="repayment_wrap">
                              <label>{{ "waiting_period" | translate }}</label>
                              <div class="row repayment_inner">
                                <div class="col-sm-6 item_inner">
                                  <div class="form_field_wrapper">
                                    <mat-form-field class="inner_label" appearance="fill">
                                      <mat-label>{{'minimum'|translate}}</mat-label>
                                      <input type="number" matInput formControlName="waiting_period_max" />
                                    </mat-form-field>
                                  </div>
                                  <span class="text-danger"
                                    *ngIf="isSubmitted && subServiceFormsactual.controls[i].get('waiting_period_max')?.errors?.['required']">
                                    {{'please_select_waiting_period'|translate}}
                                  </span>
                                </div>
                                <div class="col-sm-6 item_inner">
                                  <div class="form_field_wrapper">
                                    <mat-form-field class="inner_label" appearance="fill">
                                      <mat-select disableRipple placeholder="Select Unit"
                                        formControlName="waiting_period_unit">
                                        <mat-option value="Year">{{'year'|translate}}</mat-option>
                                        <mat-option value="Month">{{'month'|translate}}</mat-option>
                                        <mat-option value="Day">{{'days'|translate}}</mat-option>
                                      </mat-select>
                                    </mat-form-field>
                                  </div>
                                </div>
                                <span class="text-danger"
                                  *ngIf="isSubmitted && subServiceFormsactual.controls[i].get('waiting_period_unit')?.errors?.['required']">
                                  {{'Please_select_waiting_period_duration'|translate}}
                                </span>
                              </div>
                            </div>
                          </div>
                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{
                                "waiting_period_redeemed" | translate
                                }}</label>
                              <mat-form-field appearance="fill">
                                <!-- <mat-label>Sub-admin</mat-label> -->
                                <mat-select disableRipple placeholder="Select"
                                  formControlName="waiting_period_redeemed">
                                  <mat-option value="no">{{'no'|translate}}</mat-option>
                                  <mat-option value="yes">{{'yes'|translate}}</mat-option>
                                  <mat-option value="Not Applicable">{{'not_applicable'|translate}}</mat-option>
                                </mat-select>
                              </mat-form-field>
                              <span class="text-danger"
                                *ngIf="isSubmitted && subServiceFormsactual.controls[i].get('waiting_period_redeemed')?.errors?.['required']">
                                {{'please_select_waiting_period_redeemed'|translate}}
                              </span>
                            </div>
                          </div>

                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{
                                "reimbursment_rate" | translate
                                }}</label>
                              <mat-form-field appearance="fill">
                                <input type="number" formControlName="reimbursment_rate" matInput />
                              </mat-form-field>

                            </div>
                            <span class="text-danger"
                              *ngIf="isSubmitted && subServiceFormsactual.controls[i].get('reimbursment_rate')?.errors?.['max']">
                              {{'only_numbers_allowed_0_100'|translate}}
                            </span>
                            <span class="text-danger"
                              *ngIf="isSubmitted && subServiceFormsactual.controls[i].get('reimbursment_rate')?.errors?.['required']">
                              {{
                              "please_enter_reimbursment_rate" | translate
                              }}
                            </span>
                          </div>

                          <div class="item">
                            <div class="form_field_wrapper">
                              <label>{{ "description" | translate }}</label>
                              <mat-form-field appearance="fill">
                                <input type="text" matInput formControlName="comment" />
                              </mat-form-field>
                              <!-- <span
                                  class="text-danger"
                                  *ngIf="isSubmitted && subServiceFormsactual.controls[i].get('service_limit')?.errors?.['required']"
                                >
                                  Please Enter Service Limit
                                </span> -->
                            </div>
                          </div>
                        </div>
                        <ng-container *ngIf="i === subServiceFormsactual.length - 1; else remove">
                          <div class="row_generate row_minus" (click)="removeServiceactual(i)"
                            *ngIf="subServiceFormsactual.length>1">
                            <mat-icon class="plus">remove</mat-icon>
                          </div>
                          <div class="row_generate row_add" (click)="addNewServiceactual()">
                            <mat-icon class="plus">add</mat-icon>
                          </div>
                        </ng-container>
                        <ng-template #remove>
                          <div class="row_generate row_minus" (click)="removeServiceactual(i)">
                            <mat-icon class="plus">remove</mat-icon>
                          </div>
                        </ng-template>
                      </div>
                    </ng-container>
                  </ng-container>
                </div>

                <div class="modal_body_title_wrap">
                  <div class="modal_body_title">{{'exclusion'|translate}}</div>
                  <div class="primary_btn">
                    <!-- <button type="button" class="btn btn-primary">
                      <a class="btn_svg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="18" viewBox="0 0 15 18" fill="none">
                          <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M3.30524 0.0827418C2.45473 0.279185 1.74256 0.710972 1.1383 1.39669C0.617787 1.98733 0.294089 2.62138 0.0925399 3.44513L0.000194303 3.82243V8.97532C0.000194303 14.6951 -0.0167024 14.3029 0.264637 15.1118C0.767629 16.5578 2.00379 17.6649 3.41158 17.9299C3.9046 18.0228 11.0724 18.0236 11.5627 17.9309C13.0347 17.6525 14.2649 16.5174 14.7627 14.9782C14.9946 14.2613 14.9997 14.1647 14.9998 10.5064L15 7.18025L12.7412 7.17962C10.2094 7.17894 10.2091 7.1789 9.68232 6.88299C8.9551 6.47439 8.48379 5.75649 8.35241 4.85723C8.32863 4.69462 8.31216 3.64858 8.312 2.29135L8.31169 0L5.97469 0.00295656C3.87026 0.00565972 3.60461 0.0136002 3.30524 0.0827418ZM9.99355 2.59997V4.67168L10.0971 4.89605C10.225 5.17325 10.458 5.34747 10.7505 5.38468C10.8612 5.39875 11.7483 5.40462 12.7218 5.39773L14.4918 5.38519L12.2427 2.9567L9.99355 0.528255V2.59997ZM7.87179 7.30206C8.05663 7.40445 8.17393 7.53956 8.25114 7.73913C8.29996 7.86525 8.31169 8.08767 8.31169 8.88675V9.87796L9.26018 9.89126C10.1436 9.9036 10.2194 9.91078 10.3651 9.99546C10.4512 10.0455 10.5603 10.1313 10.6077 10.1861C10.8993 10.5237 10.8745 11.1318 10.5558 11.4545C10.3318 11.6814 10.2333 11.6996 9.2321 11.6996H8.31169L8.31083 12.7027C8.31009 13.5889 8.30152 13.7255 8.23753 13.8748C7.94039 14.5679 7.0713 14.575 6.74358 13.887C6.67622 13.7456 6.66895 13.6312 6.66895 12.715V11.6996H5.74854C5.00493 11.6996 4.80021 11.687 4.68271 11.634C4.37118 11.4935 4.16572 11.1672 4.16572 10.813C4.16572 10.4402 4.31404 10.1707 4.61552 9.99546C4.76121 9.91078 4.83705 9.9036 5.72046 9.89126L6.66895 9.87796V8.88675C6.66895 8.08767 6.68068 7.86525 6.72949 7.73913C6.91466 7.2605 7.43634 7.06094 7.87179 7.30206Z" />
                        </svg></a>Import
                    </button> -->
                  </div>
                </div>

                <div formArrayName="newExclusion" class="scroll_div">
                  <ng-container *ngFor="
                      let exclu of subExclucionFormsactual.controls;
                      let j = index
                    ">
                    <ng-container [formGroupName]="j">
                      <div class="modal_content exclusion">
                        <div class="row modal_content_inner">
                          <div class="item col-sm-6 col-lg-3">
                            <div class="form_field_wrapper">
                              <label>{{'category_of_exclusion'|translate}}</label>
                              <mat-form-field appearance="fill">
                                <input type="text" matInput formControlName="exclusion" placeholder="enter exclusion" />
                              </mat-form-field>
                              <span class="text-danger"
                                *ngIf="isSubmitted && subExclucionFormsactual.controls[j].get('exclusion')?.errors?.['required']">
                                {{'please_enter_category_of_exclusion'|translate}}
                              </span>
                            </div>
                          </div>
                          <div class="item col-sm-6 col-lg-3">
                            <div class="form_field_wrapper">
                              <label>{{'exclusion_name'|translate}}</label>
                              <mat-form-field appearance="fill">
                                <input type="text" matInput formControlName="in_exclusion"
                                  placeholder="enter exclusion" />
                              </mat-form-field>
                              <span class="text-danger"
                                *ngIf="isSubmitted && subExclucionFormsactual.controls[j].get('in_exclusion')?.errors?.['required']">
                                {{'please_select_exclusion_INN'|translate}}
                              </span>
                            </div>
                          </div>
                          <div class="item col-sm-6 col-lg-3">
                            <div class="form_field_wrapper">
                              <label>{{'brand_name'|translate}}</label>
                              <mat-form-field appearance="fill">
                                <input type="text" formControlName="brand_name" matInput />
                              </mat-form-field>
                              <span class="text-danger"
                                *ngIf="isSubmitted && subExclucionFormsactual.controls[j].get('brand_name')?.errors?.['required']">
                                {{'please_enter_brand_name'|translate}}
                              </span>
                            </div>
                          </div>
                          <div class="item col-sm-6 col-lg-3">
                            <div class="form_field_wrapper">
                              <label>{{'comment'|translate}}</label>
                              <mat-form-field appearance="fill">
                                <input type="text" formControlName="comment" matInput />
                              </mat-form-field>
                              <span class="text-danger"
                                *ngIf="isSubmitted && subExclucionFormsactual.controls[j].get('comment')?.errors?.['required']">
                                {{'please_enter_comment'|translate}}
                              </span>
                            </div>
                          </div>
                        </div>
                        <ng-container *ngIf="j === subExclucionFormsactual.length - 1; else remove">
                          <div class="row_generate row_minus" (click)="removeExclusionactual(j)"
                            *ngIf="subExclucionFormsactual.length>1">
                            <mat-icon class="plus">remove</mat-icon>
                          </div>
                          <div class="row_generate row_add" (click)="addNewExclusionactual()">
                            <mat-icon class="plus">add</mat-icon>
                          </div>
                        </ng-container>
                        <ng-template #remove>
                          <div class="row_generate row_minus" (click)="removeExclusionactual(j)">
                            <mat-icon class="plus">remove</mat-icon>
                          </div>
                        </ng-template>
                      </div>
                    </ng-container>
                  </ng-container>
                </div>

                <div class="row">
                  <div class="col-sm-12 col-md-12">
                    <div class="form_field_wrapper">
                      <label>{{'description'|translate}}</label>
                      <mat-form-field appearance="fill">
                        <input type="text" formControlName="description" matInput />
                      </mat-form-field>
                      <!-- <span class="text-danger"
                        *ngIf="isSubmitted && serviceFormControl['description'].errors?.['required']">
                        Please Enter Description
                      </span> -->
                    </div>
                  </div>
                  <div class="col-sm-6 col-md-4">
                    <div class="form_field_wrapper">
                      <label>{{'total_primary_care_limit'|translate}}</label>
                      <mat-form-field appearance="fill">
                        <input type="number" formControlName="primary_care_limit" matInput />
                      </mat-form-field>
                      <span class="text-danger"
                        *ngIf="isSubmitted && serviceFormactual.get('primary_care_limit').errors?.['required']">
                        {{'please_enter_total_primary_care_limit'|translate}}
                      </span>
                    </div>
                  </div>
                  <div class="col-sm-6 col-md-4">
                    <div class="form_field_wrapper">
                      <label>{{'total_secondary_care_limit'|translate}}</label>
                      <mat-form-field appearance="fill">
                        <input type="number" formControlName="secondary_care_limit" matInput />
                      </mat-form-field>
                      <span class="text-danger"
                        *ngIf="isSubmitted && serviceFormactual.get('secondary_care_limit').errors?.['required']">
                        {{'please_enter_total_secondary_care_limit'|translate}}
                      </span>
                    </div>
                  </div>
                  <div class="col-sm-6 col-md-4">
                    <div class="form_field_wrapper">
                      <label>{{'total_primary_and_secondary_care_limit'|translate}}</label>
                      <mat-form-field appearance="fill">
                        <input type="number" formControlName="grand_total" matInput />
                      </mat-form-field>
                      <span class="text-danger"
                        *ngIf="isSubmitted && serviceFormactual.get('grand_total').errors?.['required']">
                        {{'please_enter_total_primary_secondary_care_limit'|translate}}
                      </span>
                    </div>
                  </div>

                  <div class="col-sm-6 col-md-4">
                    <div class="form_field_wrapper">
                      <label>{{'reimbursment_rate'|translate}}</label>
                      <mat-form-field appearance="fill">
                        <input type="number" formControlName="reimbursment_rate" matInput  />
                      </mat-form-field>

                    </div>
                    <span class="text-danger"
                      *ngIf="isSubmitted && serviceFormactual.get('reimbursment_rate').errors?.['required']">
                      {{'please_enter_reimbursment_rate'|translate}}
                    </span>
                    <span class="text-danger"
                      *ngIf="isSubmitted && serviceFormactual.get('reimbursment_rate').errors?.['max']">
                      {{'only_numbers_allowed_0_100'|translate}}
                    </span>
                    <!-- <span class="text-danger"
                     *ngIf="isSubmitted && serviceFormactual['reimbursment_rate'].errors?.['max']">
                      Only numbers are allowed from 0 - 100.
                    </span>
                    <span class="text-danger"
                        *ngIf="isSubmitted && serviceFormactual['reimbursment_rate'].errors?.['required']">
                        Please Enter Reimbursment Rate
                      </span> -->
                  </div>

                  <div class="col-sm-6 col-md-4">
                    <div class="form_field_wrapper">
                      <label>{{'contract_exclusions'|translate}}</label>
                      <mat-form-field appearance="fill">
                        <textarea formControlName="contract_exclusion" matInput>
                        </textarea>
                      </mat-form-field>
                      <span class="text-danger"
                        *ngIf="isSubmitted && serviceFormactual.get('contract_exclusion').errors?.['required']">
                        {{'please_enter_total_primary_secondary_care_limit'|translate}}
                      </span>
                    </div>
                  </div>
                </div>

                <div class="primary_btn">
                  <button type="button" class="btn btn-secondary" (click)="closePopup()">
                    {{'cancel'|translate}}
                  </button>
                  <button type="button" class="btn btn-primary" (click)="
                      openVerticallyCenteredNewplan(newhealthplancontent, false)
                    ">
                    {{'add_actual_health_plan'|translate}}
                  </button>
                </div>
              </form>
            </mat-tab>
          </mat-tab-group>
        </div>
      </div>
    </div>
  </ng-template>
</div>

<!-- ---------------------------------------New Health Plan Name modal---------------------------------------- -->
<div class="new_healthplan_name">
  <ng-template #newhealthplancontent let-modal>
    <div class="custome_modal">
      <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">
          {{'enter_new_health_plan_name'|translate}}
        </h4>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')">
          <mat-icon>close</mat-icon>
        </button>
      </div>
      <div class="modal-body">
        <form>
          <div class="row">
            <div class="col-sm-12 col-md-12">
              <div class="form_field_wrapper">
                <label>{{'new_health_plan_name'|translate}}</label>
                <mat-form-field appearance="fill">
                  <input type="text" placeholder="Health Plan Name" matInput #companyName />
                </mat-form-field>
              </div>
            </div>
          </div>
        </form>
        <div class="primary_btn">
          <button type="button" class="btn btn-secondary" (click)="closePopup()">
            {{'cancel'|translate}}
          </button>
          <button type="button" class="btn btn-primary" (click)="addPlan(companyName)">
            {{'save_health_plan'|translate}}
          </button>
        </div>
      </div>
    </div>
  </ng-template>
</div>

<ng-template #deleteModal let-modal>
  <div class="custome_modal action_modals">
    <div class="modal-body">
      <div class="delete_screen text-center">
        <div class="image delete">
          <img class="img-fluid" src="../../../../assets/img/delete.svg" alt="" />
        </div>
        <p class="heading delete">{{'are_you_sure'|translate}}</p>
        <p>{{'you_want_to_delete'|translate}}</p>
        <div class="primary_btn mt-30">
          <button type="button" class="btn btn-secondary" (click)="modal.dismiss('Cross click')">
            {{'no'|translate}}
          </button>
          <button type="button" class="btn btn-primary" (click)="handelDeletePlanServiceOrEclusion()">
            {{'yes'|translate}}
          </button>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #importServices let-modal>
  <div class="custome_modal">
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title"></h4>
      <button type="button" class="btn-close" id="closebutton" aria-label="Close"
        (click)="modal.dismiss('Cross click')">
        <mat-icon>close</mat-icon>
      </button>
    </div>
    <div class="modal-body import_services">
      <h3>{{'upload_csvFile_import_service'|translate}}</h3>
      <form [formGroup]="serviceExcleForm" (ngSubmit)="excleSubmit()">
        <div class="row">
          <div class="col-sm-6 upload_item">
            <div class="form_field_wrapper">
              <label>{{'choose_file'|translate}}</label>
              <div class="upload_input">
                <input (change)="fileChange($event)" formControlName="service_csv" class="ng-hide user_upload_input"
                  accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"
                  id="input-file-id" type="file" />
                <span *ngIf="selectedFiles">
                  {{'selcted'|translate}} {{ selectfilename }} {{'file'|translate}}
                </span>
                <span *ngIf="
                    serviceExcleForm.get('service_csv').hasError('required')
                  " style="color: red">
                  {{'excel_required'|translate}}
                </span>
              </div>
            </div>
          </div>
          <div class="download_content col-sm-6">
            <button type="button" placement="top" ngbTooltip="Tooltip on top" (click)="downLoadServiceExcel()"
              class="btn btn-secondary">
              {{'download_sample_file'|translate}}
            </button>
          </div>
        </div>
        <div class="primary_btn">
          <button type="button" class="btn btn-secondary" (click)="modal.dismiss('Cross click')">
            {{'cancel'|translate}}
          </button>
          <button type="submit" class="btn btn-primary">{{'upload'|translate}}</button>
        </div>
      </form>
    </div>
  </div>
</ng-template>

<ng-template #importExclusion let-modal>
  <div class="custome_modal">
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title"></h4>
      <!-- <button type="button" class="btn-close" aria-label="Close"
      (click)="modal.dismiss('Cross click')"><mat-icon>close</mat-icon></button> -->
      <button type="button" class="btn-close" id="closebuttonexclusion" aria-label="Close"
        (click)="modal.dismiss('Cross click')">
        <mat-icon>close</mat-icon>
      </button>
    </div>
    <div class="modal-body import_services" id="excluModal">
      <h3>{{'upload_csvFile_import_exclusion'|translate}}</h3>
      <form [formGroup]="exclusionExcleForm" (ngSubmit)="excluExcelSubmit()">
        <div class="row">
          <div class="col-sm-6 upload_item">
            <div class="form_field_wrapper">
              <label>{{'choose_file'|translate}}</label>
              <div class="upload_input">
                <input (change)="fileChange($event)" formControlName="exclusion_csv" class="ng-hide user_upload_input"
                  accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"
                  id="input-file-id" type="file" />
                <span *ngIf="selectedFiles">
                  {{'selected'|translate}} {{ selectfilename }} {{'file'|translate}}
                </span>
                <span *ngIf="
                    exclusionExcleForm.get('exclusion_csv').hasError('required')
                  " style="color: red">
                  {{'excel_required'|translate}}
                </span>
              </div>
            </div>
          </div>
          <div class="download_content col-sm-6">
            <button type="button" placement="top" ngbTooltip="Tooltip on top" (click)="downLoadExclusionExcel()"
              class="btn btn-secondary">
              {{'download_sample_file'|translate}}
            </button>
          </div>
        </div>
        <div class="primary_btn">
          <button type="button" class="btn btn-secondary">{{'cancel'|translate}}</button>
          <button type="submit" class="btn btn-primary">{{'upload'|translate}}</button>
        </div>
      </form>
    </div>
  </div>
</ng-template>



<ng-template #deletePopupSelected let-modal>
  <div class="custome_modal action_modals">
    <div class="modal-body">
      <div class="delete_screen text-center">
        <div class="image delete">
          <img class="img-fluid" src="../../../../assets/img/delete.svg" alt="" />
        </div>
        <p class="heading delete">{{'are_you_sure'|translate}}</p>
        <p>{{'want_to_del_selected_labs'|translate}}</p>
        <div class="primary_btn mt-30">
          <button type="button" class="btn btn-secondary" (click)="modal.dismiss('Cross click')">
            {{'no'|translate}}
          </button>
          <button type="button" class="btn btn-primary" (click)="deletelab('')">
            {{'yes'|translate}}
          </button>
        </div>
      </div>
    </div>
  </div>
</ng-template>


<ng-template #deletePopupAll let-modal>
  <div class="custome_modal action_modals">
    <div class="modal-body">
      <div class="delete_screen text-center">
        <div class="image delete">
          <img class="img-fluid" src="../../../../assets/img/delete.svg" alt="" />
        </div>
        <p class="heading delete">{{'are_you_sure'|translate}}</p>
        <p>{{'want_to_del_health_plan'|translate}}</p>
        <div class="primary_btn mt-30">
          <button type="button" class="btn btn-secondary" (click)="modal.dismiss('Cross click')">
            {{'no'|translate}}
          </button>
          <button type="button" class="btn btn-primary" (click)="deletelab('all')">
            {{'yes'|translate}}
          </button>
        </div>
      </div>
    </div>
  </div>
</ng-template>