<div class="medicineprice_request dashboard_main_content">
  <div class="medicineprice_tab">
    <mat-tab-group
      class="round-card-tab-group"
      animationDuration="0ms"
      [(selectedIndex)]="selectedTabIndex"
      (selectedTabChange)="onTabChanged($event)"
      #priceTab
    >
      <mat-tab>
        <ng-template mat-tab-label>
          <div class="round-card-style lightblue">
            <div class="counter_wrap">
              <span class="counter">{{ getOrderStatusCount("new") }}</span>
              <div class="title">{{ "new_request" | translate }}</div>
            </div>
            <div class="btn_svg">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="27"
                height="35"
                viewBox="0 0 27 35"
                fill="none"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M6.83358 0.199543L6.60733 0.399015V2.05085V3.70268L6.83358 3.90215L7.05982 4.10162H13.4699C20.4322 4.10162 20.1651 4.11619 20.3445 3.72756C20.4594 3.4788 20.4594 0.622892 20.3445 0.374133C20.1651 -0.0144897 20.4322 7.07572e-05 13.4699 7.07572e-05H7.05982L6.83358 0.199543ZM2.35431 2.15906C1.34036 2.42805 0.575172 3.13168 0.17512 4.16274L0.026391 4.54596L0.00553991 18.3203C-0.00976944 28.4597 0.00567827 32.2029 0.0640755 32.5049C0.29614 33.7045 1.25931 34.6721 2.47166 34.9238C2.7324 34.9779 5.93379 35 13.5235 35C22.8995 35 24.2582 34.9871 24.6159 34.8952C25.6552 34.6281 26.4191 33.934 26.8249 32.8881L26.9736 32.5049L26.9945 18.7305C27.0098 8.59112 26.9943 4.8479 26.9359 4.54596C26.8158 3.92492 26.5479 3.43252 26.078 2.96878C25.3684 2.2685 24.7175 2.05085 23.3334 2.05085H22.5055V2.94171C22.5055 3.66125 22.478 3.91316 22.3623 4.25195C22.0969 5.0296 21.6289 5.54011 20.8462 5.9061L20.3927 6.11822L13.6738 6.13695C7.10111 6.15527 6.9449 6.15268 6.49393 6.01753C5.6763 5.77246 4.97436 5.11628 4.69193 4.33309C4.582 4.02834 4.53815 3.70268 4.51099 2.99079L4.47511 2.05085L3.60157 2.05536C3.07053 2.05809 2.58153 2.09877 2.35431 2.15906ZM10.6259 10.3524C11.0202 10.515 11.2668 11.0097 11.1817 11.4678C11.141 11.6874 10.8822 11.9735 9.35567 13.4861C7.4553 15.3693 7.34585 15.4492 6.80448 15.3495C6.58322 15.3088 6.38933 15.1537 5.66092 14.4349C4.93259 13.7161 4.77541 13.5248 4.73412 13.3065C4.58934 12.5406 5.32675 11.8631 6.04906 12.0984C6.18518 12.1427 6.47003 12.3354 6.68215 12.5267L7.06772 12.8744L8.3269 11.6406C9.01942 10.9621 9.64842 10.3734 9.72462 10.3325C9.92052 10.2273 10.3453 10.2367 10.6259 10.3524ZM21.7904 12.4828C22.3904 12.9242 22.3904 13.736 21.7904 14.1774C21.5977 14.3193 21.5378 14.3216 17.6118 14.3401L13.6286 14.3588L13.3565 14.2079C13.07 14.0489 12.8073 13.6291 12.8073 13.3301C12.8073 13.0409 13.0694 12.6136 13.3436 12.4559L13.6039 12.306L17.5994 12.3225C21.5399 12.3387 21.5976 12.3409 21.7904 12.4828ZM10.671 17.7475C10.921 17.8717 11.132 18.1501 11.1842 18.4245C11.2811 18.9341 11.2233 19.0123 9.4221 20.8039C8.48359 21.7375 7.62218 22.5497 7.50795 22.6089C7.18853 22.7743 6.74865 22.7395 6.43353 22.524C6.2859 22.4231 5.86971 22.04 5.50866 21.6729C4.79917 20.9514 4.64496 20.6603 4.73135 20.2058C4.79217 19.8858 5.17705 19.5034 5.49792 19.444C5.94259 19.3617 6.21746 19.4644 6.65562 19.8768L7.06384 20.2611L8.36701 18.9765C9.36648 17.9912 9.7249 17.6795 9.90521 17.6388C10.1686 17.5794 10.3981 17.6119 10.671 17.7475ZM21.7904 19.3187C22.3904 19.7601 22.3904 20.572 21.7904 21.0134C21.5977 21.1552 21.5378 21.1575 17.6118 21.176L13.6286 21.1947L13.3565 21.0438C13.07 20.8848 12.8073 20.465 12.8073 20.166C12.8073 19.8768 13.0694 19.4496 13.3436 19.2918L13.6039 19.142L17.5994 19.1584C21.5399 19.1746 21.5976 19.1768 21.7904 19.3187ZM10.671 24.5834C10.921 24.7076 11.132 24.9861 11.1842 25.2604C11.2811 25.7701 11.2233 25.8482 9.4221 27.6398C8.48359 28.5734 7.62218 29.3857 7.50795 29.4448C7.18853 29.6102 6.74865 29.5754 6.43353 29.36C6.2859 29.259 5.86971 28.876 5.50866 28.5088C4.79917 27.7873 4.64496 27.4962 4.73135 27.0418C4.79217 26.7218 5.17705 26.3393 5.49792 26.2799C5.94259 26.1976 6.21746 26.3003 6.65562 26.7127L7.06384 27.097L8.36701 25.8124C9.36648 24.8271 9.7249 24.5154 9.90521 24.4747C10.1686 24.4153 10.3981 24.4479 10.671 24.5834ZM21.7432 26.1214C22.0367 26.2841 22.2977 26.6848 22.2977 26.9726C22.2977 27.308 22.0322 27.7453 21.7389 27.8929C21.4827 28.0219 21.313 28.0274 17.5473 28.0274C13.6408 28.0274 13.6215 28.0267 13.3536 27.8781C13.07 27.7208 12.8073 27.2995 12.8073 27.002C12.8073 26.7122 13.0693 26.2855 13.3436 26.1286C13.6026 25.9805 13.6237 25.9797 17.5431 25.9782C21.4284 25.9766 21.4857 25.9786 21.7432 26.1214Z"
                  fill="#447FD9"
                />
              </svg>
            </div>
          </div>
        </ng-template>

        <div class="tab_content">
          <div class="table-wrap">
            <div class="table-inner">
              <table
                mat-table
                [dataSource]="dataSource"
                class="mat-elevation-z8 tablewithimg"
              >
              <ng-container matColumnDef="dateandtime">
                <th
                  mat-header-cell
                  *matHeaderCellDef
                  (click)="onSortData('createdAt')"
                >
                  {{ "date_and_time" | translate }}
                  <span
                    *ngIf="sortColumn === 'createdAt'"
                    class="material-icons sorticon"
                    >{{ sortIconClass }}</span
                  >
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.createdAt | date : "dd-MM-yyyy, h:mm a" }}
                </td>
              </ng-container>

                <ng-container matColumnDef="from">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('from_user.user_name')"
                  >
                    {{ "from" | translate }}
                    <span
                      *ngIf="sortColumn === 'from_user.user_name'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <span class="user_image_wrapper">
                      <img
                        *ngIf="element.patient_details?.image"
                        src="{{ element.patient_details?.image }}"
                        class="user_image"
                      />
                      <img
                        *ngIf="!element.patient_details?.image"
                        src="../../../../assets/img/default_user.png"
                        class="user_image"
                      />
                    </span>
                    <span class="name_user"
                      >{{ element.from_user.user_name }}
                    </span>
                  </td>
                </ng-container>

                <ng-container matColumnDef="patientname">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('patient_details.user_name')"
                  >
                    {{ "patient_name" | translate }}
                    <span
                      *ngIf="sortColumn === 'patient_details.user_name'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <span class="user_image_wrapper">
                      <img
                        *ngIf="element.patient_details?.image"
                        src="{{ element.patient_details?.image }}"
                        class="user_image"
                      />
                      <img
                        *ngIf="!element.patient_details?.image"
                        src="../../../../assets/img/default_user.png"
                        class="user_image"
                      />
                    </span>
                    <span class="name_user"
                      >{{ element.patient_details.user_name }}
                    </span>
                  </td>
                </ng-container>

                <ng-container matColumnDef="orderid">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('order_id')"
                  >
                    {{ "order_id" | translate }}
                    <span
                      *ngIf="sortColumn === 'order_id'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.order_id }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('status')"
                  >
                    {{ "status" | translate }}
                    <span
                      *ngIf="sortColumn === 'status'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>

                  <td mat-cell *matCellDef="let element">
                    <a class="new">{{ element.status }}</a>
                  </td>
                </ng-container>

                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef>
                    {{ "action" | translate }}
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <div class="icon_group">
                        <ng-container *ngIf="giveInnerPermission('view')">

                          <a
                            class="svgicon"
                            (click)="
                              handleOrderClick(
                                element?.patient_details?.user_id,
                                element?._id,
                                element?.insurance_no
                              )
                            "
                          >
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="16"
                              height="9"
                              viewBox="0 0 16 9"
                              fill="none"
                            >
                              <path
                                d="M8 0C2.7512 0 0 3.88286 0 4.5C0 5.11554 2.7512 9 8 9C13.248 9 16 5.11554 16 4.5C16 3.88286 13.248 0 8 0ZM8 7.96098C6.036 7.96098 4.444 6.4117 4.444 4.5C4.444 2.5883 6.036 1.03741 8 1.03741C9.964 1.03741 11.5552 2.5883 11.5552 4.5C11.5552 6.4117 9.964 7.96098 8 7.96098ZM8 4.5C7.6744 4.1408 8.5304 2.76911 8 2.76911C7.0176 2.76911 6.2216 3.54455 6.2216 4.5C6.2216 5.45545 7.0176 6.23089 8 6.23089C8.9816 6.23089 9.7784 5.45545 9.7784 4.5C9.7784 4.06045 8.2768 4.80455 8 4.5Z"
                              />
                            </svg>
                          </a>
                        </ng-container>
                    </div>
                  </td>
                </ng-container>

                <tr
                  mat-header-row
                  *matHeaderRowDef="neworderdisplayedColumns"
                ></tr>
                <tr
                  mat-row
                  *matRowDef="let row; columns: neworderdisplayedColumns"
                ></tr>
              </table>
            </div>
            <mat-paginator
              class="pagination"
              [length]="totalLength"
              (page)="handlePageEvent($event)"
              [pageSize]="pageSize"
              [pageSizeOptions]="[5, 10, 20]"
              showFirstLastButtons
              aria-label="Select page of periodic elements"
            >
            </mat-paginator>
          </div>
        </div>
      </mat-tab>
      <mat-tab>
        <ng-template mat-tab-label>
          <div class="round-card-style lightgreen">
            <div class="counter_wrap">
              <span class="counter">{{ getOrderStatusCount("accepted") }}</span>
              <div class="title">{{ "completed" | translate }}</div>
            </div>
            <div class="btn_svg">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="27"
                height="35"
                viewBox="0 0 27 35"
                fill="none"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M6.73234 0.199543L6.50945 0.399015V2.05085V3.70268L6.73234 3.90215L6.95523 4.10162H13.2703C20.1295 4.10162 19.8664 4.11619 20.0431 3.72756C20.1563 3.4788 20.1563 0.622892 20.0431 0.374133C19.8664 -0.0144897 20.1295 7.07572e-05 13.2703 7.07572e-05H6.95523L6.73234 0.199543ZM2.31943 2.15906C1.32051 2.42805 0.566651 3.13168 0.172526 4.16274L0.026 4.54596L0.00545783 18.3203C-0.00962471 28.4597 0.00559415 32.2029 0.0631262 32.5049C0.291753 33.7045 1.24066 34.6721 2.43504 34.9238C2.69192 34.9779 5.84588 35 13.3231 35C22.5602 35 23.8988 34.9871 24.2512 34.8952C25.2751 34.6281 26.0277 33.934 26.4275 32.8881L26.574 32.5049L26.5945 18.7305C26.6096 8.59112 26.5944 4.8479 26.5369 4.54596C26.4185 3.92492 26.1546 3.43252 25.6917 2.96878C24.9926 2.2685 24.3513 2.05085 22.9877 2.05085H22.1721V2.94171C22.1721 3.66125 22.145 3.91316 22.031 4.25195C21.7695 5.0296 21.3085 5.54011 20.5374 5.9061L20.0906 6.11822L13.4712 6.13695C6.99591 6.15527 6.84201 6.15268 6.39773 6.01753C5.59221 5.77246 4.90066 5.11628 4.62242 4.33309C4.51411 4.02834 4.47091 3.70268 4.44416 2.99079L4.40881 2.05085L3.54822 2.05536C3.02504 2.05809 2.54328 2.09877 2.31943 2.15906ZM10.4684 10.3524C10.857 10.515 11.0999 11.0097 11.0161 11.4678C10.9759 11.6874 10.721 11.9735 9.21707 13.4861C7.34485 15.3693 7.23702 15.4492 6.70368 15.3495C6.48569 15.3088 6.29467 15.1537 5.57706 14.4349C4.85951 13.7161 4.70466 13.5248 4.66398 13.3065C4.52135 12.5406 5.24783 11.8631 5.95944 12.0984C6.09355 12.1427 6.37418 12.3354 6.58315 12.5267L6.96301 12.8744L8.20354 11.6406C8.8858 10.9621 9.50548 10.3734 9.58055 10.3325C9.77355 10.2273 10.192 10.2367 10.4684 10.3524ZM21.4676 12.4828C22.0587 12.9242 22.0587 13.736 21.4676 14.1774C21.2777 14.3193 21.2187 14.3216 17.3509 14.3401L13.4267 14.3588L13.1587 14.2079C12.8763 14.0489 12.6175 13.6291 12.6175 13.3301C12.6175 13.0409 12.8758 12.6136 13.1459 12.4559L13.4024 12.306L17.3386 12.3225C21.2208 12.3387 21.2776 12.3409 21.4676 12.4828ZM10.5129 17.7475C10.7592 17.8717 10.9671 18.1501 11.0185 18.4245C11.114 18.9341 11.057 19.0123 9.28252 20.8039C8.35791 21.7375 7.50926 22.5497 7.39672 22.6089C7.08204 22.7743 6.64867 22.7395 6.33821 22.524C6.19278 22.4231 5.78275 22.04 5.42705 21.6729C4.72807 20.9514 4.57615 20.6603 4.66125 20.2058C4.72118 19.8858 5.10035 19.5034 5.41647 19.444C5.85455 19.3617 6.12535 19.4644 6.55701 19.8768L6.95919 20.2611L8.24305 18.9765C9.22771 17.9912 9.58082 17.6795 9.75847 17.6388C10.0179 17.5794 10.244 17.6119 10.5129 17.7475ZM21.4676 19.3187C22.0587 19.7601 22.0587 20.572 21.4676 21.0134C21.2777 21.1552 21.2187 21.1575 17.3509 21.176L13.4267 21.1947L13.1587 21.0438C12.8763 20.8848 12.6175 20.465 12.6175 20.166C12.6175 19.8768 12.8758 19.4496 13.1459 19.2918L13.4024 19.142L17.3386 19.1584C21.2208 19.1746 21.2776 19.1768 21.4676 19.3187ZM10.5129 24.5834C10.7592 24.7076 10.9671 24.9861 11.0185 25.2604C11.114 25.7701 11.057 25.8482 9.28252 27.6398C8.35791 28.5734 7.50926 29.3857 7.39672 29.4448C7.08204 29.6102 6.64867 29.5754 6.33821 29.36C6.19278 29.259 5.78275 28.876 5.42705 28.5088C4.72807 27.7873 4.57615 27.4962 4.66125 27.0418C4.72118 26.7218 5.10035 26.3393 5.41647 26.2799C5.85455 26.1976 6.12535 26.3003 6.55701 26.7127L6.95919 27.097L8.24305 25.8124C9.22771 24.8271 9.58082 24.5154 9.75847 24.4747C10.0179 24.4153 10.244 24.4479 10.5129 24.5834ZM21.4211 26.1214C21.7103 26.2841 21.9673 26.6848 21.9673 26.9726C21.9673 27.308 21.7058 27.7453 21.4169 27.8929C21.1645 28.0219 20.9972 28.0274 17.2874 28.0274C13.4387 28.0274 13.4197 28.0267 13.1557 27.8781C12.8763 27.7208 12.6175 27.2995 12.6175 27.002C12.6175 26.7122 12.8756 26.2855 13.1459 26.1286C13.4011 25.9805 13.4219 25.9797 17.2832 25.9782C21.1109 25.9766 21.1674 25.9786 21.4211 26.1214Z"
                  fill="#72D284"
                />
              </svg>
            </div>
          </div>
        </ng-template>

        <div class="tab_content">
          <div class="table-wrap">
            <div class="table-inner">
              <table
                mat-table
                [dataSource]="dataSource"
                class="mat-elevation-z8 tablewithimg"
              >
              <ng-container matColumnDef="dateandtime">
                <th
                  mat-header-cell
                  *matHeaderCellDef
                  (click)="onSortData('createdAt')"
                >
                  {{ "date_and_time" | translate }}
                  <span
                    *ngIf="sortColumn === 'createdAt'"
                    class="material-icons sorticon"
                    >{{ sortIconClass }}</span
                  >
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.createdAt | date : "dd-MM-yyyy, h:mm a" }}
                </td>
              </ng-container>
                <ng-container matColumnDef="from">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('from_user.user_name')"
                  >
                    {{ "from" | translate }}
                    <span
                      *ngIf="sortColumn === 'from_user.user_name'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <span class="user_image_wrapper">
                      <img
                        *ngIf="element.patient_details?.image"
                        src="{{ element.patient_details?.image }}"
                        class="user_image"
                      />
                      <img
                        *ngIf="!element.patient_details?.image"
                        src="../../../../assets/img/default_user.png"
                        class="user_image"
                      />
                    </span>
                    <span class="name_user"
                      >{{ element.from_user.user_name }}
                    </span>
                  </td>
                </ng-container>

                <ng-container matColumnDef="patientname">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('patient_details.user_name')"
                  >
                    {{ "patient_name" | translate }}
                    <span
                      *ngIf="sortColumn === 'patient_details.user_name'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <span class="user_image_wrapper">
                      <img
                        *ngIf="element.patient_details?.image"
                        src="{{ element.patient_details?.image }}"
                        class="user_image"
                      />
                      <img
                        *ngIf="!element.patient_details?.image"
                        src="../../../../assets/img/default_user.png"
                        class="user_image"
                      />
                    </span>
                    <span class="name_user"
                      >{{ element.patient_details.user_name }}
                    </span>
                  </td>
                </ng-container>

                <ng-container matColumnDef="orderid">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('order_id')"
                  >
                    {{ "order_id" | translate }}
                    <span
                      *ngIf="sortColumn === 'order_id'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.order_id }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    (click)="onSortData('status')"
                  >
                    {{ "status" | translate }}
                    <span
                      *ngIf="sortColumn === 'status'"
                      class="material-icons sorticon"
                      >{{ sortIconClass }}</span
                    >
                  </th>

                  <td mat-cell *matCellDef="let element">
                    <a class="solved">{{ element.status }}</a>
                  </td>
                </ng-container>

                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef>
                    {{ "action" | translate }}
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <div class="icon_group">
                      <ng-container *ngIf="giveInnerPermission('view')">

                      <a class="svgicon" (click)="gotocompleted(element._id)">
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="9"
                          viewBox="0 0 16 9"
                          fill="none"
                        >
                          <path
                            d="M8 0C2.7512 0 0 3.88286 0 4.5C0 5.11554 2.7512 9 8 9C13.248 9 16 5.11554 16 4.5C16 3.88286 13.248 0 8 0ZM8 7.96098C6.036 7.96098 4.444 6.4117 4.444 4.5C4.444 2.5883 6.036 1.03741 8 1.03741C9.964 1.03741 11.5552 2.5883 11.5552 4.5C11.5552 6.4117 9.964 7.96098 8 7.96098ZM8 4.5C7.6744 4.1408 8.5304 2.76911 8 2.76911C7.0176 2.76911 6.2216 3.54455 6.2216 4.5C6.2216 5.45545 7.0176 6.23089 8 6.23089C8.9816 6.23089 9.7784 5.45545 9.7784 4.5C9.7784 4.06045 8.2768 4.80455 8 4.5Z"
                          />
                        </svg>
                      </a>
                      </ng-container>
                    </div>
                  </td>
                </ng-container>

                <tr
                  mat-header-row
                  *matHeaderRowDef="completeddisplayedColumns"
                ></tr>
                <tr
                  mat-row
                  *matRowDef="let row; columns: completeddisplayedColumns"
                ></tr>
              </table>
            </div>
            <mat-paginator
              class="pagination"
              [length]="totalLength"
              (page)="handlePageEvent($event)"
              [pageSize]="pageSize"
              [pageSizeOptions]="[5, 10, 20]"
              showFirstLastButtons
              aria-label="Select page of periodic elements"
            >
            </mat-paginator>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>
