<div class="individualdr_dashboard dashboard_main_content">
  <div class="top_bar common_space">
    <div class="content_wrap">
      <!-- <div class="policy top_policy">
          <div class="form_field_wrapper">
            <mat-form-field appearance="fill">
              <mat-select placeholder="Doctor">
                <mat-option value="option1">Option1</mat-option>
                <mat-option value="option2">Option2</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <div class="policy top_policy">
          <div class="form_field_wrapper">
            <mat-form-field appearance="fill">
              <mat-select placeholder="Specialty ">
                <mat-option value="option1">Option1</mat-option>
                <mat-option value="option2">Option2</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <div class="policy top_policy">
          <div class="form_field_wrapper">
            <mat-form-field appearance="fill">
              <mat-select placeholder="Department ">
                <mat-option value="option1">Option1</mat-option>
                <mat-option value="option2">Option2</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div> -->

      <div class="policy date top_policy">
        <div class="form_field_wrapper">
          <mat-form-field class="example-full-width" appearance="fill">
            <input
              matInput
              [matDatepickerFilter]="myFilter"
              placeholder="Date"
              (dateChange)="getSelectedDate($event)"
              [matDatepicker]="picker1"
            />
            <mat-datepicker-toggle
              matSuffix
              [for]="picker1"
            ></mat-datepicker-toggle>
            <mat-datepicker #picker1></mat-datepicker>
          </mat-form-field>
        </div>
      </div>
    </div>
  </div>

  <div class="counter_section common_space">
    <div class="row">
      <div class="col-sm-6 col-md-6 col-lg-6 col-xl-3">
        <div class="cust_col light_blue">
          <div class="cust_col_inner header-card-inner">
            <!--  <mat-icon
                class="more"
                [routerLink]="['/individual-doctor/patientmanagement']"
                >more_horiz</mat-icon
              > -->
            <div class="action-block">
              <div class="more_action">
                <button
                  class="btn btn-outline-light"
                  type="button"
                  id="dropdownMenuButton2"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  <mat-icon>more_horiz</mat-icon>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton2">
                  <li>
                    <a
                      class="dropdown-item"
                      [routerLink]="['/portals/appointment/', route_type]"
                      >{{ "view" | translate }}</a
                    >
                  </li>
                </ul>
              </div>
            </div>

            <div class="left">
              <div class="counter">{{ totalTestsCount }}</div>
              <div class="counter_title">{{ "total_tests" | translate }}</div>
            </div>
            <div class="right">
              <div class="counter_img">
                <img src="assets/img/dashboard/dashboard51.svg" />
              </div>
            </div>
          </div>
        </div>
      </div>
      <ng-container *ngIf="giveInnerPermission('online_appoinment_count')">
      <div class="col-sm-6 col-md-6 col-lg-6 col-xl-3">
        <div class="cust_col light_violet">
          <div class="cust_col_inner header-card-inner">
            <!-- <mat-icon
                class="more"
                [routerLink]="['/individual-doctor/appointment']"
                [queryParams]="{ type: 'ONLINE' }"
                >more_horiz</mat-icon
              > -->
            <div class="action-block">
              <div class="more_action">
                <button
                  class="btn btn-outline-light"
                  type="button"
                  id="dropdownMenuButton2"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  <mat-icon>more_horiz</mat-icon>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton2">
                  <li>
                    <a
                      class="dropdown-item"
                      [routerLink]="['/portals/appointment/', route_type]"
                      [queryParams]="{ type: 'ONLINE' }"
                      >{{ "view" | translate }}</a
                    >
                  </li>
                </ul>
              </div>
            </div>

            <div class="left">
              <div class="counter">{{ onlineAppCount }}</div>
              <div class="counter_title">{{ "online_tests" | translate }}</div>
            </div>
            <div class="right">
              <div class="counter_img">
                <img src="assets/img/dashboard/dashboard52.svg" />
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="giveInnerPermission('home_appoinment_count')">
      <div class="col-sm-6 col-md-6 col-lg-6 col-xl-3">
        <div class="cust_col light_skyblue">
          <div class="cust_col_inner header-card-inner">
            <!-- <mat-icon class="more" [routerLink]="['/individual-doctor/appointment']"
              [queryParams]="{ type: 'HOME_VISIT' }">more_horiz</mat-icon> -->
            <div class="action-block">
              <div class="more_action">
                <button
                  class="btn btn-outline-light"
                  type="button"
                  id="dropdownMenuButton2"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  <mat-icon>more_horiz</mat-icon>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton2">
                  <li>
                    <a
                      class="dropdown-item"
                      [routerLink]="['/portals/appointment/', route_type]"
                      [queryParams]="{ type: 'HOME_VISIT' }"
                      >{{ "view" | translate }}</a
                    >
                  </li>
                </ul>
              </div>
            </div>

            <div class="left">
              <div class="counter">{{ homeVisitAppCount }}</div>
              <div class="counter_title">
                {{ "home_visit_tests" | translate }}
              </div>
            </div>
            <div class="right">
              <div class="counter_img">
                <img src="assets/img/dashboard/dashboard53.svg" />
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="giveInnerPermission('hospital_appoinment_count')">
      <div class="col-sm-6 col-md-6 col-lg-6 col-xl-3">
        <div class="cust_col light_blue">
          <div class="cust_col_inner header-card-inner">
            <!-- <mat-icon class="more" [routerLink]="['/individual-doctor/appointment']"
              [queryParams]="{ type: 'FACE_TO_FACE' }">more_horiz</mat-icon> -->
            <div class="action-block">
              <div class="more_action">
                <button
                  class="btn btn-outline-light"
                  type="button"
                  id="dropdownMenuButton2"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  <mat-icon>more_horiz</mat-icon>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton2">
                  <li>
                    <a
                      class="dropdown-item"
                      [routerLink]="['/portals/appointment/', route_type]"
                      [queryParams]="{ type: 'FACE_TO_FACE' }"
                      >{{ "view" | translate }}</a
                    >
                  </li>
                </ul>
              </div>
            </div>

            <div class="left">
              <div class="counter">{{ f2fAppCount }}</div>
              <div class="counter_title">
                {{ "hospital_clinic_tests" | translate }}
              </div>
            </div>
            <div class="right">
              <div class="counter_img">
                <img src="assets/img/dashboard/dashboard54.svg" />
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
    </div>
  </div>

  <div class="appointment_section">
    <div class="row">
      <ng-container *ngIf="giveInnerPermission('today_app_list')">
      <div class="col-md-6 today_appointment appointment">
        <div class="today_appointment_inner common_space">
          <div class="top_bar">
            <div class="left_part">
              <div class="main_title">
                {{ "todays_tests" | translate }} ({{ dataSource?.length }})
              </div>
            </div>
            <div class="right_part">
              <div class="primary_btn">
                <button
                  class="btn btn-primary"
                  [routerLink]="['/portals/appointment/route_type']"
                  [queryParams]="{ id: 'TODAY' }"
                >
                  {{ "view_all" | translate }}
                </button>
              </div>
            </div>
          </div>
          <div class="bottom_bar">
            <div class="table-wrap">
              <div class="table-inner without_pagination_block">
                <table
                  mat-table
                  [dataSource]="dataSource"
                  class="mat-elevation-z8 withoutpagination"
                >
                  <!-- Patient Name  Column -->
                  <ng-container matColumnDef="patientname">
                    <th mat-header-cell *matHeaderCellDef>
                      {{ "patient_name" | translate }}
                    </th>
                    <td mat-cell *matCellDef="let element">
                      <span class="user_image_wrapper">
                        <img
                          class="user_image"
                          src="
                              ../../../../../assets/img/default_user.png
                            "
                        />
                      </span>
                      <span class="name_user">
                        {{ element?.patient_name }}
                      </span>
                    </td>
                  </ng-container>

                  <!--Date & Time Column -->
                  <ng-container matColumnDef="dateandtime">
                    <th mat-header-cell *matHeaderCellDef>
                      {{ "date_and_time" | translate }}
                    </th>
                    <td mat-cell *matCellDef="let element">
                      {{ element?.consultation_date | date : "dd/MM/YYYY" }} |
                      {{ element?.consultation_time }}
                    </td>
                  </ng-container>

                  <!--Consultation Type Column -->
                  <ng-container matColumnDef="consultationtype">
                    <th mat-header-cell *matHeaderCellDef>
                      {{ "consultation_type" | translate }}
                    </th>
                    <td mat-cell *matCellDef="let element">
                      {{ element?.consultation_type }}
                    </td>
                  </ng-container>

                  <!--Action column -->
                  <ng-container matColumnDef="action">
                    <th mat-header-cell *matHeaderCellDef>
                      {{ "action" | translate }}
                    </th>
                    <td mat-cell *matCellDef="let element">
                      <div class="icon_group">
                        <a class="svgicon">
                          <mat-icon
                            type="button"
                            id="dropdownMenuButton1"
                            data-bs-toggle="dropdown"
                            aria-expanded="false"
                          >
                            visibility
                          </mat-icon>
                          <ul
                            class="action_dropmenu dropdown-menu"
                            aria-labelledby="dropdownMenuButton1"
                          >
                            <li
                              class="pointer"
                              [routerLink]="[
                                '/individual-doctor/appointment/appointmentdetails',
                                element?.appointment_id
                              ]"
                            >
                              {{ "view_tests" | translate }}
                            </li>
                            <!-- <svg xmlns="http://www.w3.org/2000/svg" width="16" height="10" viewBox="0 0 16 10" fill="none">
                                                          <path [routerLink]="[
                                                          '/individual-doctor/appointment/appointmentdetails',
                                                          element?.appointment_id
                                                        ]"
                                                         d="M8 0.550781C2.7512 0.550781 0 4.43364 0 5.05078C0 5.66632 2.7512 9.55078 8 9.55078C13.248 9.55078 16 5.66632 16 5.05078C16 4.43364 13.248 0.550781 8 0.550781ZM8 8.51176C6.036 8.51176 4.444 6.96248 4.444 5.05078C4.444 3.13908 6.036 1.58819 8 1.58819C9.964 1.58819 11.5552 3.13908 11.5552 5.05078C11.5552 6.96248 9.964 8.51176 8 8.51176ZM8 5.05078C7.6744 4.69158 8.5304 3.31989 8 3.31989C7.0176 3.31989 6.2216 4.09533 6.2216 5.05078C6.2216 6.00623 7.0176 6.78167 8 6.78167C8.9816 6.78167 9.7784 6.00623 9.7784 5.05078C9.7784 4.61123 8.2768 5.35533 8 5.05078Z"/>
                                                          </svg>
                                                          -->
                          </ul>
                        </a>
                      </div>
                    </td>
                  </ng-container>

                  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                  <tr
                    mat-row
                    *matRowDef="let row; columns: displayedColumns"
                  ></tr>
                </table>
              </div>
              <div *ngIf="dataSource?.length === 0" class="text-center">
                <b>{{ "no_record_found" | translate }}</b>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="giveInnerPermission('appoin_graph')">
      <div class="col-md-6 total_appointment appointment">
        <div class="total_appointment_inner common_space">
          <div class="top_bar">
            <div class="left_part">
              <div class="main_title">{{ "total_tests" | translate }}</div>
            </div>
            <div class="right_part">
              <div class="content_wrap">
                <div class="policy">
                  <div class="form_field_wrapper">
                    <label>{{ "select_type" | translate }}:</label>
                    <mat-form-field appearance="fill" class="form-field-block">
                      <mat-select
                        [(ngModel)]="selectedStatus"
                        (selectionChange)="handleSelectFliterList($event)"
                      >
                        <mat-option value="ALL">{{
                          "all" | translate
                        }}</mat-option>
                        <mat-option value="APPROVED">{{
                          "approved" | translate
                        }}</mat-option>
                        <mat-option value="NEW">{{
                          "new" | translate
                        }}</mat-option>
                        <mat-option value="PAST">{{
                          "past" | translate
                        }}</mat-option>
                        <mat-option value="REJECTED">{{
                          "rejected" | translate
                        }}</mat-option>
                        <mat-option value="MISSED"> {{ 'missed' | translate}}</mat-option>
                      </mat-select>
                      <!-- <mat-select>
                                                  <mat-option value="option1">Approved</mat-option>
                                                  <mat-option value="option2">Not Approved</mat-option>
                                              </mat-select> -->
                    </mat-form-field>
                  </div>
                </div>
              </div>
              <div class="icons">
                <mat-icon (click)="openVerticallyCenteredlinechartpopup(linechartpopup)">open_in_full</mat-icon>
                <div class="more_action">
                  <button
                    class="btn btn-outline-light"
                    type="button"
                    id="dropdownMenuButton1"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <mat-icon>more_vert</mat-icon>
                  </button>
                  <ul
                    class="dropdown-menu"
                    aria-labelledby="dropdownMenuButton1"
                  >
                    <li>
                      <a class="dropdown-item" href="#">{{
                        "action" | translate
                      }}</a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="#">{{
                        "another_action" | translate
                      }}</a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="#">{{
                        "something_else_here" | translate
                      }}</a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div class="bottom_bar">
            <div
              class="chart-container"
              *ngIf="totalTestsForLine.length > 0; else noData"
            >
              <canvas
                baseChart
                [type]="'line'"
                [data]="lineChartData"
                [options]="lineChartOptions"
                [legend]="lineChartLegend"
              >
              </canvas>
            </div>

            <ng-template #noData>
              <p>{{ "no_data_available_for_line_chart" | translate }}</p>
            </ng-template>
          </div>
        </div>
      </div>
    </ng-container>
    </div>
  </div>

  <div class="revenue_claim_wrapper">
    <div class="row">
      <ng-container *ngIf="giveInnerPermission('total_revenue')">
      <div class="total_revenue revenue_claim col-md-6">
        <div class="total_revenue_inner common_space">
          <div class="top_bar">
            <div class="left_part">
              <div class="main_title">{{ "total_revenue" | translate }}</div>
            </div>
            <div class="right_part">
              <div class="icons">
                <mat-icon (click)="openVerticallyCenteredpiechartpopup(piechartpopup)">open_in_full</mat-icon>
                <div class="more_action">
                  <button
                    class="btn btn-outline-light"
                    type="button"
                    id="dropdownMenuButton1"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <mat-icon>more_vert</mat-icon>
                  </button>
                  <ul
                    class="dropdown-menu"
                    aria-labelledby="dropdownMenuButton1"
                  >
                    <li>
                      <a class="dropdown-item" href="#">{{
                        "action" | translate
                      }}</a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="#">{{
                        "another_action" | translate
                      }}</a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="#">{{
                        "something_else_here" | translate
                      }}</a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div class="bottom_bar">
            <div class="pie_outer">
              <div
                class="pie_chart_main canvas_wrap"
                *ngIf="pieChartDatasets.length > 0; else noData"
              >
                <canvas
                  baseChart
                  [type]="'pie'"
                  [datasets]="pieChartDatasets"
                  [options]="pieChartOptions"
                  [plugins]="pieChartPlugins"
                  [legend]="pieChartLegend"
                >
                </canvas>
              </div>
              <ng-template #noData>
                <p>{{ "no_data_available" | translate }}</p>
              </ng-template>
            </div>
            <div class="detail_description chart">
              <ul class="row">
                <li>
                  <div class="line blue"></div>
                  <div class="detail_section">
                    <p>{{ totalRevenue }}</p>
                    <p>{{ "all" | translate }}</p>
                  </div>
                </li>
                <li>
                  <div class="line blue"></div>
                  <div class="detail_section">
                    <p>{{ totalf2fRevenue }}</p>
                    <p>{{ "f2f" | translate }}</p>
                  </div>
                </li>
                <li>
                  <div class="line skyblue"></div>
                  <div class="detail_section">
                    <p>{{ totalHomeVisitRevenue }}</p>
                    <p>{{ "home_visit" | translate }}</p>
                  </div>
                </li>
                <li>
                  <div class="line pink"></div>
                  <div class="detail_section">
                    <p>{{ totalOnlineRevenue }}</p>
                    <p>{{ "online" | translate }}</p>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="giveInnerPermission('total_claim')">
      <div class="total_claim revenue_claim col-md-6">
        <div class="total_claim_inner common_space">
          <div class="top_bar">
            <div class="left_part">
              <div class="main_title">{{ "total_cliams" | translate }}</div>
            </div>
            <div class="right_part">
              <div class="icons">
                <mat-icon (click)="openVerticallyCenteredlinechartpopup(barchartpopup)">open_in_full</mat-icon>
                <div class="more_action">
                  <button
                    class="btn btn-outline-light"
                    type="button"
                    id="dropdownMenuButton1"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <mat-icon>more_vert</mat-icon>
                  </button>
                  <ul
                    class="dropdown-menu"
                    aria-labelledby="dropdownMenuButton1"
                  >
                    <li>
                      <a class="dropdown-item" href="#">{{
                        "action" | translate
                      }}</a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="#">{{
                        "another_action" | translate
                      }}</a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="#">{{
                        "something_else_here" | translate
                      }}</a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div class="bottom_bar">
            <div *ngIf="totalclaimChartData">
              <div class="chart-container">
                <canvas
                  baseChart
                  [data]="totalclaimChartData"
                  [options]="totalclaimChartOptions"
                  [plugins]="totalclaimChartPlugins"
                  [legend]="totalclaimChartLegend"
                  [type]="'bar'"
                >
                </canvas>
              </div>
            </div>

            <div *ngIf="!totalclaimChartData">
              <p>{{ "no_data_available_for_total_claims" | translate }}</p>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
    </div>
  </div>
</div>


<!--vertical piechart modal-->
<ng-template #piechartpopup let-modal>
  <div class="custome_modal">
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">
        {{ "total_revenue" | translate }}
      </h4>
      <button
        type="button"
        class="btn-close"
        aria-label="Close"
        (click)="closePopup()"
      >
        <mat-icon>close</mat-icon>
      </button>
    </div>
    <div class="bottom_bar">
      <div class="pie_outer">
        <div
          class="pie_chart_main canvas_wrap"
          *ngIf="pieChartDatasets.length > 0; else noData"
        >
          <canvas
            baseChart
            [type]="'pie'"
            [datasets]="pieChartDatasets"
            [options]="pieChartOptions"
            [plugins]="pieChartPlugins"
            [legend]="pieChartLegend"
          >
          </canvas>
        </div>
        <ng-template #noData>
          <p>{{ "no_data_available" | translate }}</p>
        </ng-template>
      </div>
    </div>
  </div>
</ng-template>

<!--vertical piechart modal-->
<ng-template #linechartpopup let-modal>
  <div class="custome_modal">
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">
        {{ "total_appointments" | translate }}
      </h4>
      <button
        type="button"
        class="btn-close"
        aria-label="Close"
        (click)="closePopup()"
      >
        <mat-icon>close</mat-icon>
      </button>
    </div>
    <div class="bottom_bar">
      <div
        class="chart-container"
        *ngIf="totalTestsForLine.length > 0; else noData"
      >
        <canvas
          baseChart
          [type]="'line'"
          [data]="lineChartData"
          [options]="lineChartOptions"
          [legend]="lineChartLegend"
        >
        </canvas>
      </div>

      <ng-template #noData>
        <p>{{ "no_data_available_for_line_chart" | translate }}</p>
      </ng-template>
    </div>
  </div>
</ng-template>

<!--vertical piechart modal-->
<ng-template #barchartpopup let-modal>
  <div class="custome_modal">
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">
        {{ "total_cliams" | translate }}
      </h4>
      <button
        type="button"
        class="btn-close"
        aria-label="Close"
        (click)="closePopup()"
      >
        <mat-icon>close</mat-icon>
      </button>
    </div>
    <div class="bottom_bar">
      <div *ngIf="totalclaimChartData">
        <div class="chart-container">
          <canvas
            baseChart
            [data]="totalclaimChartData"
            [options]="totalclaimChartOptions"
            [plugins]="totalclaimChartPlugins"
            [legend]="totalclaimChartLegend"
            [type]="'bar'"
          >
          </canvas>
        </div>
      </div>

      <div *ngIf="!totalclaimChartData">
        <p>{{ "no_data_available_for_total_claims" | translate }}</p>
      </div>
    </div>
  </div>
</ng-template>